"""Table components for displaying top CPU and memory consuming processes."""

# AUTOGENERATED! DO NOT EDIT! File to edit: ../../nbs/components/tables.ipynb.

# %% auto 0
__all__ = ['render_cpu_processes_table', 'render_memory_processes_table']

# %% ../../nbs/components/tables.ipynb 3
from fasthtml.common import *
from fasthtml.common import FT

# DaisyUI imports
from cjm_fasthtml_daisyui.components.data_display.badge import badge, badge_colors, badge_sizes
from cjm_fasthtml_daisyui.components.data_display.table import table, table_modifiers, table_sizes

# Tailwind imports
from cjm_fasthtml_tailwind.utilities.sizing import w
from cjm_fasthtml_tailwind.utilities.typography import font_size, font_weight
from cjm_fasthtml_tailwind.core.base import combine_classes

# HTML IDs
from ..core.html_ids import HtmlIds

# %% ../../nbs/components/tables.ipynb 5
def render_cpu_processes_table(
    top_cpu:list  # List of dictionaries containing top CPU-consuming process information
)-> FT:  # A Div element containing the CPU processes table
    """Render the CPU processes table."""
    return Div(
        Table(
            Thead(
                Tr(
                    Th("PID", cls=combine_classes(font_size.xs, w(16))),
                    Th("Name", cls=str(font_size.xs)),
                    Th("CPU %", cls=combine_classes(font_size.xs, w(20))),
                    Th("Memory", cls=combine_classes(font_size.xs, w(24))),
                    Th("User", cls=str(font_size.xs))
                )
            ),
            Tbody(
                *[Tr(
                    Td(str(proc['pid']), cls=str(font_size.xs)),
                    Td(
                        proc['name'],
                        cls=combine_classes(font_size.xs, font_weight.medium)
                    ),
                    Td(
                        Label(
                            f"{proc['cpu_percent']:.1f}%",
                            cls=combine_classes(
                                badge,
                                badge_colors.error if proc['cpu_percent'] > 50 else
                                badge_colors.warning if proc['cpu_percent'] > 25 else
                                badge_colors.info,
                                badge_sizes.sm
                            )
                        )
                    ),
                    Td(f"{proc['memory_mb']:.0f} MB", cls=str(font_size.xs)),
                    Td(proc['username'], cls=str(font_size.xs))
                ) for proc in top_cpu]
            ),
            cls=combine_classes(table, table_modifiers.zebra, table_sizes.xs, w.full)
        ),
        id=HtmlIds.CPU_PROCESSES_TABLE
    )

# %% ../../nbs/components/tables.ipynb 7
def render_memory_processes_table(
    top_memory:list  # List of dictionaries containing top memory-consuming process information
)-> FT:  # A Div element containing the memory processes table
    """Render the memory processes table."""
    return Div(
        Table(
            Thead(
                Tr(
                    Th("PID", cls=combine_classes(font_size.xs, w(16))),
                    Th("Name", cls=str(font_size.xs)),
                    Th("Memory %", cls=combine_classes(font_size.xs, w(20))),
                    Th("Memory", cls=combine_classes(font_size.xs, w(24))),
                    Th("User", cls=str(font_size.xs))
                )
            ),
            Tbody(
                *[Tr(
                    Td(str(proc['pid']), cls=str(font_size.xs)),
                    Td(
                        proc['name'],
                        cls=combine_classes(font_size.xs, font_weight.medium)
                    ),
                    Td(
                        Label(
                            f"{proc['memory_percent']:.1f}%",
                            cls=combine_classes(
                                badge,
                                badge_colors.error if proc['memory_percent'] > 50 else
                                badge_colors.warning if proc['memory_percent'] > 25 else
                                badge_colors.info,
                                badge_sizes.sm
                            )
                        )
                    ),
                    Td(f"{proc['memory_mb']:.0f} MB", cls=str(font_size.xs)),
                    Td(proc['username'], cls=str(font_size.xs))
                ) for proc in top_memory]
            ),
            cls=combine_classes(table, table_modifiers.zebra, table_sizes.xs, w.full)
        ),
        id=HtmlIds.MEMORY_PROCESSES_TABLE
    )
