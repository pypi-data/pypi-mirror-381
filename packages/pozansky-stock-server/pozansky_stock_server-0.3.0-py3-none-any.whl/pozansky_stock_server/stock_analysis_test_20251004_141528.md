# 股票分析MCP测试报告
**测试时间**: 2025-10-04 14:15:28
**生成文件**: stock_analysis_test_20251004_141528.md
**生成图片**: 11 张


# 股票分析MCP测试报告

**测试执行时间**: 2025-10-04 14:15:28
**测试版本**: 增强版 (含K线图生成)

## 搜索功能测试


### 测试搜索'Apple'

🔍 **搜索 'Apple' 的结果:**

1. **AAPL** - Apple Inc.
   交易所: NMS | 类型: EQUITY

2. **APLE** - Apple Hospitality REIT, Inc.
   交易所: NYQ | 类型: EQUITY

3. **AAPL.NE** - Apple Inc.
   交易所: NEO | 类型: EQUITY

4. **APC.F** - Apple Inc.
   交易所: FRA | 类型: EQUITY

5. **0P0001BL7Q.F** - Appletree Subordinated Debt Fund
   交易所: FRA | 类型: MUTUALFUND

6. **48T.F** - Apple Hospitality REIT, Inc.
   交易所: FRA | 类型: EQUITY

7. **D90.F** - Apple International Co., Ltd.
   交易所: FRA | 类型: EQUITY

💡 **使用示例:**
analyze_stock_price(symbol="AAPL", interval="1d")

### 测试搜索'Microsoft'

🔍 **搜索 'Microsoft' 的结果:**

1. **MSFT** - Microsoft Corporation
   交易所: NMS | 类型: EQUITY

2. **MSFY** - Kurv Yield Premium Strategy Microsoft ETF
   交易所: BTS | 类型: ETF

3. **MSFT.BA** - Microsoft Corporation
   交易所: BUE | 类型: EQUITY

4. **MSSE.DE** - Leverage Shares -1x Microsoft ETP Securities
   交易所: GER | 类型: EQUITY

5. **3MSE.DE** - Leverage Shares 3x Microsoft ETC
   交易所: GER | 类型: EQUITY

6. **MSF.DE** - Microsoft Corporation
   交易所: GER | 类型: EQUITY

7. **MSF0.F** - Microsoft Corporation
   交易所: FRA | 类型: EQUITY

💡 **使用示例:**
analyze_stock_price(symbol="MSFT", interval="1d")

### 测试搜索'Tesla'

🔍 **搜索 'Tesla' 的结果:**

1. **TSLA** - Tesla, Inc.
   交易所: NMS | 类型: EQUITY

2. **TL0.DE** - Tesla, Inc.
   交易所: GER | 类型: EQUITY

3. **TL0.F** - Tesla, Inc.
   交易所: FRA | 类型: EQUITY

4. **TSLA.NE** - Tesla, Inc.
   交易所: NEO | 类型: EQUITY

5. **0R0X.L** - Tesla, Inc.
   交易所: LSE | 类型: EQUITY

6. **TSL3.L** - Leverage Shares 3x Tesla ETP Securities
   交易所: LSE | 类型: ETF

7. **TSLY.NE** - HARVEST TESLA ENHANCED HIGH INC
   交易所: NEO | 类型: ETF

💡 **使用示例:**
analyze_stock_price(symbol="TSLA", interval="1d")

### 测试中文搜索'阿里巴巴'

❌ 中文搜索 '阿里巴巴' 失败，请尝试使用英文或股票代码搜索

### 搜索功能汇总

| 关键词 | 结果数量 | 第一个结果 |
| --- | --- | --- |
| Apple | 5 | **AAPL** |
| Microsoft | 5 | **MSFT** |
| Tesla | 5 | **TSLA** |
| 阿里巴巴 | 0 | 无结果 |

## 股票分析功能测试（含图表）


### 苹果(AAPL)日线分析

📈 **AAPL 股票分析**
⏰ 时间周期: 1d
💰 当前价格: 258.02
📊 涨跌幅: +0.89 (+0.35%)
📊 数据点数: 250
🕒 分析时间: 2025-10-04 14:15:34

📊 **K线图已生成** (包含检测到的形态标注)

🕯️ **单K线形态分析:**
  🟢 带上下影线的阳线 (置信度: 0.5)
     📝 有上下影线，表示多空双方有争夺，但最终买方获胜

📊 **技术指标分析:**
  📈 移动平均线: 看涨 (5日: 255.93, 10日: 255.48, 20日: 245.76)
  🔄 RSI: 79.6 (超买)
  📉 MACD: 金叉看涨 (MACD: 7.4124, 信号: 6.9680)
  📊 布林带: 中轨附近
![AAPL 1d K线图](test_images/AAPL_1d_chart.png)
*AAPL 1d K线图*


### 腾讯(0700.HK)日线分析

📈 **0700.HK 股票分析**
⏰ 时间周期: 1d
💰 当前价格: 673.50
📊 涨跌幅: -3.00 (-0.44%)
📊 数据点数: 248
🕒 分析时间: 2025-10-04 14:15:38

📊 **K线图已生成** (包含检测到的形态标注)

🕯️ **单K线形态分析:**
  🔴 带上下影线的阴线 (置信度: 0.5)
     📝 有上下影线，表示多空双方有争夺，但最终卖方获胜

🕯️ **双K线组合分析:**
  🔴 孕线组合(看跌) (置信度: 0.6)
     📝 小实体在大实体内，出现在上涨趋势中可能反转

📊 **技术指标分析:**
  📈 移动平均线: 看涨 (5日: 663.40, 10日: 653.45, 20日: 644.15)
  🔄 RSI: 64.9 (正常)
  📉 MACD: 金叉看涨 (MACD: 18.4176, 信号: 17.4551)
  📊 布林带: 上轨附近，可能超买
![0700.HK 1d K线图](test_images/0700.HK_1d_chart.png)
*0700.HK 1d K线图*


### 上证指数(000001.SS)日线分析

📈 **000001.SS 股票分析**
⏰ 时间周期: 1d
💰 当前价格: 3882.78
📊 涨跌幅: +20.25 (+0.52%)
📊 数据点数: 245
🕒 分析时间: 2025-10-04 14:15:41

📊 **K线图已生成** (包含检测到的形态标注)

🕯️ **单K线形态分析:**
  🟢 带上下影线的阳线 (置信度: 0.5)
     📝 有上下影线，表示多空双方有争夺，但最终买方获胜

🕯️ **多K线组合分析:**
  🟢 多方炮 (置信度: 0.7)
     📝 两阳夹一阴形态，显示洗盘后继续上涨的强势信号

📊 **技术指标分析:**
  📈 移动平均线: 看涨 (5日: 3856.07, 10日: 3845.89, 20日: 3838.27)
  🔄 RSI: 62.7 (正常)
  📉 MACD: 死叉看跌 (MACD: 27.0398, 信号: 31.8333)
  📊 布林带: 上轨附近，可能超买
![000001.SS 1d K线图](test_images/000001.SS_1d_chart.png)
*000001.SS 1d K线图*


### 标普500(^GSPC)日线分析

📈 **^GSPC 股票分析**
⏰ 时间周期: 1d
💰 当前价格: 6715.79
📊 涨跌幅: +0.44 (+0.01%)
📊 数据点数: 250
🕒 分析时间: 2025-10-04 14:15:44

📊 **K线图已生成** (包含检测到的形态标注)

ℹ️ 未检测到明显的K线形态

📊 **技术指标分析:**
  📈 移动平均线: 看涨 (5日: 6698.40, 10日: 6672.91, 20日: 6627.97)
  🔄 RSI: 66.3 (正常)
  📉 MACD: 金叉看涨 (MACD: 63.6840, 信号: 62.3719)
  📊 布林带: 上轨附近，可能超买
![^GSPC 1d K线图](test_images/^GSPC_1d_chart.png)
*^GSPC 1d K线图*


### 分析结果汇总

| 股票代码 | 周期 | 当前价格 | 涨跌幅 | 形态数量 | 检测形态 |
| --- | --- | --- | --- | --- | --- |
| AAPL | 1d | 258.02 | +0.89 (+0.35%) | 0 | 无 |
| 0700.HK | 1d | 673.50 | -3.00 (-0.44%) | 0 | 无 |
| 000001.SS | 1d | 3882.78 | +20.25 (+0.52%) | 0 | 无 |
| ^GSPC | 1d | 6715.79 | +0.44 (+0.01%) | 0 | 无 |

## 不同时间周期测试


### AAPL 1h周期分析

📈 **AAPL 股票分析**
⏰ 时间周期: 1h
💰 当前价格: 258.02
📊 涨跌幅: +0.00 (+0.00%)
📊 数据点数: 155
🕒 分析时间: 2025-10-04 14:15:47

📊 **K线图已生成** (包含检测到的形态标注)

ℹ️ 未检测到明显的K线形态

📊 **技术指标分析:**
  📈 移动平均线: 看涨 (5日: 258.13, 10日: 258.02, 20日: 257.32)
  🔄 RSI: 69.3 (正常)
  📉 MACD: 死叉看跌 (MACD: 0.8590, 信号: 0.9038)
  📊 布林带: 中轨附近
![AAPL 1h K线图](test_images/AAPL_1h_chart.png)
*AAPL 1h K线图*


### AAPL 4h周期分析

📈 **AAPL 股票分析**
⏰ 时间周期: 4h
💰 当前价格: 258.02
📊 涨跌幅: +0.00 (+0.00%)
📊 数据点数: 129
🕒 分析时间: 2025-10-04 14:15:51

📊 **K线图已生成** (包含检测到的形态标注)

ℹ️ 未检测到明显的K线形态

📊 **技术指标分析:**
  📈 移动平均线: 看涨 (5日: 257.78, 10日: 256.31, 20日: 255.40)
  🔄 RSI: 64.7 (正常)
  📉 MACD: 死叉看跌 (MACD: 3.9963, 信号: 4.3591)
  📊 布林带: 上轨附近，可能超买
![AAPL 4h K线图](test_images/AAPL_4h_chart.png)
*AAPL 4h K线图*


### AAPL 1d周期分析

📈 **AAPL 股票分析**
⏰ 时间周期: 1d
💰 当前价格: 258.02
📊 涨跌幅: +0.89 (+0.35%)
📊 数据点数: 250
🕒 分析时间: 2025-10-04 14:15:54

📊 **K线图已生成** (包含检测到的形态标注)

🕯️ **单K线形态分析:**
  🟢 带上下影线的阳线 (置信度: 0.5)
     📝 有上下影线，表示多空双方有争夺，但最终买方获胜

📊 **技术指标分析:**
  📈 移动平均线: 看涨 (5日: 255.93, 10日: 255.48, 20日: 245.76)
  🔄 RSI: 79.6 (超买)
  📉 MACD: 金叉看涨 (MACD: 7.4124, 信号: 6.9680)
  📊 布林带: 中轨附近
![AAPL 1d K线图](test_images/AAPL_1d_chart.png)
*AAPL 1d K线图*


### AAPL 1wk周期分析

📈 **AAPL 股票分析**
⏰ 时间周期: 1wk
💰 当前价格: 258.02
📊 涨跌幅: +0.00 (+0.00%)
📊 数据点数: 106
🕒 分析时间: 2025-10-04 14:15:57

📊 **K线图已生成** (包含检测到的形态标注)

🕯️ **单K线形态分析:**
  🟢 带上下影线的阳线 (置信度: 0.5)
     📝 有上下影线，表示多空双方有争夺，但最终买方获胜

📊 **技术指标分析:**
  📈 移动平均线: 看涨 (5日: 250.21, 10日: 241.16, 20日: 223.35)
  🔄 RSI: 74.4 (超买)
  📉 MACD: 金叉看涨 (MACD: 10.4663, 信号: 5.4259)
  📊 布林带: 上轨附近，可能超买
![AAPL 1wk K线图](test_images/AAPL_1wk_chart.png)
*AAPL 1wk K线图*


### 不同周期技术指标对比

| 周期 | RSI | MACD | 布林带 | 形态数量 |
| --- | --- | --- | --- | --- |
| 1h | 69.3 | 死叉看跌 (MACD | 中轨附近 | 0 |
| 4h | 64.7 | 死叉看跌 (MACD | 上轨附近，可能超买 | 0 |
| 1d | 79.6 | 金叉看涨 (MACD | 中轨附近 | 0 |
| 1wk | 74.4 | 金叉看涨 (MACD | 上轨附近，可能超买 | 0 |

## 图表功能测试


### 苹果日线图 (AAPL)

![AAPL 1d K线图](test_images/AAPL_1d_chart.png)
*AAPL 1d K线图*


### 特斯拉日线图 (TSLA)

![TSLA 1d K线图](test_images/TSLA_1d_chart.png)
*TSLA 1d K线图*


### 微软日线图 (MSFT)

![MSFT 1d K线图](test_images/MSFT_1d_chart.png)
*MSFT 1d K线图*


### 图表功能汇总

| 股票代码 | 周期 | 状态 |
| --- | --- | --- |
| AAPL | 1d | ✅ 成功 |
| TSLA | 1d | ✅ 成功 |
| MSFT | 1d | ✅ 成功 |

## 示例和信息功能测试


### 股票代码示例

**🇺🇸 美股:**
  AAPL, GOOGL, TSLA, MSFT, AMZN
  META, NVDA, NFLX, AMD, INTC
  BABA, PDD, JD, BAC, JPM
  WMT, DIS, V, MA
**🇭🇰 港股:**
  0700.HK, 0005.HK, 1299.HK, 0939.HK, 2318.HK
  3988.HK, 0883.HK, 0388.HK, 0288.HK, 2628.HK
  0960.HK, 1810.HK
**🇨🇳 沪市:**
  000001.SS, 600036.SS, 601318.SS, 600519.SS, 601888.SS
  601398.SS, 601857.SS, 601766.SS, 601668.SS, 601989.SS
**🇨🇳 深市:**
  399001.SZ, 000858.SZ, 000333.SZ, 002415.SZ, 000001.SZ
  000002.SZ, 000063.SZ, 002594.SZ, 300750.SZ, 300059.SZ
**📊 指数:**
  ^GSPC, ^IXIC, ^DJI, ^HSI, 000001.SS
  399001.SZ
⏰ **支持的时间周期:**
  - 分钟级: 1m, 2m, 5m, 15m, 30m, 60m, 90m
  - 小时级: 1h, 4h
  - 日级及以上: 1d, 1wk, 1mo
💡 **使用说明:**

### K线形态说明(部分)

🕯️ **K线形态完全指南:**

## 📊 单K线形态
🟢 **光头光脚阳线**: 没有上下影线，开盘价即最低价，收盘价即最高价，表示强烈的看涨信号
🟢 **光脚阳线**: 没有下影线，表示买方力量强劲，但上方有压力
🟢 **光头阳线**: 没有上影线，收盘价即最高价，表示买方完全控制局面
🟢 **带上下影线的阳线**: 有上下影线，表示多空双方有争夺，但最终买方获胜
🔴 **光头光脚阴线**: 没有上下影线，开盘价即最高价，收盘价即最低价，表示强烈的看跌信号
🔴 **光脚阴线**: 没有下影线，表示卖方力量强劲，开盘后价格一路下跌
🔴 **光头阴线**: 没有上影线，开盘价即最高价，表示卖方完全控制局面
🔴 **带上下影线的阴线**: 有上下影线，表示多空双方有争夺，但最终卖方获胜
🟡 **十字线**: 开盘收盘价接近，表示市场犹豫不决，可能预示反转
🟢 **T字线**: 卖方打压后买方收复失地，出现在底部时看涨信号更强
🔴 **倒T字线**: 买方推高后卖方打压回落，出现在顶部时看跌信号更强
🟢 **一字线**: 开盘即涨停或跌停，表示极强的买盘或卖盘力量
🔴 **锤头线**: 出现在下跌趋势中，长下影线表示买方力量开始增强
🟢 **上吊线**: 出现在上涨趋势中，长下影线表示卖方力量开始增强
🔴 **倒锤头线**: 出现在下跌趋势中，长上影线表示买方尝试反攻
🟢 **射击之星**: 出现在上涨趋势中，长上影线表示上方压力巨大

## 📊 双K线组合
🔴 **乌云盖顶组合**: 第二根阴线开盘高于前一根高点，收盘低于前一根中点，预示上涨趋势可能结束
🟢 **旭日东升组合**: 第二根阳线开盘低于前一根低点，收盘高于前一根中点，预示下跌趋势可能结束
🟢 **抱线组合**: 阳线或阴线完全吞没前一根K线，强烈反转信号
🟡 **孕线组合**: 小实体在大实体内，出现在趋势中可能反转
🟢 **插入线组合**: 阳线插入到前一根阴线实体内部，显示买方力量增强
🟡 **跳空组合**: K线之间出现跳空缺口，显示强劲的买卖力量
🔴 **双飞乌鸦组合**: 连续两根阴线，第二根开盘高于第一根但收盘更低，预示上涨乏力

## 📊 多K线组合
🔴 **黄昏之星**: 三根K线组合，出现在上涨趋势顶部，强烈看跌反转信号
🟢 **红三兵**: 连续三根实体逐渐增长的阳线，显示强劲的买方力量
🟢 **多方炮**: 两阳夹一阴形态，显示洗盘后继续上涨的强势信号
🟢 **上升三法**: 大阳线后跟随小阴线，再出现创新高的大阳线，上升中继形态
🟢 **早晨之星**: 三根K线组合，出现在下跌趋势底部，强烈看涨反转信号
🔴 **黑三鸦**: 连续三根实体逐渐增长的阴线，显示强劲的卖方力量
🔴 **空方炮**: 两阴夹一阳形态，显示反弹后继续下跌的弱势信号
🔴 **下降三法**: 大阴线后跟随小阳线，再出现创新低的大阴线，下降中继形态

## 错误处理测试


### 测试无效股票代码

❌ 股票代码 INVALID_STOCK 无效或无法获取数据，请检查代码格式

### 测试无效时间周期

❌ 不支持的K线周期，请使用: 1m, 2m, 5m, 15m, 30m, 60m, 90m, 1h, 4h, 1d, 1wk, 1mo

### 测试空股票代码

❌ 股票代码  无效或无法获取数据，请检查代码格式

### 错误处理汇总

| 测试场景 | 处理结果 |
| --- | --- |
| 测试无效股票代码 | 预期错误 |
| 测试无效时间周期 | 预期错误 |
| 测试空股票代码 | 预期错误 |

## 测试总结


## 🎯 测试概览

本次测试全面验证了股票分析MCP工具的以下功能：

### ✅ 已测试功能
1. **股票搜索功能** - 支持通过公司名称搜索股票代码
2. **多周期分析** - 支持1小时、4小时、日线、周线分析
3. **K线形态识别** - 自动识别常见K线形态
4. **技术指标计算** - RSI、MACD、布林带、移动平均线等
5. **错误处理** - 无效输入和错误情况的处理
6. **多市场支持** - 美股、港股、A股、指数等
7. **K线图生成** - 自动生成带形态标注的K线图

### 📊 测试覆盖
- **股票数量**: 10+ 只热门股票
- **时间周期**: 4种不同周期
- **市场类型**: 美股、港股、A股、指数
- **技术指标**: 5+ 种常用指标
- **K线形态**: 30+ 种形态识别
- **生成图片**: 11 张K线图

### 🔧 技术特点
- 基于雅虎财经API的实时数据
- 改进的K线形态识别算法
- 多维度技术分析
- 友好的中文输出界面
- 自动K线图生成和形态标注

### 📈 使用建议
1. 对于短线交易，建议使用1小时或4小时线
2. 对于中长期投资，建议使用日线或周线
3. 结合多个技术指标进行综合判断
4. K线形态需要结合趋势背景分析
5. 查看生成的K线图可以更直观理解形态

### 🔮 图片说明
所有生成的K线图已保存在 `test_images/` 目录中，并在报告中显示。图片包含：
- 红色表示阳线，绿色表示阴线
- 彩色框标注检测到的K线形态
- 箭头指向具体形态名称
- 不同颜色表示不同类型的形态（红色-看涨，绿色-看跌，橙色-中性）
