[tool.cibuildwheel.environment]
CMAKE_BUILD_PARALLEL_LEVEL = "1"
CXXFLAGS = "-ftemplate-backtrace-limit=0"
CI = "true"
CMAKE_BUILD_TYPE = "Release"

[tool.cibuildwheel.linux]
before-all = [
    "yum install -y cmake bison flex libgomp openblas-devel eigen3-devel || apt-get install -y ninja-build cmake flex bison libeigen3-dev",
]

[tool.cibuildwheel.macos]
before-all = "brew install bison flex libomp"

[tool.cibuildwheel.windows]
before-all = "choco install -y winflexbison3 eigen"

[build-system]
requires = [
    "setuptools>=42",
    "wheel",
    "scikit-build",
    "pybind11",
    "cmake>=3.12",
    "pandas>=2.3.0",
    "openpyxl>=3.1.5",
    "ninja; platform_system!='Windows'",
]
build-backend = "setuptools.build_meta"
