import{q as o}from"./@tanstack-CByuvRcg.js";import{H as c,ag as i,E as l,ai as y,J as u,K as f}from"./index-Cs2FY84s.js";import{f as h}from"./stack-detail-query-DR_HwbzU.js";async function p(e){const a=c(f.stackDeployment.config)+(e?`?${i(e)}`:""),t=await l(a,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.status===404&&y(),!t.ok){const n=await t.json().then(s=>Array.isArray(s.detail)?s.detail[1]:s.detail).catch(()=>"Error while fetching stack deployment config");throw new u({status:t.status,statusText:t.statusText,message:n})}return t.json()}async function k(e){const a=c(f.stackDeployment.info)+(e?`?${i(e)}`:""),t=await l(a,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.status===404&&y(),!t.ok){const n=await t.json().then(s=>Array.isArray(s.detail)?s.detail[1]:s.detail).catch(()=>"Error while fetching stack deployment info");throw new u({status:t.status,statusText:t.statusText,message:n})}return t.json()}async function m(e){const a=c(f.stackDeployment.stack)+(e?`?${i(e)}`:""),t=await l(a,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.status===404&&y(),!t.ok){const n=await t.json().then(s=>Array.isArray(s.detail)?s.detail[1]:s.detail).catch(()=>"Error while fetching the deployed stack");throw new u({status:t.status,statusText:t.statusText,message:n})}return t.json()}async function w(e){const a=c(f.stacks.all)+(e?`?${i(e)}`:""),t=await l(a,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.status===404&&y(),!t.ok){const n=await t.json().then(s=>Array.isArray(s.detail)?s.detail[1]:s.detail).catch(()=>"Error while fetching stacks");throw new u({status:t.status,statusText:t.statusText,message:n})}return t.json()}const r={all:["stacks"],stackDeployment:["stack-deployment"],stackList:e=>o({queryKey:[...r.all,e],queryFn:async()=>w(e)}),stackDetail:e=>o({queryKey:[...r.all,e],queryFn:async()=>h({stackId:e})}),stackDeploymentInfo:e=>o({queryKey:[...r.stackDeployment,"info",e],queryFn:async()=>k(e)}),stackDeploymentStack:e=>o({queryKey:[...r.stackDeployment,"stack",e],queryFn:async()=>m(e)}),stackDeploymentConfig:e=>o({queryKey:[...r.stackDeployment,"config",e],queryFn:async()=>p(e)})};export{w as f,r as s};
