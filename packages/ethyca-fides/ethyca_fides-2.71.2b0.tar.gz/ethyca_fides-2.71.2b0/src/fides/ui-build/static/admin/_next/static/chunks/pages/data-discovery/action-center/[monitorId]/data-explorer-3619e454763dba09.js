(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1961],{66070:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},85630:function(e){e.exports=function(e){return e.split("")}},75733:function(e){e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},34282:function(e,t,n){var r=n(96539),i=n(66070),o=n(19785),s=n(55193),a=1/0,l=r?r.prototype:void 0,c=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(s(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-a?"-0":n}},74833:function(e,t,n){var r=n(56127),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},39158:function(e,t,n){var r=n(75733);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},62690:function(e,t,n){var r=n(39158),i=n(25348),o=n(63528),s=n(65567);e.exports=function(e){return function(t){var n=i(t=s(t))?o(t):void 0,a=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return a[e]()+l}}},25348:function(e){var t=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},63528:function(e,t,n){var r=n(85630),i=n(25348),o=n(84890);e.exports=function(e){return i(e)?o(e):r(e)}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},84890:function(e){var t="\ud800-\udfff",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\ud83c[\udffb-\udfff]",i="[^"+t+"]",o="(?:\ud83c[\udde6-\uddff]){2}",s="[\ud800-\udbff][\udc00-\udfff]",a="(?:"+n+"|"+r+")?",l="[\\ufe0e\\ufe0f]?",c="(?:\\u200d(?:"+[i,o,s].join("|")+")"+l+a+")*",u=RegExp(r+"(?="+r+")|(?:"+[i+n+"?",n,o,s,"["+t+"]"].join("|")+")"+(l+a+c),"g");e.exports=function(e){return e.match(u)||[]}},98052:function(e,t,n){var r=n(65567),i=n(76744);e.exports=function(e){return i(r(e).toLowerCase())}},66726:function(e,t,n){var r=n(11611),i=n(82846),o=n(91936),s=Math.max,a=Math.min;e.exports=function(e,t,n){var l,c,u,d,f,p,m=0,h=!1,g=!1,v=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var n=l,r=c;return l=c=void 0,m=t,d=e.apply(r,n)}function x(e){var n=e-p,r=e-m;return void 0===p||n>=t||n<0||g&&r>=u}function j(){var e,n,r,o=i();if(x(o))return _(o);f=setTimeout(j,(e=o-p,n=o-m,r=t-e,g?a(r,u-n):r))}function _(e){return(f=void 0,v&&l)?y(e):(l=c=void 0,d)}function S(){var e,n=i(),r=x(n);if(l=arguments,c=this,p=n,r){if(void 0===f)return m=e=p,f=setTimeout(j,t),h?y(e):d;if(g)return clearTimeout(f),f=setTimeout(j,t),y(p)}return void 0===f&&(f=setTimeout(j,t)),d}return t=o(t)||0,r(n)&&(h=!!n.leading,u=(g="maxWait"in n)?s(o(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),S.cancel=function(){void 0!==f&&clearTimeout(f),m=0,l=p=c=f=void 0},S.flush=function(){return void 0===f?d:_(i())},S}},19785:function(e){var t=Array.isArray;e.exports=t},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},55193:function(e,t,n){var r=n(99736),i=n(92360);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},82846:function(e,t,n){var r=n(77400);e.exports=function(){return r.Date.now()}},91936:function(e,t,n){var r=n(74833),i=n(11611),o=n(55193),s=0/0,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return s;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=l.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):a.test(e)?s:+e}},65567:function(e,t,n){var r=n(34282);e.exports=function(e){return null==e?"":r(e)}},76744:function(e,t,n){var r=n(62690)("toUpperCase");e.exports=r},19174:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/[monitorId]/data-explorer",function(){return n(64695)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return l}});var r=n(24246),i=n(66726),o=n.n(i),s=n(27378),a=n(26917);let l=e=>{let{value:t,onChange:n,placeholder:i,...l}=e,[c,u]=(0,s.useState)(t);(0,s.useEffect)(()=>{u(t||"")},[t]);let d=o()(n,500),f=(0,s.useCallback)(e=>{u(e),d(e)},[]);return(0,r.jsx)(a.Z,{value:c,onChange:f,onClear:()=>{u(""),n("")},placeholder:i,...l})}},35287:function(e,t,n){"use strict";var r=n(24246),i=n(20595),o=n(88038),s=n.n(o);n(27378),t.Z=e=>{let{children:t,title:n,mainProps:o}=e;return(0,r.jsxs)(i.kCb,{"data-testid":n,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 240px)",children:[(0,r.jsxs)(s(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)(i.kCb,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...o,children:t})]})}},58754:function(e,t,n){"use strict";var r=n(24246),i=n(20595),o=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:s=!0,children:a,rightContent:l,style:c,...u}=e;return(0,r.jsxs)("div",{...u,style:s?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,r.jsxs)(i.jqI,{justify:"space-between",children:["string"==typeof t?(0,r.jsx)(i.lQT,{className:n||a?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,l&&(0,r.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,r.jsx)(o.m,{className:a?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),a]})}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var r=n(24246),i=n(20595),o=n(79894),s=n.n(o),a=n(27378);let{Text:l}=i.AntTypography,c=e=>{let{items:t,...n}=e,o=(0,a.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let o=n===t.length-1,a={...e},c=a.onClick&&!a.href;return("string"==typeof a.title&&(a.title=(0,r.jsx)(l,{style:{color:"inherit",maxWidth:o?void 0:400},ellipsis:!o,id:o?"breadcrumb-current-page":void 0,children:a.title})),c)?a.title=(0,r.jsx)(i.wpx,{type:"text",size:"small",icon:a.icon,onClick:a.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:a.title}):(a.icon&&(a.title=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"anticon align-text-bottom",children:a.icon}),a.title]})),a.href&&a.title&&(a.title=(0,r.jsx)(s(),{href:a.href,className:"ant-breadcrumb-link",children:a.title}),delete a.href)),a}),[t]);return(0,r.jsx)(i.zrq,{items:o,...n})}},9270:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var r=n(27378),i=n(36866);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.h)(e),{pageIndex:n,pageSize:o,updatePageIndex:s,updatePageSize:a,pageSizeOptions:l,showSizeChanger:c}=t,u=(0,r.useMemo)(()=>({current:n,pageSize:o,showSizeChanger:c,pageSizeOptions:l.map(String),onChange:s,onShowSizeChange:(e,t)=>{a(t)}}),[n,o,c,l,s,a]);return{...t,paginationProps:u}}},37059:function(e,t,n){"use strict";n.d(t,{$h:function(){return j},Ak:function(){return g},EY:function(){return f},Fp:function(){return N},QC:function(){return S},RV:function(){return w},S0:function(){return C},Tj:function(){return m},Ud:function(){return a},Vr:function(){return v},WJ:function(){return c},mL:function(){return _},mi:function(){return y},nP:function(){return d},nS:function(){return p},rs:function(){return u},sX:function(){return h},ut:function(){return x},vc:function(){return P},wi:function(){return l}});var r=n(78780),i=n(16394),o=n(85054),s=n(98145);let{useGetAggregateMonitorResultsQuery:a,useGetDiscoveredSystemAggregateQuery:l,useGetDiscoveredAssetsQuery:c,useAddMonitorResultSystemsMutation:u,useIgnoreMonitorResultSystemsMutation:d,useAddMonitorResultAssetsMutation:f,useIgnoreMonitorResultAssetsMutation:p,useRestoreMonitorResultAssetsMutation:m,useUpdateAssetsSystemMutation:h,useUpdateAssetsDataUseMutation:g,useUpdateAssetsMutation:v,useGetConsentBreakdownQuery:y,useGetWebsiteMonitorResourceFiltersQuery:x,useGetInProgressMonitorTasksQuery:j,useRetryMonitorTaskMutation:_,useDismissMonitorTaskMutation:S,useUndismissMonitorTaskMutation:b,useGetMonitorTreeQuery:T,useLazyGetMonitorTreeQuery:w,useGetMonitorFieldsQuery:N,useGetMonitorConfigQuery:P,useGetDatastoreFiltersQuery:C}=r.u.injectEndpoints({endpoints:e=>({getAggregateMonitorResults:e.query({query:e=>{let{page:t=1,size:n=20,search:r}=e;return{url:"/plus/discovery-monitor/aggregate-results",params:{page:t,size:n,search:r,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getMonitorConfig:e.query({query:e=>{let{monitor_config_id:t}=e;return{url:"/plus/discovery-monitor/".concat(t)}}}),getDatastoreFilters:e.query({query:e=>{let{monitor_config_id:t}=e;return{url:"/plus/filters/datastore_monitor_resources/?monitor_config_id=".concat(t)}}}),getMonitorTree:e.query({query:e=>{let{page:t=1,size:n=20,monitor_config_id:r,staged_resource_urn:i}=e;return{url:"/plus/discovery-monitor/".concat(r,"/tree").concat(i?"?staged_resource_urn=".concat(i):""),params:{page:t,size:n}}}}),getMonitorFields:e.query({query:e=>{let{page:t=1,size:n=20,monitor_config_id:r,search:o,diff_status:s,confidence_score:a,...l}=e,c=(0,i.$J)({...l,...o?{search:[o]}:{},...s?{diff_status:s}:{},...a?{confidence_score:a}:{}});return{url:"/plus/discovery-monitor/".concat(r,"/fields?").concat(null==c?void 0:c.toString()),params:{page:t,size:n}}}}),getDiscoveredSystemAggregate:e.query({query:e=>{let{key:t,page:n=1,size:r=20,search:i,diff_status:o}=e;return{url:"/plus/discovery-monitor/system-aggregate-results",params:{monitor_config_id:t,page:n,size:r,search:i,diff_status:o}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredAssets:e.query({query:e=>{let{key:t,system:n,page:r=1,size:a=20,search:l,diff_status:c=[o.LL.ADDITION],sort_by:u=[s.r6.CONSENT_AGGREGATED,"urn"],sort_asc:d=!0,resource_type:f,data_uses:p,locations:m,consent_aggregated:h}=e,g=Array.isArray(u)?u:[u],v=(0,i.$J)({sort_by:g,resource_type:f,data_uses:p,locations:m,consent_aggregated:h});return{url:"/plus/discovery-monitor/".concat(t,"/results?").concat(v.toString()),params:{resolved_system_id:n,page:r,size:a,search:l,diff_status:c,sort_asc:d}}},providesTags:()=>["Discovery Monitor Results"]}),addMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:n}=e,r=(0,i.du)(n,"resolved_system_ids");return{url:"/plus/discovery-monitor/".concat(t,"/promote"),method:"POST",params:r?new URLSearchParams(r):new URLSearchParams}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:n}=e,r=(0,i.du)(n,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(t,"/mute?").concat(r)}},invalidatesTags:["Discovery Monitor Results"]}),addMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/promote?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/mute?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),restoreMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams({status_to_set:o.LL.ADDITION});return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/un-mute?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),updateAssetsSystem:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_system_key:e.systemKey}))}),invalidatesTags:["Discovery Monitor Results","System Assets"]}),updateAssetsDataUse:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_data_uses:e.dataUses}))}),invalidatesTags:["Discovery Monitor Results"]}),updateAssets:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.assets}),invalidatesTags:["Discovery Monitor Results"]}),getConsentBreakdown:e.query({query:e=>{let{stagedResourceUrn:t,status:n,page:r=1,size:i=20}=e;return{url:"/plus/discovery-monitor/staged_resource/".concat(encodeURIComponent(t),"/consent"),params:{status:n,page:r,size:i}}}}),getWebsiteMonitorResourceFilters:e.query({query:e=>{let{monitor_config_id:t,resolved_system_id:n,diff_status:r=[o.LL.ADDITION],search:s,resource_type:a,data_uses:l,locations:c,consent_aggregated:u}=e,d={monitor_config_id:t,resolved_system_id:n,diff_status:r};s&&(d.search=s);let f=(0,i.$J)({resource_type:a,data_uses:l,locations:c,consent_aggregated:u}).toString();return{url:f?"/plus/filters/website_monitor_resources?".concat(f):"/plus/filters/website_monitor_resources",params:d}},providesTags:["Discovery Monitor Results"]}),getInProgressMonitorTasks:e.query({query:e=>{let{page:t=1,size:n=20,search:r,task_types:i,statuses:o,return_dismissed:s=!1}=e,a=new URLSearchParams({page:t.toString(),size:n.toString(),return_dismissed:s.toString()});return r&&a.append("search",r),(null==i?void 0:i.length)&&i.forEach(e=>a.append("action_type",e)),(null==o?void 0:o.length)&&o.forEach(e=>a.append("status",e)),{url:"/plus/discovery-monitor/tasks?".concat(a.toString())}},providesTags:["Monitor Tasks"]}),retryMonitorTask:e.mutation({query:e=>{let{taskId:t}=e;return{url:"/plus/discovery-monitor/tasks/".concat(t,"/retry"),method:"POST"}},invalidatesTags:["Monitor Tasks"]}),dismissMonitorTask:e.mutation({query:e=>{let{taskId:t}=e;return{url:"/plus/discovery-monitor/tasks/".concat(t,"/dismissed"),method:"POST"}},invalidatesTags:["Monitor Tasks"]}),undismissMonitorTask:e.mutation({query:e=>{let{taskId:t}=e;return{url:"/plus/discovery-monitor/tasks/".concat(t,"/dismissed"),method:"DELETE"}},invalidatesTags:["Monitor Tasks"]})})})},98145:function(e,t,n){"use strict";n.d(t,{EI:function(){return l},LM:function(){return f},Vq:function(){return d},X1:function(){return u},r6:function(){return s},vQ:function(){return a}});var r,i,o,s,a,l,c=n(85054);let u={[c.lg.WITH_CONSENT]:"Consent respected",[c.lg.WITHOUT_CONSENT]:"Consent ignored",[c.lg.EXEMPT]:"Exempt",[c.lg.UNKNOWN]:"Unknown",[c.lg.PRE_CONSENT]:"Pre-Consent",[c.lg.CMP_ERROR]:"CMP failure",[c.lg.NOT_APPLICABLE]:"Not applicable"},d={[c.lg.WITH_CONSENT]:"Asset was detected after the user gave consent",[c.lg.WITHOUT_CONSENT]:"The user explicitly opted out, but this asset still loaded. This is a serious compliance issue and may indicate that consent settings are not being enforced.",[c.lg.EXEMPT]:"Asset is valid regardless of consent",[c.lg.UNKNOWN]:"Did not find consent information for this asset. You may need to re-run the monitor.",[c.lg.PRE_CONSENT]:"Assets loaded before the user had a chance to give consent. This violates opt-in compliance requirements if your CMP is configured for explicit consent.",[c.lg.CMP_ERROR]:"The Consent Management Platform (CMP) was not detected when the service ran. It likely failed to load or wasn't available.",[c.lg.NOT_APPLICABLE]:"No privacy notices apply to this asset"},f=[c.lg.WITHOUT_CONSENT,c.lg.PRE_CONSENT,c.lg.CMP_ERROR];(r=s||(s={})).NAME="name",r.RESOURCE_TYPE="resource_type",r.SYSTEM="system",r.DATA_USES="data_uses",r.LOCATIONS="locations",r.DOMAIN="domain",r.PAGE="page",r.CONSENT_AGGREGATED="consent_aggregated",r.ACTIONS="actions",(i=a||(a={})).SYSTEM_NAME="system_name",i.TOTAL_UPDATES="total_updates",i.DATA_USE="data_use",i.LOCATIONS="locations",i.DOMAINS="domains",i.ACTIONS="actions",(o=l||(l={})).LOCATION="location",o.PAGE="page"},64695:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var r,i,o=n(24246),s=n(20595),a=n(25980),l=n(86677),c=n(27378),u=n(30952),d=n(35287),f=n(17245),p=n(77830),m=n(58754),h=n(9270),g=n(37059),v=n(85054),y=n(98052),x=n.n(y);(r=i||(i={})).LOW="low",r.HIGH="high",r.MANUAL="manual";var j=n(40431);let _=["Attention Required","In Review","Classifying","Approved","Unmonitored"],S=()=>{let[e,t]=(0,j.v1)("resourceStatus",(0,j.S$)((0,j.km)(_))),[n,r]=(0,j.v1)("confidenceScore",(0,j.S$)((0,j.jx)(Object.values(i)))),[o,s]=(0,j.v1)("dataCategory",(0,j.S$)(j.Oi));return{resourceStatus:e,setResourceStatus:t,confidenceScore:n,setConfidenceScore:r,dataCategory:o,setDataCategory:s,reset:()=>{t(null),r(null),s(null)}}},b=e=>{var t;let{resourceStatus:n,setResourceStatus:r,confidenceScore:a,setConfidenceScore:l,dataCategory:c,setDataCategory:u,reset:d,monitorId:f}=e,{data:p}=(0,g.S0)({monitor_config_id:f});return(0,o.jsx)("div",{className:"rounded-[var(--ant-border-radius)] bg-[var(--ant-color-bg-base)] shadow-md",children:(0,o.jsx)(s.vyj,{size:"middle",className:"p-[var(--ant-padding)]",children:(0,o.jsxs)(s.PPS,{layout:"vertical",children:[(0,o.jsx)(s.PPS.Item,{label:"Status",className:"w-min whitespace-nowrap",children:(0,o.jsx)(s.E_O.Group,{value:n||[],onChange:e=>r(e.length>0?e:null),children:(0,o.jsx)(s.bue,{children:_.map(e=>(0,o.jsx)(s.JGx,{span:24,children:(0,o.jsx)(s.E_O,{value:e,children:e})},e))})})}),(0,o.jsx)(s.PPS.Item,{label:"Confidence Score",className:"w-min whitespace-nowrap",children:(0,o.jsx)(s.E_O.Group,{value:a||[],onChange:e=>l(e.length>0?e:null),children:(0,o.jsx)(s.bue,{children:Object.values(i).map(e=>(0,o.jsx)(s.JGx,{span:24,children:(0,o.jsx)(s.E_O,{value:e,children:x()(e)})},e))})})}),(null==p?void 0:p.data_category)&&(null==p?void 0:null===(t=p.data_category)||void 0===t?void 0:t.length)>0&&(0,o.jsx)(s.PPS.Item,{label:"Data Category",className:"w-min whitespace-nowrap",children:(0,o.jsx)(s.E_O.Group,{value:c||[],onChange:e=>u(e.length>0?e:null),children:(0,o.jsx)(s.bue,{children:p.data_category.map(e=>(0,o.jsx)(s.JGx,{span:24,children:(0,o.jsx)(s.E_O,{value:e,children:x()(e)})},e))})})}),(0,o.jsx)(s.wpx,{onClick:()=>{d()},children:"Clear"})]})})})};var T=n(16394);let w={classifying:{label:"Classifying",color:"blue"},classification_queued:{label:"Classifying",color:"blue"},classification_update:{label:"Classifying",color:"nectar"},classification_addition:{label:"In Review",color:"blue"},addition:{label:"In Review",color:"blue"},muted:{label:"Unmonitored",color:"nectar"},removal:{label:"Attention Required",color:"red"},removing:{label:"In Review",color:"nectar"},promoting:{label:"In Review",color:"nectar"},monitored:{label:"Approved",color:"nectar"}};var N=e=>{let{urn:t,classifications:n,name:r,diff_status:a,user_assigned_data_categories:l}=e;return(0,o.jsx)(s.krs.Item,{actions:[n&&n.length>0&&(0,o.jsxs)(s.jqI,{gap:"small",align:"center",className:"pr-[var(--ant-padding-xl)]",children:[(0,o.jsx)(s.HwE,{percent:n.find(e=>e.confidence_score===i.HIGH)?100:25,percentPosition:{align:"start",type:"outer"},strokeColor:n.find(e=>e.confidence_score===i.HIGH)?"var(--ant-color-success-text)":"var(--ant-color-warning-text)",steps:2,showInfo:!1,strokeLinecap:"round",size:[24,8]}),(0,o.jsx)(s.lKn,{size:"sm",type:"secondary",className:"font-normal",children:(0,T.kC)(n.find(e=>e.confidence_score===i.HIGH)?i.HIGH:i.LOW)})]},"progress"),n&&n.length>0&&(0,o.jsx)(s.wpx,{icon:(0,o.jsx)(s.PJP.MCw,{}),size:"small"},"approve"),n&&n.length>0&&(0,o.jsx)(s.wpx,{icon:(0,o.jsx)(s.PJP.x8P,{}),size:"small"},"deny"),(0,o.jsx)(s.wpx,{icon:(0,o.jsx)(s.QMR,{}),size:"small"},"reclassify")],children:(0,o.jsx)(s.krs.Item.Meta,{avatar:(0,o.jsx)(s.E_O,{}),title:(0,o.jsx)(s.jqI,{justify:"space-between",children:(0,o.jsxs)(s.jqI,{gap:"small",align:"center",className:"w-full",children:[r,a&&(0,o.jsx)(s.j8w,{bordered:!1,color:w[a].color,className:"font-normal text-[var(--ant-font-size-sm)]",children:w[a].label}),(0,o.jsx)(s.lKn,{size:"sm",type:"secondary",className:"overflow-hidden font-normal",ellipsis:{tooltip:t},children:t})]})}),description:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.wpx,{type:"text",icon:(0,o.jsx)(s.PJP.mm_,{}),size:"small"}),null==n?void 0:n.map(e=>(0,o.jsx)(s.j8w,{bordered:!0,color:"white",closable:!0,icon:(0,o.jsx)(s.QMR,{}),className:"text-[var(--ant-color-text)]",children:e.label},e.label)),null==l?void 0:l.map(e=>(0,o.jsx)(s.j8w,{bordered:!0,color:"white",closable:!0,className:"text-[var(--ant-color-text)]",children:e},e))]})})},t)};let P="load_more",C="skeleton",E=(e,t)=>e.find(e=>{let{children:n}=e;return n&&!!n.find(e=>e.key.toString()===t)}),I=(e,t)=>e.reduce((e,n)=>{if(n.children){var r;return null!==(r=E(n.children,t))&&void 0!==r?r:I(n.children,t)}return e},null),A=e=>{let{node:t,treeData:n,onLoadMore:r}=e;if(t.key.toString().startsWith(P)){let e=I(n,t.key.toString());return(0,o.jsx)(s.wpx,{type:"link",block:!0,onClick:()=>{(null==e?void 0:e.key)&&r(null==e?void 0:e.key.toString())},className:"p-0",children:"function"==typeof t.title?t.title(t):t.title})}return t.key.toString().startsWith(C)?(0,o.jsx)(s.N_L,{paragraph:!1,title:{width:"80px"},active:!0,children:"function"==typeof t.title?t.title(t):t.title}):(0,o.jsx)(s.lKn,{ellipsis:{tooltip:"function"==typeof t.title?t.title(t):t.title},children:"function"==typeof t.title?t.title(t):t.title})},R=(e,t)=>{var n;let r=e.items.map(e=>({title:e.name,key:e.urn,selectable:e.has_children,icon:()=>{switch(e.resource_type){case"Database":return(0,o.jsx)(s.PJP.ehp,{className:"h-full"});case"Table":return(0,o.jsx)(s.PJP.iA_,{className:"h-full"});case"Field":return(0,o.jsx)(s.PJP.$4y,{className:"h-full"});default:return null}},isLeaf:!e.has_children}));return(null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0)<100?r:[...r,{title:"Load more...",key:"".concat(P,"-").concat(e.page,"-").concat(t),selectable:!1,isLeaf:!0}]},M=(e,t,n)=>e.map(e=>{if(e.key===t){var r,i;return{...e,children:[...null!==(i=null===(r=e.children)||void 0===r?void 0:r.filter(e=>!(e.key.toString().startsWith(P)||e.key.toString().startsWith(C))))&&void 0!==i?i:[],...n]}}return e.children?{...e,children:M(e.children,t,n)}:e}),k=(e,t,n)=>e.map(e=>e.key===t?{...e,children:n}:e.children?{...e,children:k(e.children,t,n)}:e);var O=e=>{let{selectedNodeKeys:t,setSelectedNodeKeys:n}=e,r=decodeURIComponent((0,l.useRouter)().query.monitorId),[i]=(0,g.RV)(),[a,u]=(0,c.useState)({}),[d,f]=(0,c.useState)([]),p=e=>{let t=null==a?void 0:a[e];if(t){let n=t.pageIndex+1;f(t=>M(t,e,[...Array(100)].map((t,n)=>({key:"".concat(C,"-").concat(e,"-").concat(n),title:"SKELETON",isLeaf:!0})))),i({monitor_config_id:r,staged_resource_urn:e,size:100,page:n}).then(t=>{let{data:r}=t;r&&(f(t=>M(t,e,R(r,e))),u({...a,[e]:{pageSize:100,pageIndex:n}}))})}};return(0,c.useEffect)(()=>{(async()=>{let{data:e}=await i({monitor_config_id:r,size:100});e&&d.length<=0&&f(R(e))})()},[f]),(0,o.jsxs)(s.jqI,{gap:"middle",vertical:!0,className:"h-full",children:[(0,o.jsx)(s.lQT,{level:3,className:"sticky top-0",children:"Schema explorer"}),(0,o.jsx)(s.a$q,{loadData:e=>{let{children:t,key:n}=e;return new Promise(e=>{if(t){e();return}i({monitor_config_id:r,staged_resource_urn:n.toString(),size:100}).then(e=>{let{data:t}=e;t&&(f(e=>k(e,n,R(t,n.toString()))),u({...a,[n.toString()]:{pageSize:100,pageIndex:1}}))}),e()})},treeData:d,onSelect:(e,t)=>n(t.selectedNodes.map(e=>{let{key:t}=e;return t})),showIcon:!0,showLine:!0,blockNode:!0,multiple:!0,rootClassName:"h-full overflow-x-hidden",titleRender:e=>(0,o.jsx)(A,{node:e,treeData:d,onLoadMore:p})}),t.length>0&&(0,o.jsxs)(s.jqI,{justify:"space-between",align:"center",children:[(0,o.jsxs)("span",{children:[t.length," selected"]}),(0,o.jsx)(s.wpx,{icon:(0,o.jsx)(s.QMR,{}),size:"small"})]})]})};let q={classifying:{label:"Classifying",color:"blue"},classification_queued:{label:"Classifying",color:"blue"},classification_update:{label:"Classifying",color:"nectar"},classification_addition:{label:"In Review",color:"blue"},addition:{label:"In Review",color:"blue"},muted:{label:"Unmonitored",color:"nectar"},removal:{label:"Attention Required",color:"red"},removing:{label:"In Review",color:"nectar"},promoting:{label:"In Review",color:"nectar"},monitored:{label:"Approved",color:"nectar"}},L=e=>Object.values(v.LL).flatMap(t=>q[t].label===e?[t]:[]);var D=()=>{let e=decodeURIComponent((0,l.useRouter)().query.monitorId),{paginationProps:t,pageIndex:n,pageSize:r,resetPagination:i}=(0,h.S)({defaultPageSize:25}),a=(0,f.Rx)(),{resourceStatus:v,confidenceScore:y,...x}=S(),{data:j}=(0,g.vc)({monitor_config_id:e}),[_,T]=(0,c.useState)([]),{data:w}=(0,g.Fp)({monitor_config_id:e,size:r,page:n,staged_resource_urn:_.map(e=>e.toString()),search:a.searchProps.value,diff_status:v?v.flatMap(L):void 0,confidence_score:y||void 0});return(0,c.useEffect)(()=>{i()},[v,y,_,a.searchQuery]),(0,o.jsxs)(d.Z,{title:"Action center - Discovered assets by system",mainProps:{overflow:"hidden"},children:[(0,o.jsx)(m.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:p.vi},{title:e}],isSticky:!1}),(0,o.jsxs)(s.LgQ,{className:"h-[calc(100%-48px)] overflow-hidden",children:[(0,o.jsx)(s.LgQ.Panel,{defaultSize:250,style:{paddingRight:"var(--ant-padding-md)"},children:(0,o.jsx)(O,{selectedNodeKeys:_,setSelectedNodeKeys:T})}),(0,o.jsx)(s.LgQ.Panel,{style:{paddingLeft:"var(--ant-padding-md)"},children:(0,o.jsxs)(s.jqI,{vertical:!0,gap:"middle",className:"h-full overflow-hidden",children:[(0,o.jsxs)(s.jqI,{justify:"space-between",children:[(0,o.jsx)(s.lQT,{level:2,children:"Monitor results"}),(0,o.jsx)(s.jqI,{align:"center",children:(null==j?void 0:j.last_monitored)&&(0,o.jsxs)(s.lKn,{type:"secondary",children:["Last scan:"," ",new Date(null==j?void 0:j.last_monitored).toLocaleString()]})})]}),(0,o.jsxs)(s.jqI,{justify:"space-between",children:[(0,o.jsx)(u.f,{value:a.searchQuery,onChange:a.updateSearch,placeholder:"Search"}),(0,o.jsxs)(s.jqI,{gap:"small",children:[(0,o.jsx)(s.S0p,{trigger:["click"],popupRender:()=>(0,o.jsx)(b,{resourceStatus:v,confidenceScore:y,...x,monitorId:e}),children:(0,o.jsx)(s.wpx,{icon:(0,o.jsx)(s.PJP._ME,{}),iconPosition:"end",children:"Filter"})}),(0,o.jsx)(s.S0p,{menu:{items:[]},children:(0,o.jsx)(s.wpx,{type:"primary",icon:(0,o.jsx)(s.PJP._ME,{}),iconPosition:"end",children:"Actions"})})]})]}),(0,o.jsx)(s.krs,{dataSource:null==w?void 0:w.items,className:"overflow-scroll",renderItem:N}),(0,o.jsx)(s.B7X,{...t,showSizeChanger:!1,total:(null==w?void 0:w.total)||0})]})})]})]})};let U=()=>(0,o.jsxs)(o.Fragment,{children:["Attempting to access the alpha version of monitor results without setting the ",(0,o.jsx)(s.lKn,{code:!0,children:"alphaFullActionCenter"})," flag"]});var z=()=>{let{flags:e}=(0,a.hz)();return e.alphaFullActionCenter?(0,o.jsx)(D,{}):(0,o.jsx)(s.ux6,{status:"error",title:(0,o.jsx)(U,{})})}}},function(e){e.O(0,[431,7245,2888,9774,179],function(){return e(e.s=19174)}),_N_E=e.O()}]);