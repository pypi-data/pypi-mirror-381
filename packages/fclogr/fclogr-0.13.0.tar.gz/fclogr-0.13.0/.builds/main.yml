# Copyright (C) 2023 Maxwell G <maxwell@gtmx.me>
# SPDX-License-Identifier: GPL-2.0-or-later OR MIT
---

image: fedora/42
packages:
  - forge-srpm-macros
  - python3.9
  - python3.10-devel
  - python3.11-devel
  - python3.12-devel
  - python3-devel
  - rpm-build
  - uv
sources:
  - https://git.sr.ht/~gotmax23/fclogr
secrets:
  # ~/.copr-dev-hook
  - ed663ad2-1d16-4624-bbd4-53d682a8f0be
environment:
  NOX_DEFAULT_VENV_BACKEND: uv
tasks:
  - setup: |
      uv tool install nox
      uv tool install git+https://git.sr.ht/~gotmax23/releaserr
  - copr-webhook: |
      cd fclogr
      releaserr copr-webhook ~/.copr-dev-hook --branch origin/main --skip-if-missing
  - nox-test: |
      cd fclogr
      nox -e test -- --cov
  - nox-coverage: |
      cd fclogr
      nox -e coverage
  - nox-lint: |
      cd fclogr
      nox -e lint
