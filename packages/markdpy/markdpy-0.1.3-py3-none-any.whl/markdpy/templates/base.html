<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}markdpy{% endblock %}</title>
    
    <!-- Security headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/static/css/main.css">
    <link id="theme-stylesheet" rel="stylesheet" href="/static/css/themes/{{ theme|default('light') }}.css">
    <link rel="stylesheet" href="/static/css/themes/pygments-monokai.css">
    {% block extra_css %}{% endblock %}
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
        }
        
        th {
            font-weight: 600;
        }
        
        img {
            max-width: 100%;
            height: auto;
        }
        
        .task-list-item {
            list-style-type: none;
        }
        
        .task-list-item input[type="checkbox"] {
            margin-right: 8px;
        }
    </style>
    
    {% block extra_head %}{% endblock %}
</head>
<body>
    {% block body %}
    <div class="container">
        {% block content %}{% endblock %}
    </div>
    {% endblock %}
    
    <!-- Live reload script -->
    {% if reload_enabled %}
    <script src="/static/js/reload.js"></script>
    {% endif %}
    
    <!-- Theme switcher -->
    <script src="/static/js/theme.js"></script>
    
    <!-- MathJax for mathematical expressions -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- Mermaid diagrams (optional CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script src="/static/js/mermaid.js"></script>
    
    {% block extra_scripts %}{% endblock %}
</body>
</html>
