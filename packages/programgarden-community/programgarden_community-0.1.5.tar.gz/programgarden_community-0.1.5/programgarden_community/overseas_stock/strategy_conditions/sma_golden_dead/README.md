# SMAGoldenDeadCross - SMA 골든/데드 크로스 전략

## 개요

`SMAGoldenDeadCross`는 해외 주식에서 단순 이동 평균(Simple Moving Average, SMA)의 골든 크로스와 데드 크로스를 감지하는 조건 기반 전략입니다.
단순히 크로스만 확인하는 것이 아니라, 데드크로스가 발생한 시점부터 골든크로스가 발생할 때까지의 기간 동안 데드크로스의 평균 가격이 골든크로스의 평균 가격보다 낮아야 합니다. 이 전략은 단기 SMA와 장기 SMA의 교차점을 분석하여 매수 신호를 제공합니다.
그리고 본 전략은 자동화매매 소프트웨어 강의([보러가기](https://youtu.be/K9x3HDSdrjo?si=kAxeygL33bmLJ0V4))에서도 사용되었을 정도로 추세 파악에 괜찮은 전략으로 사료됩니다.

## 개발 배경

이동 평균 크로스는 추세 변화를 직관적으로 파악할 수 있는 강력한 도구입니다. 해외 주식 시장의 변동성이 높아 타이밍이 중요한 상황에서, `SMAGoldenDeadCross`는 자동화된 신호 생성을 통해 투자 효율성을 높이고, 감정적 오류를 줄이는 것을 목표로 개발되었습니다. 이를 통해 투자자는 데이터 기반의 전략적 의사결정을 할 수 있습니다.

## 전략의 목적

해외 주식 투자는 시장의 변동성과 복잡성으로 인해 타이밍이 중요합니다. 인간의 감정적 판단은 종종 잘못된 결정을 유발할 수 있습니다. `SMAGoldenDeadCross`는 기술적 분석의 기본 지표인 이동 평균 크로스를 활용하여 다음과 같은 목적을 달성합니다:

- **추세 감지**: 골든 크로스를 통해 상승 추세의 시작을, 데드 크로스를 통해 하락 추세의 시작을 자동으로 감지합니다.
- **타이밍 최적화**: 데이터 기반의 신호를 통해 매수 타이밍을 체계적으로 결정합니다.
- **감정 배제**: 자동화된 시스템으로 인간의 주관적 판단을 최소화하고, 일관된 투자 전략을 유지합니다.

## 골든크로스 시각화 예시

골든크로스를 더 쉽게 이해하기 위해, 간단한 샘플 데이터를 사용하여 단기 SMA(20일)와 장기 SMA(50일)의 교차를 텍스트로 표현해보겠습니다. 실제로는 Matplotlib 등의 라이브러리를 사용하여 그래프를 그릴 수 있습니다.

### 샘플 데이터 (가격: 100일간의 가상 데이터)


일자 | 가격 | 20일 SMA | 50일 SMA | 상태
-----|------|----------|----------|------
1    | 100  | -        | -        | -
...  | ...  | ...      | ...      | ...
20   | 95   | 97.5     | -        | -
...  | ...  | ...      | ...      | ...
50   | 90   | 93.2     | 95.0     | 데드크로스 (단기 < 장기)
...  | ...  | ...      | ...      | ...
60   | 105  | 98.5     | 96.8     | 골든크로스 (단기 > 장기)


### 설명
- **데드크로스**: 단기 SMA가 장기 SMA 아래로 교차하는 시점 (하락 추세 시작).
- **골든크로스**: 단기 SMA가 장기 SMA 위로 교차하는 시점 (상승 추세 시작).
- 위 예시에서 50일째에 데드크로스가 발생하고, 60일째에 골든크로스가 발생합니다.
- 전략은 데드크로스 후 골든크로스가 발생하고, 골든 가격이 데드 가격보다 높은 경우를 감지합니다.


## 주요 기능

### 파라미터
- `start_date` (Optional[str]): 분석 시작 날짜 (예: "20230101").
- `end_date` (Optional[str]): 분석 종료 날짜 (예: "20231231").
- `long_period` (int): 장기 SMA 기간 (예: 50일).
- `short_period` (int): 단기 SMA 기간 (예: 20일).
- `time_category` (Literal["months", "weeks", "days"], 기본값: "days"): 시간 단위.
- `days_prices` (Optional[list[ChartDay]]): 직접 제공할 가격 데이터 (LS API 미사용 시).
- `use_ls` (bool, 기본값: True): LS증권 API를 사용할지 여부.
- `alignment` (Literal["golden", "dead"], 기본값: "golden"): 감지할 정렬 방식.
- `appkey` (Optional[str]): LS증권 API 앱키.
- `appsecretkey` (Optional[str]): LS증권 API 앱시크릿키.

### 동작 방식
1. LS증권 API를 통해 지정된 기간의 차트 데이터를 조회합니다 (g3204 API 사용).
2. 데이터를 정렬하고, SMA를 계산합니다.
3. 각 데이터 포인트에서 골든 크로스(단기 > 장기) 또는 데드 크로스(단기 < 장기)를 감지합니다.
4. 특정 조건을 만족하는 신호를 필터링:
   - 데드 크로스 후 골든 크로스가 발생.
   - 골든 가격 > 데드 가격.
   - 골든 크로스가 최근 2 데이터 포인트 내에 발생.
   - 최신 정렬이 골든 상태 유지.
5. 감지된 신호 목록을 반환합니다.


## 주의사항

- 이 전략은 과거 데이터 분석에 기반하며, 미래 성과를 보장하지 않습니다.
- SMA 기간은 시장 상황과 종목 특성에 따라 조정해야 합니다.
- API 키는 안전하게 관리해야 하며, 실제 투자 시 유효한 키를 사용하세요.