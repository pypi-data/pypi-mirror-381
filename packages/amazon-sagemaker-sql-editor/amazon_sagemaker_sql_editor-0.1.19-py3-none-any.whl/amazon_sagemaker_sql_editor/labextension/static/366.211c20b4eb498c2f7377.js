(self.webpackChunk_amzn_amazon_sagemaker_sql_editor=self.webpackChunk_amzn_amazon_sagemaker_sql_editor||[]).push([[366],{9366:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>mo});var a,o=n(3735),l=n(2388),r=n(6718),i=n(6648);class s{}s.EXTENSION_ID="@amzn/amazon_sagemaker_sql_editor",s.SQL_FORMAT_COMMAND_ID=`${s.EXTENSION_ID}:format-sql`,s.SQL_FORMAT_CONTEXT_MENU_SELECTOR=".jp-CodeCell",s.SQL_FORMAT_CONTEXT_MENU_LABEL="Format SQL",s.SQL_FORMAT_SHORTCUT="Alt F",s.LOAD_SQL_MAGIC_COMMAND="%load_ext amazon_sagemaker_sql_magic",s.SQL_MAGIC_COMMAND="%%sm_sql",s.SQL_SYNTAX_HIGHLIGHT_MODE_ID=`${s.EXTENSION_ID}:ipython-sql`,s.SQL_SYNTAX_HIGHLIGHT_MIME="text/x-ipython-sql",s.SQL_CONNECTION_METASTORE_ID_ARG_KEY="--metastore-id",s.SQL_CONNECTION_METASTORE_TYPE_ARG_KEY="--metastore-type",s.SQL_CONNECTION_PROPERTIES_TYPE_ARG_KEY="--connection-properties",s.SQL_CONNECTION_OUTPUT_ARG_KEY="--output",s.SQL_CONNECTION_APPLY_DEFAULT_ROW_LIMIT="--apply-default-row-limit",s.getDataframeOutputMode=e=>`'{"format": "${m.Dataframe}", "dataframe_name": "${e}"}'`,s.JUPYTERLAB_LSP_EXTENSION_ID="@jupyter-lsp/jupyterlab-lsp",s.JUPYTERLAB_COMPLETER_EXTENSION_ID="@jupyterlab/completer-extension",s.DORA_SIDE_PANEL_PLUGIN_ID=`${s.EXTENSION_ID}:dora-side-panel`,s.DORA_SQL_EDITING_PLUGIN_ID=`${s.EXTENSION_ID}:plugin`,s.DORA_CONNECTION_DROPDOWN_PLUGIN_ID=`${s.EXTENSION_ID}:connection-dropdown`,s.DATA_CONNECTION_PLUGIN_ID=`${s.EXTENSION_ID}:data-connection-plugin`;class c{}c.API_METHOD_POST="POST";class d{}d.LSP_SCHEMA_FILE_DIR="/opt/amazon/sagemaker/user-data/autocomplete-schema",d.LSP_CENTRAL_SCHEMA_FILE_NAME="sql-language-server-schema.json",d.LSP_CONFIG_CONNECTION_IDENTIFIER=`${s.EXTENSION_ID} language server schema`,d.LSP_SQL_EXTRACTOR_PATTERN_SUFFIX="(?:.)*",d.LSP_SQL_EXTRACTOR_PATTERN_PREFIX="(?:^|\\n)",d.LSP_SQL_EXTRACTOR_PATTERN=`${d.LSP_SQL_EXTRACTOR_PATTERN_PREFIX}${s.SQL_MAGIC_COMMAND}${d.LSP_SQL_EXTRACTOR_PATTERN_SUFFIX}\n([^]*)`,d.API_DATA_SOURCES_AUTOCOMPLETE_NAME="/api/data-sources-autocomplete",d.API_DATA_SOURCES_PARAM_CONNECTION="connection-name",d.API_POLL_INTERVAL=5e3,d.POLLING_STATUS_SUCCESS="success",d.POLLING_STATUS_ERROR="error",function(e){e.GlueConnection="GLUE_CONNECTION"}(a||(a={}));const u={DATAFRAME:"Pandas Dataframe",CELL_OUTPUT:"Cell Output"};var m,p;!function(e){e.Dataframe="DATAFRAME",e.CellOutput="CELL_OUTPUT"}(m||(m={})),function(e){e.WorkGroup="work_group",e.ConnectionType="connection_type"}(p||(p={}));const h={connectionName:"default-athena-connection",workGroup:"primary",connectionType:"ATHENA",connectionProperties:`--connection-properties '{"${p.ConnectionType}": "ATHENA", "${p.WorkGroup}": "primary"}'`};var C=n(1849),g=n(1261);const v="text/x-sql",f="text/x-python";class E{constructor(e){this.app=e}static highlightSQLCell(e){var t,n,a;S(null!==(n=null===(t=e.model)||void 0===t?void 0:t.sharedModel.source)&&void 0!==n?n:"")?e.model.mimeType!==v&&(e.model.mimeType=v,null===(a=e.editor)||void 0===a||a.setOption("lineNumbers",!0)):e.model.mimeType!==f&&(e.model.mimeType=f)}async updateCellsForSQLHighlighting(e){for(const t of e.widgets)await t.ready,t instanceof C.CodeCell&&t.model&&E.highlightSQLCell(t)}async setSyntaxHighlightingAction(){if(this.app.shell instanceof g.LabShell){await this.app.shell.restored;const e=this.app.shell;_(this.app).forEach((e=>{this.updateCellsForSQLHighlighting(e.content),e.content.modelContentChanged.connect(this.updateCellsForSQLHighlighting,this)})),e.activeChanged.connect(((e,t)=>{if(t.newValue&&t.newValue instanceof o.NotebookPanel){const e=t.newValue;this.updateCellsForSQLHighlighting(e.content),e.content.modelContentChanged.connect(this.updateCellsForSQLHighlighting,this)}}),this)}}}function _(e){return Array.from(e.shell.widgets("main")).filter((e=>e instanceof o.NotebookPanel))}function S(e){return!!(e=function(e){return e.trim()}(e)).match(new RegExp(`^\\s*${s.SQL_MAGIC_COMMAND}\\s+`))}function L(e,t){return null!==e&&"object"==typeof e&&t in e}const y=e=>"string"==typeof e&&e.length>0;class N{constructor(e){this.app=e}formatQuery(e){return(0,i.format)(e,{language:"sql",useTabs:!1})}extractRawSQLQuery(e){return e.replace(new RegExp(`\\s*${s.SQL_MAGIC_COMMAND}.*\\n+`),"").trim()}formatNotebookSQLCell(e,t){t&&S(t)&&(this.rawQuery=this.extractRawSQLQuery(t),this.formattedQuery=this.formatQuery(this.rawQuery),this.updateNotebookSQLCell(e,t,this.rawQuery,this.formattedQuery))}updateNotebookSQLCell(e,t,n,a){e.model.sharedModel.source=t.replace(n,a)}setFormattingAction(e){this.app.contextMenu.addItem({command:s.SQL_FORMAT_COMMAND_ID,selector:s.SQL_FORMAT_CONTEXT_MENU_SELECTOR}),this.app.commands.addKeyBinding({command:s.SQL_FORMAT_COMMAND_ID,keys:[s.SQL_FORMAT_SHORTCUT],selector:s.SQL_FORMAT_CONTEXT_MENU_SELECTOR}),this.app.commands.addCommand(s.SQL_FORMAT_COMMAND_ID,{execute:()=>{if(e.activeCell instanceof C.CodeCell){const t=e.activeCell,n=t.model.sharedModel.source;this.formatNotebookSQLCell(t,n)}},label:s.SQL_FORMAT_CONTEXT_MENU_LABEL})}}var w=n(6415);class b{constructor(e){this.lspExtractorsManager=e,this.fileExtension="sql",this.language="sql",this.hostLanguage="python"}registerSqlLspExtractor(){const e=new w.RegExpForeignCodeExtractor({language:this.language,pattern:d.LSP_SQL_EXTRACTOR_PATTERN,foreignCaptureGroups:[1],isStandalone:!0,fileExtension:this.fileExtension});this.lspExtractorsManager.register(e,this.hostLanguage)}}var x=n(8734),T=n(147),I=n(2725),k=n(6488),M=n(6029),D=n.n(M),A=n(3187),O=n(1921),P=n(4901);class R{constructor(e){var t;this.dataConnectionsChanged=new P.Signal(this),this.serverSettings=null!==(t=null==e?void 0:e.serverSettings)&&void 0!==t?t:O.ServerConnection.makeSettings()}static getInstance(e){return this.instance||(this.instance=new R(e)),this.instance}async getDataConnections(e){if(!this.dataConnectionsPromise){let t="";(null==e?void 0:e.source)&&(t=`?filterSource=${e.source}`),(null==e?void 0:e.type)&&(t+=(t?"&":"?")+`filterType=${e.type}`),(null==e?void 0:e.enableDefaultAthena)&&(t+=(t?"&":"?")+`enableDefaultAthena=${e.enableDefaultAthena}`);try{this.dataConnectionsPromise=V(this.serverSettings,`connections${t}`,{method:"GET"}).then((e=>e.data))}catch(e){return Promise.reject(e)}}return this.dataConnectionsPromise}refreshDataConnections(){this.dataConnectionsPromise=void 0,this.dataConnectionsChanged.emit()}async getDataSources(e){let t;try{t=(await V(this.serverSettings,"data-sources",{method:"POST",body:JSON.stringify(e)})).data}catch(e){return Promise.reject(e)}return t}async search(e){let t,n=`term=${encodeURIComponent(e.term)}&highlight=${e.highlight}`;(null==e?void 0:e.filter)&&(n+=e.filter.map((e=>`&filter=${e}`)).join("")),(null==e?void 0:e.pageSize)&&(n+=`&pageSize=${e.pageSize}`),(null==e?void 0:e.nextToken)&&(n+=`&nextToken=${e.nextToken}`),(null==e?void 0:e.enableDefaultAthena)&&(n+=`&enableDefaultAthena=${e.enableDefaultAthena}`);try{t=await V(this.serverSettings,`smsql/search?${n}`,{method:"GET"})}catch(e){return Promise.reject(e)}return t}async updateDataConnection(e){let t;try{t=await V(this.serverSettings,`connection/${e.name}`,{method:"PUT",body:JSON.stringify(e)}),console.log(t)}catch(e){return Promise.reject(e)}return t}async createDataConnection(e){let t;try{t=await V(this.serverSettings,"connections",{method:"POST",body:JSON.stringify(e)}),console.log(t)}catch(e){return Promise.reject(e)}return t}async getDataConnection(e){let t;try{t=await V(this.serverSettings,`connection/${e}`,{method:"GET"}),console.log(t)}catch(e){return Promise.reject(e)}return t}async deleteDataConnection(e){let t;try{t=await V(this.serverSettings,`connection/${e}`,{method:"DELETE"}),console.log(t)}catch(e){return Promise.reject(e)}return t}}async function V(e,t="",n={},a=!0){const o=A.URLExt.join(e.baseUrl,"api",t),l=await O.ServerConnection.makeRequest(o,n,e);let r=await l.text();if(a&&r.length>0)try{r=JSON.parse(r)}catch(e){console.error("Not a JSON response body.",l)}if(404===l.status)throw new O.ServerConnection.ResponseError(l,"404 Not Found - Jupyter Server extension is misconfigured");if(!l.ok)throw new O.ServerConnection.ResponseError(l,JSON.stringify(r.message||r));return{data:r,status:l.status}}const H=(0,M.createContext)(void 0);function Z({children:e}){const[t]=(0,M.useState)((()=>R.getInstance()));return D().createElement(H.Provider,{value:t},e)}function Q(){const e=(0,M.useContext)(H);if(void 0===e)throw new Error("useApiService must be used within a ApiServiceProvider");return e}const j={};function F(e){e.get(s.DORA_SIDE_PANEL_PLUGIN_ID,"enableDefaultAthena").then((e=>{L(e,"composite")&&(j.enableDefaultAthena=e.composite)})).catch((e=>{console.log(e)})),e.get(s.DORA_SIDE_PANEL_PLUGIN_ID,"workGroup").then((e=>{L(e,"composite")&&(j.workGroup=e.composite)})).catch((e=>{console.log(e)}))}function $(e){var t;try{return e.get(s.SQL_CONNECTION_PROPERTIES_TYPE_ARG_KEY)?JSON.parse(null===(t=e.get(s.SQL_CONNECTION_PROPERTIES_TYPE_ARG_KEY))||void 0===t?void 0:t.slice(1,-1)):{}}catch(e){return{}}}function B(e){return e[p.ConnectionType]===h.connectionType&&e[p.WorkGroup]===j.workGroup}function G(e,t,n){var o,l;if(e){const{connectionName:r,outputMode:i,dataframeName:c,applyDefaultLimit:d}=n,u=t.find((e=>e.name===r)),C=function(e,t){const n=q(e);let a=$(n);t.connectionName===h.connectionName?(n.delete(s.SQL_CONNECTION_METASTORE_TYPE_ARG_KEY),n.delete(s.SQL_CONNECTION_METASTORE_ID_ARG_KEY),a=function(e){return e[p.ConnectionType]=h.connectionType,e[p.WorkGroup]=j.workGroup,e}(a)):(n.set(s.SQL_CONNECTION_METASTORE_ID_ARG_KEY,t.connectionName),n.set(s.SQL_CONNECTION_METASTORE_TYPE_ARG_KEY,String(t.connectionType)),a=function(e){return B(e)&&(delete e[p.WorkGroup],delete e[p.ConnectionType]),e}(a)),a&&Object.keys(a).length>0?n.set(s.SQL_CONNECTION_PROPERTIES_TYPE_ARG_KEY,`'${JSON.stringify(a)}'`):n.delete(s.SQL_CONNECTION_PROPERTIES_TYPE_ARG_KEY),t.outputMode===m.Dataframe&&t.dataframeName?n.set(s.SQL_CONNECTION_OUTPUT_ARG_KEY,s.getDataframeOutputMode(t.dataframeName)):n.delete(s.SQL_CONNECTION_OUTPUT_ARG_KEY),!1===t.applyDefaultLimit?n.set(s.SQL_CONNECTION_APPLY_DEFAULT_ROW_LIMIT,String(t.applyDefaultLimit)):!0===t.applyDefaultLimit&&n.delete(s.SQL_CONNECTION_APPLY_DEFAULT_ROW_LIMIT);const o=Array.from(n.entries()).map((([e,t])=>`${e} ${t}`)).join(" "),l=`${s.SQL_MAGIC_COMMAND} ${o}`;return e.replace(W,l)}(e.model.sharedModel.source,{connectionName:null!==(o=null==u?void 0:u.name)&&void 0!==o?o:"",connectionType:a.GlueConnection,outputMode:i,dataframeName:c,applyDefaultLimit:d});null===(l=e.editor)||void 0===l||l.model.sharedModel.setSource(C)}}const z=/"[^"]+"|'[^']+'|\S+/gi,U="--";function q(e){var t,n;const a=new Map;return null!==(n=null===(t=e.split("\n",1)[0].match(z))||void 0===t?void 0:t.filter((e=>e.length>0)).reduce(((e,t,n,a)=>{if(t.startsWith(U)){const o=a[n+1],l=o&&!o.startsWith(U)?o:"";e.set(t,l)}return e}),a))&&void 0!==n?n:a}const W=/^.+/g,X=[{label:u[m.Dataframe],value:m.Dataframe},{label:u[m.CellOutput],value:m.CellOutput}];var Y=n(5297);const K=Y.css`
  color: var(--jp-content-font-color);
`,J=Y.css`
  overflow: hidden;
`,ee=Y.css`
  white-space: pre;
  overflow: hidden;
  text-overflow: ellipsis;
`;let te=0;const ne=["pysparkkernel","sparkkernel"],ae=["glue_pyspark","glue_spark"],oe=ne.concat(ae),le=e=>{var t;const{active:n,focused:o,codeCell:l,initialMagicParams:r,onConnectionChange:i,kernelName:c}=e,[d,u]=(0,M.useState)(!0),[p,h]=(0,M.useState)(""),[C,g]=(0,M.useState)(m.CellOutput),[v,f]=(0,M.useState)(null!==(t=`${m.Dataframe.toLowerCase()}_`+e.currentUniqueNumber)&&void 0!==t?t:0),E=p&&C===m.Dataframe,{connections:_,isLoading:S}=function(e){const t=Q(),[n,a]=(0,M.useState)(!1),[o,l]=(0,M.useState)([]),[r,i]=(0,M.useState)(),s=(0,M.useCallback)((async()=>{var e;try{a(!0);const n=await t.getDataConnections({enableDefaultAthena:j.enableDefaultAthena});l([...n.connections,...null!==(e=n.catalogs)&&void 0!==e?e:[]]),a(!1)}catch(e){i(e),a(!1)}}),[]);return(0,M.useEffect)((()=>(e.enabled&&(t.dataConnectionsChanged.connect(s),s()),()=>{t.dataConnectionsChanged.disconnect(s)})),[e.enabled]),{isLoading:n,connections:o,error:r}}({enabled:n}),L=(0,M.useMemo)((()=>function(e){return[{label:"Select Database Connection",value:""},{value:"-",disabled:!0},...e.map((e=>({label:e.name,value:e.name,metastore:`${s.SQL_CONNECTION_METASTORE_TYPE_ARG_KEY} ${a.GlueConnection}`})))]}(_)),[_]);return(0,M.useEffect)((()=>{if(n){const e=null==r?void 0:r.connectionName,t=null==r?void 0:r.outputMode,n=null==r?void 0:r.dataframeName,a=null==r?void 0:r.applyDefaultLimit;e&&_.some((t=>t.name===e))&&o&&(null==i||i(e)),void 0!==e&&e!==p?_.some((t=>t.name===e))?h(e):h(""):void 0===e&&h(""),void 0!==t&&X.some((e=>e.value===t))&&g(t),n&&f(n),void 0!==a&&u(a)}}),[r,_,n,o]),n?D().createElement(D().Fragment,null,n&&D().createElement("div",{className:"jp-cell-header-content"},D().createElement("span",null,"SQL"),S&&D().createElement(k.LinearProgress,null),D().createElement(I.HTMLSelect,{options:L,value:p,"data-testid":"connections-dropdown",onChange:e=>{return t=e.target.value,h(t),_.find((e=>e.name===t))&&(null==i||i(t)),void G(l,_,{connectionName:t,outputMode:C,dataframeName:v});var t},title:"Connection to execute SQL queries against"}),p&&D().createElement(I.HTMLSelect,{options:X,value:C,"data-testid":"output-mode-dropdown",onChange:e=>{return t=e.target.value,g(t),void G(l,_,{connectionName:p,outputMode:t,dataframeName:v});var t},title:"Return Mode"}),E&&D().createElement("input",{value:v,onChange:e=>{return t=e.target.value,f(t),void G(l,_,{connectionName:p,outputMode:C,dataframeName:t});var t},placeholder:"Enter Dataframe name...",className:K}),p&&D().createElement("label",{className:J,title:"This will apply a LIMIT of 1000 by default in your SQL queries"},D().createElement("span",{className:ee},"Apply default limit"),D().createElement("input",{type:"checkbox",checked:d,onChange:()=>(()=>{const e=!d;u(e),G(l,_,{connectionName:p,outputMode:C,dataframeName:v,applyDefaultLimit:e})})()})),(e=>!!e&&oe.includes(e))(c)&&D().createElement("span",{className:"jp-cell-header-local-execution-tooltip",title:(e=>{if(e){if(ne.includes(e))return"SQL Cells are executed locally in JupyterLab space and not on the remote EMR cluster";if(ae.includes(e))return"SQL Cells are not functional with Glue Kernels"}})(c),"data-testid":"local-execution-label"},"Local",D().createElement(I.infoIcon.react,{className:"jp-cell-header-info-icon"})))):D().createElement(D().Fragment,null)};class re extends T.ReactWidget{constructor(){super(),this.props={active:!1,codeCell:void 0,currentUniqueNumber:++te},this.addClass("jp-connection-dropdown-widget")}updateProps(e){var t,n,a,o,l,r,i,s,c,d;n=e,((t=this.props).active!==n.active||t.focused!==n.focused||t.codeCell!==n.codeCell||(null===(a=t.initialMagicParams)||void 0===a?void 0:a.connectionName)!==(null===(o=n.initialMagicParams)||void 0===o?void 0:o.connectionName)||(null===(l=t.initialMagicParams)||void 0===l?void 0:l.dataframeName)!==(null===(r=n.initialMagicParams)||void 0===r?void 0:r.dataframeName)||(null===(i=t.initialMagicParams)||void 0===i?void 0:i.outputMode)!==(null===(s=n.initialMagicParams)||void 0===s?void 0:s.outputMode)||(null===(c=t.initialMagicParams)||void 0===c?void 0:c.applyDefaultLimit)!==(null===(d=n.initialMagicParams)||void 0===d?void 0:d.applyDefaultLimit)||t.kernelName!==n.kernelName)&&(this.props={...this.props,...e},e.active?this.addClass("jp-connection-dropdown-widget-active"):this.removeClass("jp-connection-dropdown-widget-active"),this.update())}render(){return D().createElement(Z,null,D().createElement(le,{...this.props}))}}class ie extends o.NotebookPanel.ContentFactory{constructor(e){super(e),this.options=e,this.numberOfSQLCells=0,this.initialize()}async initialize(){const e=this.options.app;if(e.shell instanceof g.LabShell){await e.shell.restored;const t=_(e);this.activeNotebook=e.shell.activeWidget instanceof o.NotebookPanel?e.shell.activeWidget.content:void 0,t.forEach((e=>{this.updateKernelName(e.context.sessionContext),e.context.sessionContext.kernelChanged.connect(this.updateKernelName,this),e.content.activeCellChanged.connect(this.handleActiveCellChange,this),this.updateShouldDisplay(e.content),e.content.modelContentChanged.connect(this.updateShouldDisplay,this)})),e.shell.activeChanged.connect(((e,t)=>{const n=t.newValue;n&&n instanceof o.NotebookPanel&&(this.activeNotebook=n.content,this.updateKernelName(n.context.sessionContext),n.context.sessionContext.kernelChanged.connect(this.updateKernelName,this),n.content.activeCellChanged.connect(this.handleActiveCellChange,this),this.updateShouldDisplay(n.content),n.content.modelContentChanged.connect(this.updateShouldDisplay,this))}),this)}}async updateKernelName(e){var t,n;const a=_(this.options.app);for(const o of a)if(o.context.sessionContext.name===e.name&&this.activeNotebook===o.content){for(const a of o.content.widgets)await a.ready,a instanceof C.CodeCell&&a.model&&this.updateKernelNameInCell(a,null===(n=null===(t=e.session)||void 0===t?void 0:t.kernel)||void 0===n?void 0:n.name);break}}handleActiveCellChange(e,t){t instanceof C.CodeCell&&this.activeNotebook===e&&(this.activeCell=t,this.updateShouldDisplay(e))}updateKernelNameInCell(e,t){const n=this.getConnectionHeaderWidget(e);this.hasSQLMagicCommand(e)&&(null==n||n.updateProps({active:!0,codeCell:e,kernelName:t}))}async updateShouldDisplay(e){let t=0;for(const n of e.widgets)await n.ready,n instanceof C.CodeCell&&n.model&&(this.hasSQLMagicCommand(n)&&t++,this.updateShouldDisplayForCell(e,n));var n;this.numberOfSQLCells!==t&&(this.numberOfSQLCells=t,n={eventDetail:"NotebookSQLEditor-SQLCell-Count",eventValue:String(t)},window&&window.panorama&&window.panorama("trackCustomEvent",{eventType:"eventDetail",eventDetail:n.eventDetail,eventContext:"NotebookSQLEditor",eventValue:n.eventValue,timestamp:Date.now()}))}async updateShouldDisplayForCell(e,t){var n,a,o,l,r;const i=t.model.sharedModel.source,c=i.startsWith(s.SQL_MAGIC_COMMAND),d=this.getConnectionHeaderWidget(t),u=this.activeNotebook===e&&this.activeCell===t,m={};if(c){const e=q(i),t=$(e),l=e.get(s.SQL_CONNECTION_METASTORE_ID_ARG_KEY);B(t)?m.connectionName=h.connectionName:m.connectionName=l,m.applyDefaultLimit="false"!==(null===(n=e.get(s.SQL_CONNECTION_APPLY_DEFAULT_ROW_LIMIT))||void 0===n?void 0:n.toLowerCase());const r=null===(a=e.get(s.SQL_CONNECTION_OUTPUT_ARG_KEY))||void 0===a?void 0:a.trim().replace(/'/g,"");if(r)try{const e=JSON.parse(r);m.outputMode=null===(o=e.format)||void 0===o?void 0:o.toUpperCase(),m.dataframeName=e.dataframe_name}catch(e){}}null==d||d.updateProps({active:c,focused:u,codeCell:t,initialMagicParams:m,kernelName:null===(r=null===(l=e.model)||void 0===l?void 0:l.metadata.kernelspec)||void 0===r?void 0:r.name,onConnectionChange:n=>this.handleConnectionChange(e,t,n)})}hasSQLMagicCommand(e){return e.model.sharedModel.source.startsWith(s.SQL_MAGIC_COMMAND)}handleConnectionChange(e,t,n){e===this.activeNotebook&&t===this.activeCell&&n&&this.connectionName!==n&&(this.connectionName=n,this.options.autocompleteConnectionService.initiatePollingForConnection(n,{onComplete(e,t){console.log(`==>> Polling ended for ${e} with status ${t}`)}}))}getConnectionHeaderWidget(e){return Array.from(e.children()).find((e=>e instanceof re))}createCellHeader(){return new re}}class se{constructor(e){this.requestClient=e,this.requestUrl=A.URLExt.join(this.requestClient.baseUrl,d.API_DATA_SOURCES_AUTOCOMPLETE_NAME)}static getInstance(e){return se.instance||(se.instance=new se(e)),se.instance}initiatePollingForConnection(e,t){this.clearPollingSchedule(),this.switchConnection(e),this.pollForConnection(t),this.pollingTimerId=setInterval((()=>{this.pollForConnection(t)}),d.API_POLL_INTERVAL)}switchConnection(e){this.connectionName=e}clearPollingSchedule(){this.pollingTimerId&&clearInterval(this.pollingTimerId),this.pollingTimerId=void 0}async pollForConnection(e){var t,n;const a={connectionName:this.connectionName},o=await O.ServerConnection.makeRequest(this.requestUrl,{method:c.API_METHOD_POST,body:JSON.stringify(a)},this.requestClient);if(console.log(`Received polling response for ${this.connectionName} with status ${o.status}`),200===o.status)this.clearPollingSchedule(),null===(t=null==e?void 0:e.onComplete)||void 0===t||t.call(e,this.connectionName,d.POLLING_STATUS_SUCCESS);else if(202===o.status);else{if(!(o.status>=400&&o.status<=599))throw this.clearPollingSchedule(),new Error(`Unknown server response status ${o.status}`);this.clearPollingSchedule(),null===(n=null==e?void 0:e.onComplete)||void 0===n||n.call(e,this.connectionName,d.POLLING_STATUS_ERROR)}}}const ce={id:s.DORA_CONNECTION_DROPDOWN_PLUGIN_ID,provides:o.NotebookPanel.IContentFactory,requires:[x.IEditorServices],autoStart:!0,activate:(e,t)=>{const n=t.factoryService.newInlineEditor,a=e.serviceManager.serverSettings,o=se.getInstance(a);return new ie({editorFactory:n,app:e,editorServices:t,autocompleteConnectionService:o})}},de=new I.LabIcon({name:`${s.EXTENSION_ID}:ml-brain-icon`,svgstr:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path id="SageMaker Brand/MLBrain" fill-rule="evenodd" clip-rule="evenodd" d="M17.1665 6.13103L19.4181 7.21937C19.6383 7.32543 19.7777 7.54512 19.7777 7.78375V12.834C19.7777 13.0739 19.6383 13.2936 19.4155 13.3997L17.1456 14.4893V16.6218C17.1456 16.8478 17.0219 17.0574 16.8186 17.1697L12.2789 19.6949C12.1786 19.7504 12.0665 19.7782 11.9545 19.7782C11.8294 19.7782 11.7069 19.7441 11.5987 19.6759L9.96737 18.6432L8.41158 19.6684C8.30082 19.7416 8.17443 19.7782 8.04543 19.7782C7.93337 19.7782 7.82131 19.7504 7.72098 19.6949L3.1813 17.1697C2.97803 17.0574 2.85425 16.8478 2.85425 16.6218V14.4893L0.585707 13.3997C0.362893 13.2936 0.222168 13.0739 0.222168 12.834V7.78375C0.222168 7.54891 0.357681 7.33174 0.57398 7.22316L2.73176 6.13735V2.73344C2.73176 2.47967 2.88812 2.25114 3.12918 2.15266L7.70404 0.272683C7.84868 0.213343 8.00895 0.20703 8.15619 0.252482L9.95564 0.808015L11.6613 0.25627C11.8111 0.208292 11.9727 0.212081 12.1186 0.271421L16.7652 2.1514C17.0088 2.24861 17.1665 2.4784 17.1665 2.73344V6.13103ZM16.2713 9.81523L18.4747 11.5222V8.17388L16.2231 7.08554C16.0042 6.97948 15.8635 6.76106 15.8635 6.52117V5.33814H13.2575V4.07556H15.8635V3.15388L11.8424 1.52768L10.6111 1.92666V6.21563L13.6614 8.55139L12.8548 9.54125L9.55562 7.0161C9.39926 6.89615 9.30805 6.71434 9.30805 6.52117V1.93297L7.99071 1.52642L6.74242 2.03903V5.21314H5.43941V2.57436L4.03477 3.15136V6.12472L6.0388 7.05903L7.6845 5.99594L8.40637 7.0464L6.74242 8.12211V10.3089C6.74242 10.5197 6.63297 10.7167 6.45185 10.8341L4.49734 12.0967L3.77547 11.0462L5.43941 9.97053V8.18146L3.39499 7.22695L1.52518 8.16757V12.4426L3.79372 13.531C4.01653 13.637 4.15725 13.8567 4.15725 14.0966V16.2569L5.45375 16.9778L7.58547 14.9135L8.5067 15.8062L6.62385 17.628L8.01677 18.4033L9.30805 17.5498V10.3089H10.6111V12.8542H13.2575V14.1168H10.6111V17.5435L11.9766 18.4071L15.8426 16.2569V14.0966C15.8426 13.8567 15.9834 13.637 16.2062 13.531L17.9196 12.7078L15.4569 10.8026L16.2713 9.81523Z" fill="url(#paint0_linear_1930_76058)"/>\n<defs>\n<linearGradient id="paint0_linear_1930_76058" x1="9.99995" y1="0.222656" x2="9.99995" y2="19.7782" gradientUnits="userSpaceOnUse">\n<stop stop-color="#ED38E0"/>\n<stop offset="1" stop-color="#7E32E3"/>\n</linearGradient>\n</defs>\n</svg>\n'}),ue=(new I.LabIcon({name:`${s.EXTENSION_ID}:sagemaker-logo-icon`,svgstr:'<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"\n  xmlns="http://www.w3.org/2000/svg">\n  <g id="Logo" clip-path="url(#clip0_1930_70663)">\n    <path id="SageMaker Brand/MLBrain" fill-rule="evenodd" clip-rule="evenodd"\n      d="M13.8635 4.83413L15.7058 5.72459C15.8859 5.81136 16 5.99111 16 6.18635V10.3184C16 10.5147 15.8859 10.6944 15.7036 10.7812L13.8465 11.6727V13.4175C13.8465 13.6024 13.7452 13.7738 13.5789 13.8658L9.86461 15.9318C9.78252 15.9773 9.69083 16 9.59915 16C9.4968 16 9.39659 15.9721 9.3081 15.9163L7.97335 15.0713L6.70043 15.9101C6.60981 15.97 6.5064 16 6.40085 16C6.30917 16 6.21748 15.9773 6.13539 15.9318L2.42111 13.8658C2.2548 13.7738 2.15352 13.6024 2.15352 13.4175V11.6727L0.297441 10.7812C0.115139 10.6944 0 10.5147 0 10.3184V6.18635C0 5.9942 0.110874 5.81653 0.287847 5.72769L2.0533 4.83929V2.05428C2.0533 1.84664 2.18124 1.65967 2.37846 1.57909L6.12154 0.0409312C6.23987 -0.00762026 6.371 -0.0127851 6.49147 0.0244032L7.96375 0.47893L9.35927 0.0275019C9.48188 -0.0117525 9.61407 -0.0086528 9.73348 0.0398987L13.5352 1.57806C13.7345 1.6576 13.8635 1.84561 13.8635 2.05428V4.83413ZM13.1311 7.84847L14.9339 9.24511V6.50555L13.0917 5.61509C12.9126 5.52831 12.7974 5.3496 12.7974 5.15333V4.18539H10.6652V3.15238H12.7974V2.39828L9.50746 1.06775L8.5 1.39418V4.90334L10.9957 6.81442L10.3358 7.6243L7.63646 5.55827C7.50853 5.46014 7.4339 5.31138 7.4339 5.15333V1.39935L6.35608 1.06672L5.33475 1.48612V4.08312H4.26866V1.92412L3.1194 2.39621V4.82896L4.75906 5.59339L6.10554 4.72359L6.69616 5.58306L5.33475 6.46319V8.25238C5.33475 8.42489 5.2452 8.58604 5.09701 8.68211L3.49787 9.71513L2.90725 8.85566L4.26866 7.97553V6.51174L2.59595 5.73078L1.0661 6.50038V9.99818L2.92217 10.8886C3.10448 10.9754 3.21962 11.1552 3.21962 11.3514V13.1189L4.28038 13.7088L6.02452 12.0198L6.77825 12.7501L5.23774 14.2408L6.3774 14.875L7.4339 14.1767V8.25238H8.5V10.3349H10.6652V11.368H8.5V14.1716L9.61727 14.8781L12.7804 13.1189V11.3514C12.7804 11.1552 12.8955 10.9754 13.0778 10.8886L14.4797 10.2151L12.4648 8.65629L13.1311 7.84847Z" />\n  </g>\n</svg>'}),new I.LabIcon({name:`${s.EXTENSION_ID}:data-icon`,svgstr:'<svg width="32" height="32" viewBox="0 0 32 32" fill="currentColor"\n  xmlns="http://www.w3.org/2000/svg">\n  <g id="Icon">\n    <g id="Shape">\n      <path\n        d="M16 14C20.9706 14 25 12.2091 25 10C25 7.79086 20.9706 6 16 6C11.0294 6 7 7.79086 7 10C7 12.2091 11.0294 14 16 14Z" />\n      <path\n        d="M7 12.5V16C7 18.2091 11.0294 20 16 20C20.9706 20 25 18.2091 25 16V12.5C25 14.7091 20.9706 16.5 16 16.5C11.0294 16.5 7 14.7091 7 12.5Z" />\n      <path\n        d="M7 18.5V22C7 24.2091 11.0294 26 16 26C20.9706 26 25 24.2091 25 22V18.5C25 20.7091 20.9706 22.5 16 22.5C11.0294 22.5 7 20.7091 7 18.5Z" />\n    </g>\n  </g>\n</svg>'})),me=new I.LabIcon({name:`${s.EXTENSION_ID}:back-arrow-icon`,svgstr:'<svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor"\n  xmlns="http://www.w3.org/2000/svg">\n  <g id="&#60;">\n    <path id="Shape" fill-rule="evenodd" clip-rule="evenodd"\n      d="M11.6213 4.79289C12.0118 5.18342 12.0118 5.81658 11.6213 6.20711L8.82843 9L11.6213 11.7929C12.0118 12.1834 12.0118 12.8166 11.6213 13.2071C11.2308 13.5976 10.5976 13.5976 10.2071 13.2071L6 9L10.2071 4.79289C10.5976 4.40237 11.2308 4.40237 11.6213 4.79289Z"\n    />\n  </g>\n</svg>'}),pe=new I.LabIcon({name:`${s.EXTENSION_ID}:refresh-icon`,svgstr:'<svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor"\n  xmlns="http://www.w3.org/2000/svg">\n  <g id="Icon">\n    <g id="Shape">\n      <path\n        d="M14.5506 11C15.129 11 15.5431 11.5595 15.2883 12.0788C14.1491 14.4012 11.7613 16 9 16C5.13401 16 2 12.866 2 9C2 5.13401 5.13401 2 9 2C12.171 2 14.8496 4.10851 15.7101 7H13.9668C13.1745 5.03437 11.2493 3.64706 8.99999 3.64706C6.04364 3.64706 3.64705 6.04365 3.64705 9C3.64705 11.9563 6.04364 14.3529 8.99999 14.3529C11.0418 14.3529 12.8167 13.2097 13.7193 11.5285C13.8862 11.2177 14.1978 11 14.5506 11Z" />\n      <path d="M16.5 1.5V7.5H10.5L16.5 1.5Z" />\n    </g>\n  </g>\n</svg>'}),he=new I.LabIcon({name:`${s.EXTENSION_ID}:snowflake-icon`,svgstr:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g id="Data Icons">\n<path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M17.2454 8.88443L15.3083 10.003L17.2454 11.1216C17.7365 11.3944 17.9002 12.0219 17.6273 12.513C17.3545 13.0041 16.727 13.1678 16.2359 12.895L12.771 10.9033C12.5528 10.7669 12.3891 10.5487 12.3072 10.3304C12.28 10.2213 12.2527 10.1122 12.2527 10.003C12.2527 9.92117 12.28 9.83932 12.28 9.75748C12.3618 9.51193 12.5255 9.29367 12.7438 9.15726L16.2086 7.16563C16.6997 6.8928 17.3272 7.0565 17.6001 7.54759C17.9275 7.98411 17.7365 8.61161 17.2454 8.88443ZM15.4175 14.2864L11.9526 12.2948C11.7616 12.1856 11.5433 12.1583 11.3523 12.1856C10.834 12.2129 10.3975 12.6767 10.3975 13.1951V17.1783C10.3975 17.7513 10.8613 18.1878 11.4069 18.1878C11.9798 18.1878 12.4436 17.724 12.4436 17.1783V14.9412L14.3807 16.0598C14.8718 16.3326 15.4993 16.1689 15.7721 15.6778C16.0722 15.214 15.9085 14.5865 15.4175 14.2864ZM11.4069 10.385L9.96093 11.831C9.93365 11.8582 9.8518 11.9128 9.79723 11.9128H9.6881H9.46984H9.36071C9.30614 11.9128 9.2243 11.8855 9.16973 11.831L7.72375 10.385C7.69647 10.3577 7.66919 10.2758 7.66919 10.2213V10.1122V9.89389V9.78476C7.66919 9.73019 7.69647 9.64835 7.75104 9.59378L9.19701 8.1478C9.25158 8.09324 9.33343 8.06596 9.38799 8.06596H9.49712H9.71538H9.82452C9.87908 8.06596 9.96093 8.09324 10.0155 8.1478L11.4615 9.59378C11.516 9.64835 11.5433 9.70291 11.5433 9.78476V9.89389V10.1122V10.2213C11.4888 10.2758 11.4615 10.3577 11.4069 10.385ZM10.261 10.003C10.261 9.94846 10.2338 9.86661 10.1792 9.81204L9.76995 9.4028C9.71538 9.34824 9.66082 9.32096 9.57897 9.32096C9.52441 9.32096 9.44256 9.34824 9.38799 9.4028L8.97875 9.81204C8.92419 9.86661 8.89691 9.94846 8.89691 10.003C8.89691 10.0576 8.92419 10.1394 8.97875 10.194L9.38799 10.6032C9.44256 10.6578 9.49712 10.6851 9.57897 10.6851C9.63354 10.6851 9.71538 10.6578 9.76995 10.6032L10.1792 10.194C10.2338 10.1394 10.261 10.0576 10.261 10.003ZM3.74049 5.69237L7.20538 7.684C7.39636 7.79313 7.58734 7.82041 7.8056 7.82041C8.32397 7.79313 8.76049 7.32932 8.76049 6.81096V2.82769C8.76049 2.25476 8.29669 1.81824 7.75104 1.81824C7.1781 1.81824 6.7143 2.28204 6.7143 2.82769V5.06487L4.77723 3.94628C4.28614 3.67345 3.65864 3.83715 3.38582 4.32824C3.08571 4.79204 3.2494 5.41954 3.74049 5.69237ZM11.3523 7.82041C11.5433 7.84769 11.7616 7.79313 11.9526 7.684L15.4175 5.69237C15.9085 5.41954 16.0722 4.79204 15.7994 4.30096C15.5266 3.80987 14.8991 3.64617 14.408 3.919L12.4709 5.03759V2.82769C12.4709 2.25476 12.0071 1.81824 11.4342 1.81824C10.8613 1.81824 10.3975 2.25476 10.3975 2.82769V6.81096C10.3975 7.35661 10.834 7.79313 11.3523 7.82041ZM7.8056 12.1856C7.61462 12.1583 7.39636 12.2129 7.20538 12.322L3.74049 14.3137C3.2494 14.5865 3.08571 15.214 3.35853 15.7051C3.63136 16.1962 4.25886 16.3599 4.74995 16.087L6.68701 14.9685V17.2056C6.68701 17.7786 7.15082 18.2151 7.72375 18.2151C8.29669 18.2151 8.73321 17.7513 8.73321 17.2056V13.1951C8.73321 12.6494 8.32397 12.2129 7.8056 12.1856ZM6.85071 10.3031C6.87799 10.194 6.90527 10.0849 6.90527 9.97574C6.90527 9.89389 6.87799 9.81204 6.87799 9.73019C6.79614 9.48465 6.65973 9.26639 6.41419 9.12998L2.92201 7.13835C2.43093 6.86552 1.80343 7.02922 1.5306 7.5203C1.25777 8.01139 1.42147 8.63889 1.91256 8.91172L3.84962 10.0303L1.91256 11.1489C1.42147 11.4217 1.25777 12.0492 1.5306 12.5403C1.80343 13.0314 2.43093 13.1951 2.92201 12.9223L6.3869 10.9306C6.63245 10.7397 6.79614 10.5487 6.85071 10.3031Z" fill="#2BB5E9"/>\n</g>\n</svg>\n'}),Ce=new I.LabIcon({name:`${s.EXTENSION_ID}:redshift-icon`,svgstr:'<svg width="30" height="42" viewBox="0 0 30 42" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M23.1188 17.3779C22.3239 17.3779 21.6781 16.7333 21.6781 15.9407C21.6781 15.1481 22.3239 14.5027 23.1188 14.5027C23.9129 14.5027 24.5587 15.1481 24.5587 15.9407C24.5587 16.7333 23.9129 17.3779 23.1188 17.3779ZM19.4696 26.1184C18.6754 26.1184 18.0297 25.4738 18.0297 24.6812C18.0297 23.8886 18.6754 23.244 19.4696 23.244C20.2637 23.244 20.9102 23.8886 20.9102 24.6812C20.9102 25.4738 20.2637 26.1184 19.4696 26.1184ZM10.7117 24.6618C9.91837 24.6618 9.27258 24.0172 9.27258 23.2246C9.27258 22.432 9.91837 21.7866 10.7117 21.7866C11.5066 21.7866 12.1524 22.432 12.1524 23.2246C12.1524 24.0172 11.5066 24.6618 10.7117 24.6618ZM7.06327 32.674C6.2699 32.674 5.62336 32.0294 5.62336 31.2368C5.62336 30.4442 6.2699 29.7996 7.06327 29.7996C7.85814 29.7996 8.50393 30.4442 8.50393 31.2368C8.50393 32.0294 7.85814 32.674 7.06327 32.674ZM23.1188 13.0072C21.4983 13.0072 20.1798 14.3233 20.1798 15.9407C20.1798 16.9322 20.678 17.8063 21.4354 18.338L20.0644 21.8091C19.8719 21.7694 19.6726 21.7485 19.4696 21.7485C18.181 21.7485 17.0954 22.586 16.7006 23.7413L13.6328 23.0451C13.5376 21.513 12.2715 20.2911 10.7117 20.2911C9.09203 20.2911 7.77424 21.6072 7.77424 23.2246C7.77424 23.9806 8.06941 24.664 8.54214 25.1844L7.20337 28.3183C7.15542 28.3153 7.11122 28.3041 7.06327 28.3041C5.44356 28.3041 4.12502 29.6194 4.12502 31.2368C4.12502 32.8534 5.44356 34.1695 7.06327 34.1695C8.68373 34.1695 10.0023 32.8534 10.0023 31.2368C10.0023 30.1989 9.45688 29.2911 8.63953 28.7692L9.82097 26.0047C10.1042 26.0952 10.3993 26.1573 10.7117 26.1573C11.8677 26.1573 12.8604 25.4821 13.3391 24.5122L16.589 25.2495C16.8549 26.5955 18.0446 27.6139 19.4696 27.6139C21.09 27.6139 22.4086 26.2986 22.4086 24.6812C22.4086 23.8071 22.0152 23.0302 21.4054 22.4918L22.8461 18.8457C22.9375 18.8547 23.0251 18.8734 23.1188 18.8734C24.7385 18.8734 26.057 17.5573 26.057 15.9407C26.057 14.3233 24.7385 13.0072 23.1188 13.0072ZM15 40.5045C7.70157 40.5045 2.24834 38.3136 2.24834 36.3544V8.36366C4.7311 10.3811 9.98654 11.4474 15.0157 11.4474C20.0224 11.4474 25.2554 10.3901 27.7517 8.38983V36.3544C27.7517 38.3136 22.2977 40.5045 15 40.5045ZM15.0157 1.49551C22.5209 1.49551 27.7517 3.72383 27.7517 5.72408C27.7517 7.72358 22.5209 9.95189 15.0157 9.95189C7.50978 9.95189 2.27981 7.72358 2.27981 5.72408C2.27981 3.72383 7.50978 1.49551 15.0157 1.49551ZM29.25 5.72408C29.25 2.00623 21.9164 0 15.0157 0C8.11511 0 0.781465 2.00623 0.781465 5.72408C0.781465 5.73006 0.782964 5.73679 0.782964 5.74277H0.75V36.3544C0.75 40.0214 8.09189 42 15 42C21.9081 42 29.25 40.0214 29.25 36.3544V5.74277H29.2485C29.2485 5.73679 29.25 5.73006 29.25 5.72408Z"\n    fill="#DD7A01"></path>\n</svg>'}),ge=new I.LabIcon({name:`${s.EXTENSION_ID}:athena-icon`,svgstr:'<svg width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M39.1422 33.7824L35.479 30.0952C39.4031 24.2073 39.7699 16.638 36.4334 10.3982C33.097 4.15844 26.5984 0.260118 19.5226 0.253906C12.1575 0.293485 5.45754 4.52321 2.25444 11.1555L3.69412 11.8433C7.24887 4.44454 15.447 0.486468 23.4516 2.30439C31.4562 4.12231 37.1404 11.2332 37.1507 19.4416C37.1598 22.8099 36.19 26.1082 34.3593 28.9355L31.3279 25.8962C33.4765 21.5283 33.0446 16.3321 30.2043 12.3789C27.364 8.42574 22.5771 6.35841 17.752 7.00104C12.9269 7.64368 8.848 10.8918 7.14135 15.4505H1.85453V17.0502H6.69345C6.51726 17.8385 6.41815 18.6421 6.39751 19.4496H0.254883V21.0493H6.4535C6.51739 21.8621 6.6648 22.6661 6.8934 23.4487H1.94251V25.0484H7.46927C8.93815 28.4788 11.7938 31.1247 15.3261 32.328C18.8585 33.5314 22.7355 33.1792 25.9931 31.359L28.9285 34.2943C20.85 39.4073 10.1671 37.1343 4.86985 29.1755L3.54215 30.0633C9.39788 38.8618 21.2644 41.2716 30.0882 35.4541L33.7754 39.1412C35.2552 40.6232 37.6562 40.625 39.1382 39.1452C40.6202 37.6654 40.622 35.2644 39.1422 33.7824ZM19.5787 31.4307C14.8905 31.4307 10.6641 28.6061 8.87074 24.2745C7.07739 19.9429 8.0704 14.9574 11.3866 11.6435C14.7028 8.32957 19.6889 7.34001 24.0193 9.13635C28.3498 10.9327 31.1714 15.1611 31.1681 19.8493C31.1549 26.2432 25.9726 31.4219 19.5787 31.4307ZM34.8869 37.9971C35.7483 38.828 37.1128 38.828 37.9742 37.9971L37.9822 37.9571C38.3934 37.5487 38.6247 36.993 38.6247 36.4134C38.6247 35.8338 38.3934 35.2782 37.9822 34.8698L30.4159 27.2635C29.5839 28.4961 28.5479 29.578 27.3525 30.4628L34.8869 37.9971Z"\n    fill="#DD7A01"></path>\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M26.9524 21.0106C26.6128 20.2945 26.095 19.6777 25.4488 19.219L25.9766 15.3238V15.2199V15.1079V14.9959C25.9766 13.1003 21.8016 12.3965 19.1702 12.3965C16.5387 12.3965 12.3717 13.1003 12.3717 14.9959C12.368 15.0331 12.368 15.0706 12.3717 15.1079V15.2199C12.3672 15.2544 12.3672 15.2893 12.3717 15.3238L13.7074 25.2816C13.8114 27.2652 18.5943 27.3212 19.1462 27.3212C20.1838 27.3273 21.2191 27.22 22.2335 27.0012C22.5705 26.9222 22.9018 26.8207 23.2253 26.6973C24.0971 26.3534 24.553 25.8975 24.5849 25.2816L25.0009 22.1703C25.2637 22.2272 25.5317 22.2567 25.8007 22.2583C26.2112 22.3175 26.6164 22.1212 26.8244 21.7624C26.971 21.5409 27.0174 21.268 26.9524 21.0106ZM23.7048 20.0914C22.6811 19.6995 21.4413 19.1636 20.2656 18.5958C20.0781 18.0439 19.5056 17.7213 18.9365 17.8468C18.3673 17.9722 17.9835 18.5056 18.0454 19.0851C18.1073 19.6647 18.595 20.105 19.1778 20.1074C19.3093 20.1083 19.4396 20.0838 19.5618 20.0354C20.8386 20.6726 22.1496 21.2386 23.4889 21.7311L23.049 25.0263C22.9336 25.1012 22.8102 25.1629 22.6811 25.2103C22.4205 25.307 22.1532 25.3845 21.8812 25.4422C20.9879 25.6358 20.0759 25.7297 19.1619 25.7222C17.8398 25.7995 16.5183 25.561 15.3067 25.0263L14.187 16.7002C17.4472 17.5853 20.8845 17.5853 24.1447 16.7002L23.7048 20.0914ZM14.1395 14.9635C15.7457 15.5759 17.4615 15.8483 19.1783 15.7633C20.8953 15.8492 22.6113 15.5768 24.2172 14.9635C22.6384 14.2438 20.912 13.9067 19.1783 13.9797C17.4447 13.9067 15.7183 14.2438 14.1395 14.9635Z"\n    fill="#DD7A01"></path>\n</svg>'}),ve=new I.LabIcon({name:`${s.EXTENSION_ID}:clear-icon`,svgstr:'<svg width="20" height="18" viewBox="0 0 20 18" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n    <g id="Icon">\n        <path id="Shape" fill-rule="evenodd" clip-rule="evenodd" d="M14.2425 4.75737C14.6331 5.14789 14.6331 5.78106 14.2425 6.17158L11.4141 9.00001L14.2425 11.8284C14.6331 12.219 14.6331 12.8521 14.2425 13.2427C13.852 13.6332 13.2188 13.6332 12.8283 13.2427L9.99989 10.4142L7.17146 13.2427C6.78094 13.6332 6.14777 13.6332 5.75725 13.2427C5.36672 12.8521 5.36672 12.219 5.75725 11.8284L8.58568 9.00001L5.75725 6.17158C5.36672 5.78106 5.36672 5.14789 5.75725 4.75737C6.14777 4.36685 6.78094 4.36685 7.17146 4.75737L9.99989 7.5858L12.8283 4.75737C13.2188 4.36685 13.852 4.36685 14.2425 4.75737Z"/>\n    </g>\n</svg>'}),fe=new I.LabIcon({name:`${s.EXTENSION_ID}:datazone-icon`,svgstr:'<svg width="92" height="92" viewBox="0 0 92 92" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M37.0658 24.5453L35.3952 22.8596L44.847 13.3222C45.309 12.8561 46.0557 12.8561 46.5177 13.3222L55.9695 22.8596L54.2989 24.5453L45.6824 15.8508L37.0658 24.5453ZM78.4178 47.1964L68.9659 56.7337L67.2953 55.048L75.9118 46.3535L67.2953 37.6591L68.9659 35.9734L78.4178 45.5107C78.8797 45.9768 78.8797 46.7303 78.4178 47.1964ZM54.2989 68.1618L55.9695 69.8475L46.5177 79.3848C46.2873 79.6173 45.9848 79.7341 45.6824 79.7341C45.3799 79.7341 45.0774 79.6173 44.847 79.3848L35.3952 69.8475L37.0658 68.1618L45.6824 76.8562L54.2989 68.1618ZM24.0694 55.048L22.3988 56.7337L12.9469 47.1964C12.485 46.7303 12.485 45.9768 12.9469 45.5107L22.3988 35.9734L24.0694 37.6591L15.4529 46.3535L24.0694 55.048ZM61.6324 66.6203C59.3521 66.6203 57.4972 64.7486 57.4972 62.4477C57.4972 60.1469 59.3521 58.2752 61.6324 58.2752C63.9127 58.2752 65.7676 60.1469 65.7676 62.4477C65.7676 64.7486 63.9127 66.6203 61.6324 66.6203ZM55.8514 59.4673H35.5133C34.8907 58.243 33.8994 57.2428 32.686 56.6145V36.0926C33.8994 35.4643 34.8907 34.4641 35.5133 33.2397H55.8514C56.474 34.4641 57.4653 35.4643 58.6787 36.0926V56.6145C57.4653 57.2428 56.474 58.243 55.8514 59.4673ZM29.7323 66.6203C27.452 66.6203 25.5971 64.7486 25.5971 62.4477C25.5971 60.1469 27.452 58.2752 29.7323 58.2752C32.0126 58.2752 33.8675 60.1469 33.8675 62.4477C33.8675 64.7486 32.0126 66.6203 29.7323 66.6203ZM25.5971 30.2593C25.5971 27.9584 27.452 26.0867 29.7323 26.0867C32.0126 26.0867 33.8675 27.9584 33.8675 30.2593C33.8675 32.5602 32.0126 34.4319 29.7323 34.4319C27.452 34.4319 25.5971 32.5602 25.5971 30.2593ZM61.6324 26.0867C63.9127 26.0867 65.7676 27.9584 65.7676 30.2593C65.7676 32.5602 63.9127 34.4319 61.6324 34.4319C59.3521 34.4319 57.4972 32.5602 57.4972 30.2593C57.4972 27.9584 59.3521 26.0867 61.6324 26.0867ZM61.6324 55.8908C61.4327 55.8908 61.2366 55.9028 61.0417 55.9206V36.7864C61.2366 36.8043 61.4327 36.8162 61.6324 36.8162C65.2147 36.8162 68.1306 33.8751 68.1306 30.2593C68.1306 26.6435 65.2147 23.7024 61.6324 23.7024C58.0501 23.7024 55.1342 26.6435 55.1342 30.2593C55.1342 30.4608 55.146 30.6587 55.1638 30.8554H36.2009C36.2187 30.6587 36.2305 30.4608 36.2305 30.2593C36.2305 26.6435 33.3146 23.7024 29.7323 23.7024C26.15 23.7024 23.2341 26.6435 23.2341 30.2593C23.2341 33.8751 26.15 36.8162 29.7323 36.8162C29.932 36.8162 30.1281 36.8043 30.323 36.7864V55.9206C30.1281 55.9028 29.932 55.8908 29.7323 55.8908C26.15 55.8908 23.2341 58.8319 23.2341 62.4477C23.2341 66.0636 26.15 69.0047 29.7323 69.0047C33.3146 69.0047 36.2305 66.0636 36.2305 62.4477C36.2305 62.2463 36.2187 62.0484 36.2009 61.8517H55.1638C55.146 62.0484 55.1342 62.2463 55.1342 62.4477C55.1342 66.0636 58.0501 69.0047 61.6324 69.0047C65.2147 69.0047 68.1306 66.0636 68.1306 62.4477C68.1306 58.8319 65.2147 55.8908 61.6324 55.8908Z"\n    fill="#EC7211" />\n</svg>'}),Ee=new I.LabIcon({name:`${s.EXTENSION_ID}:chevron-down-icon`,svgstr:'<svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor"\n  xmlns="http://www.w3.org/2000/svg">\n  <g id="Icon">\n    <path id="Shape" fill-rule="evenodd" clip-rule="evenodd"\n      d="M4.79289 6.29289C5.18342 5.90237 5.81658 5.90237 6.20711 6.29289L9 9.08579L11.7929 6.29289C12.1834 5.90237 12.8166 5.90237 13.2071 6.29289C13.5976 6.68342 13.5976 7.31658 13.2071 7.70711L9 11.9142L4.79289 7.70711C4.40237 7.31658 4.40237 6.68342 4.79289 6.29289Z"\n    />\n  </g>\n</svg>'}),_e=new I.LabIcon({name:`${s.EXTENSION_ID}:chevron-right-icon`,svgstr:'<svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor"\n  xmlns="http://www.w3.org/2000/svg">\n  <g id="Icon">\n    <path id="Shape" fill-rule="evenodd" clip-rule="evenodd"\n      d="M6.29289 13.7071C5.90237 13.3166 5.90237 12.6834 6.29289 12.2929L9.08579 9.5L6.29289 6.70711C5.90237 6.31658 5.90237 5.68342 6.29289 5.29289C6.68342 4.90237 7.31658 4.90237 7.70711 5.29289L11.9142 9.5L7.70711 13.7071C7.31658 14.0976 6.68342 14.0976 6.29289 13.7071Z"\n    />\n  </g>\n</svg>'}),Se=new I.LabIcon({name:`${s.EXTENSION_ID}:schema-icon`,svgstr:'<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"\n  xmlns="http://www.w3.org/2000/svg">\n  <g id="Icon">\n    <path id="Shape"\n      d="M5 5C4.44772 5 4 5.44772 4 6V14C4 14.5523 4.44772 15 5 15H15C15.5523 15 16 14.5523 16 14V7.5C16 6.94772 15.5523 6.5 15 6.5H10L9.29687 5.4453C9.1114 5.1671 8.79917 5 8.46482 5H5Z"\n    />\n  </g>\n</svg>'}),Le=new I.LabIcon({name:`${s.EXTENSION_ID}:table-icon`,svgstr:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor"\n  xmlns="http://www.w3.org/2000/svg">\n  <rect x="3.5" y="3" width="13" height="14" rx="1.5" />\n  <path d="M3.5 4.5C3.5 3.67157 4.17157 3 5 3H7.75V8H3.5V4.5Z" />\n  <rect x="3.5" y="8" width="4.25" height="4" />\n  <path d="M3.5 12H7.75V17H5C4.17157 17 3.5 16.3284 3.5 15.5V12Z" />\n  <rect x="7.875" y="3" width="4.25" height="5" />\n  <rect x="7.875" y="8" width="4.25" height="4" />\n  <rect x="7.875" y="12" width="4.25" height="5" />\n  <path d="M12.25 3H15C15.8284 3 16.5 3.67157 16.5 4.5V8H12.25V3Z" />\n  <rect x="12.25" y="8" width="4.25" height="4" />\n  <path d="M12.25 12H16.5V15.5C16.5 16.3284 15.8284 17 15 17H12.25V12Z" />\n</svg>'}),ye=new I.LabIcon({name:`${s.EXTENSION_ID}:view-icon`,svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">\n  <path d="M0.5 2C0.5 1.17157 1.17157 0.5 2 0.5H5.5V5.5H0.5V2Z" stroke="currentColor" />\n  <mask id="path-2-inside-1_1311_522234" fill="white">\n    <path d="M0 5H6V11H2C0.89543 11 0 10.1046 0 9V5Z" />\n  </mask>\n  <path\n    d="M0 5H6H0ZM7 12H2C0.343146 12 -1 10.6569 -1 9H1C1 9.55228 1.44772 10 2 10H5L7 12ZM2 12C0.343146 12 -1 10.6569 -1 9V5H1V9C1 9.55228 1.44772 10 2 10V12ZM7 5V12L5 10V5H7Z"\n    fill="currentColor" mask="url(#path-2-inside-1_1311_522234)" />\n  <path d="M5.5 0.5H9C9.82843 0.5 10.5 1.17157 10.5 2V5.5H5.5V0.5Z" stroke="currentColor" />\n  <mask id="path-5-inside-2_1311_522234" fill="white">\n    <path d="M5 5H11V9C11 10.1046 10.1046 11 9 11H5V5Z" />\n  </mask>\n  <path\n    d="M5 5H11H5ZM12 9C12 10.6569 10.6569 12 9 12H4L6 10H9C9.55228 10 10 9.55228 10 9H12ZM4 12V5H6V10L4 12ZM12 5V9C12 10.6569 10.6569 12 9 12V10C9.55228 10 10 9.55228 10 9V5H12Z"\n    fill="currentColor" mask="url(#path-5-inside-2_1311_522234)" />\n  <rect x="5.5" y="5.5" width="5" height="5" stroke="currentColor" />\n  <mask id="path-8-inside-3_1311_522234" fill="white">\n    <path d="M5 10H11V16H7C5.89543 16 5 15.1046 5 14V10Z" />\n  </mask>\n  <path\n    d="M5 10H11H5ZM12 17H7C5.34315 17 4 15.6569 4 14H6C6 14.5523 6.44772 15 7 15H10L12 17ZM7 17C5.34315 17 4 15.6569 4 14V10H6V14C6 14.5523 6.44772 15 7 15V17ZM12 10V17L10 15V10H12Z"\n    fill="currentColor" mask="url(#path-8-inside-3_1311_522234)" />\n  <path d="M10.5 5.5H14C14.8284 5.5 15.5 6.17157 15.5 7V10.5H10.5V5.5Z" stroke="currentColor" />\n  <mask id="path-11-inside-4_1311_522234" fill="white">\n    <path d="M10 10H16V14C16 15.1046 15.1046 16 14 16H10V10Z" />\n  </mask>\n  <path\n    d="M10 10H16H10ZM17 14C17 15.6569 15.6569 17 14 17H9L11 15H14C14.5523 15 15 14.5523 15 14H17ZM9 17V10H11V15L9 17ZM17 10V14C17 15.6569 15.6569 17 14 17V15C14.5523 15 15 14.5523 15 14V10H17Z"\n    fill="currentColor" mask="url(#path-11-inside-4_1311_522234)" />\n</svg>'}),Ne=new I.LabIcon({name:`${s.EXTENSION_ID}:column-icon`,svgstr:'<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"\n  xmlns="http://www.w3.org/2000/svg">\n  <g id="Icon">\n    <g id="Shape">\n      <path d="M3 4.5C3 3.67157 3.67157 3 4.5 3H6.66663V17H4.5C3.67157 17 3 16.3284 3 15.5V4.5Z" />\n      <path d="M8.16663 17V3H11.8333V17H8.16663Z" />\n      <path\n        d="M13.3333 17H15.5C16.3284 17 17 16.3284 17 15.5V4.5C17 3.67157 16.3284 3 15.5 3H13.3333V17Z" />\n    </g>\n  </g>\n</svg>'}),we=new I.LabIcon({name:`${s.EXTENSION_ID}:three-dots-icon`,svgstr:'<svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor"\n  xmlns="http://www.w3.org/2000/svg">\n  <g id="Icon">\n    <path id="Shape" fill-rule="evenodd" clip-rule="evenodd"\n      d="M10.25 4.25C10.25 4.94036 9.69036 5.5 9 5.5C8.30964 5.5 7.75 4.94036 7.75 4.25C7.75 3.55964 8.30964 3 9 3C9.69036 3 10.25 3.55964 10.25 4.25ZM10.25 9C10.25 9.69036 9.69036 10.25 9 10.25C8.30964 10.25 7.75 9.69036 7.75 9C7.75 8.30964 8.30964 7.75 9 7.75C9.69036 7.75 10.25 8.30964 10.25 9ZM9 15C9.69036 15 10.25 14.4404 10.25 13.75C10.25 13.0596 9.69036 12.5 9 12.5C8.30964 12.5 7.75 13.0596 7.75 13.75C7.75 14.4404 8.30964 15 9 15Z"\n      fill="currentColor" />\n  </g>\n</svg>'}),be=new I.LabIcon({name:`${s.EXTENSION_ID}:search-icon`,svgstr:'<svg\n  xmlns="http://www.w3.org/2000/svg"\n  width="20"\n  height="20"\n  viewBox="0 0 20 20"\n  fill="currentColor"\n>\n  <path\n    fill-rule="evenodd"\n    clip-rule="evenodd"\n    d="M12.3433 11.8129C12.9655 11.071 13.3403 10.1145 13.3403 9.07052C13.3403 6.71241 11.4286 4.80078 9.07052 4.80078C6.71241 4.80078 4.80078 6.71241 4.80078 9.07052C4.80078 11.4286 6.71241 13.3403 9.07052 13.3403C10.1146 13.3403 11.0711 12.9655 11.813 12.3432L12.3961 12.9264C12.2418 13.2904 12.3131 13.7274 12.6099 14.0241L14.5351 15.9494C14.9256 16.3399 15.5588 16.3399 15.9493 15.9494C16.3398 15.5589 16.3398 14.9257 15.9493 14.5352L14.0241 12.6099C13.7274 12.3132 13.2905 12.2419 12.9265 12.3961L12.3433 11.8129ZM9.07052 12.0903C10.7383 12.0903 12.0903 10.7383 12.0903 9.07052C12.0903 7.40276 10.7383 6.05078 9.07052 6.05078C7.40276 6.05078 6.05078 7.40276 6.05078 9.07052C6.05078 10.7383 7.40276 12.0903 9.07052 12.0903Z"\n  />\n</svg>'}),xe=new I.LabIcon({name:`${s.EXTENSION_ID}:close-icon`,svgstr:'<svg width="20" height="18" viewBox="0 0 20 18" fill="currentColor"\n  xmlns="http://www.w3.org/2000/svg">\n  <g id="Icon">\n    <path id="Shape" fill-rule="evenodd" clip-rule="evenodd"\n      d="M14.2425 4.75737C14.6331 5.14789 14.6331 5.78106 14.2425 6.17158L11.4141 9.00001L14.2425 11.8284C14.6331 12.219 14.6331 12.8521 14.2425 13.2427C13.852 13.6332 13.2188 13.6332 12.8283 13.2427L9.99989 10.4142L7.17146 13.2427C6.78094 13.6332 6.14777 13.6332 5.75725 13.2427C5.36672 12.8521 5.36672 12.219 5.75725 11.8284L8.58568 9.00001L5.75725 6.17158C5.36672 5.78106 5.36672 5.14789 5.75725 4.75737C6.14777 4.36685 6.78094 4.36685 7.17146 4.75737L9.99989 7.5858L12.8283 4.75737C13.2188 4.36685 13.852 4.36685 14.2425 4.75737Z"\n    />\n  </g>\n</svg>'}),Te=new I.LabIcon({name:`${s.EXTENSION_ID}:directory-icon`,svgstr:'<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <g id="Icon">\n    <path id="Shape"\n      d="M4 4C3.44772 4 3 4.44772 3 5V13C3 13.5523 3.44772 14 4 14H14C14.5523 14 15 13.5523 15 13V6.5C15 5.94772 14.5523 5.5 14 5.5H9L8.29687 4.4453C8.1114 4.1671 7.79917 4 7.46482 4H4Z"\n      fill="#1976D2" />\n  </g>\n</svg>'});var Ie=n(1962),ke=n(471);function Me(e){return getComputedStyle(document.body).getPropertyValue(e).trim()}function De(){const e=document.body.getAttribute("data-jp-theme-light");return(0,ke.Z)({spacing:4,components:{MuiButton:{defaultProps:{size:"small"}},MuiFilledInput:{defaultProps:{margin:"dense"}},MuiFormControl:{defaultProps:{margin:"dense",size:"small"}},MuiFormHelperText:{defaultProps:{margin:"dense"}},MuiIconButton:{defaultProps:{size:"small"}},MuiMenuItem:{styleOverrides:{root:{fontSize:13}}},MuiInputBase:{defaultProps:{margin:"dense",size:"small"}},MuiInputLabel:{defaultProps:{margin:"dense"},styleOverrides:{root:{display:"flex",alignItems:"center",color:"var(--jp-ui-font-color0)",gap:"6px"}}},MuiListItem:{defaultProps:{dense:!0}},MuiOutlinedInput:{defaultProps:{margin:"dense"}},MuiFab:{defaultProps:{size:"small"}},MuiAutocomplete:{defaultProps:{componentsProps:{paper:{elevation:4}}}},MuiTable:{defaultProps:{size:"small"}},MuiTableCell:{styleOverrides:{root:{borderBottomColor:Me("--jp-border-color0")}}},MuiTextField:{defaultProps:{margin:"none",size:"small"}},MuiToolbar:{defaultProps:{variant:"dense"}}},palette:{background:{paper:Me("--jp-layout-color1"),default:Me("--jp-layout-color1")},mode:"true"===e?"light":"dark",primary:{main:Me("--jp-brand-color1"),light:Me("--jp-brand-color2"),dark:Me("--jp-brand-color0")},error:{main:Me("--jp-error-color1"),light:Me("--jp-error-color2"),dark:Me("--jp-error-color0")},warning:{main:Me("--jp-warn-color1"),light:Me("--jp-warn-color2"),dark:Me("--jp-warn-color0")},success:{main:Me("--jp-success-color1"),light:Me("--jp-success-color2"),dark:Me("--jp-success-color0")},text:{primary:Me("--jp-ui-font-color1"),secondary:Me("--jp-ui-font-color2"),disabled:Me("--jp-ui-font-color3")}},shape:{borderRadius:2},typography:{fontFamily:Me("--jp-ui-font-family"),fontSize:13,htmlFontSize:16,button:{textTransform:"capitalize"}}})}var Ae,Oe,Pe,Re=n(9397),Ve=n(3614),He=n(8439),Ze=n(8102),Qe=n(4592),je=n(7858),Fe=n(5921);!function(e){e.Athena="ATHENA",e.Redshift="REDSHIFT",e.Catalog="CATALOG",e.Snowflake="SNOWFLAKE",e.Datazone="DATAZONE"}(Ae||(Ae={})),function(e){e.Database="DATABASE",e.Schema="SCHEMA",e.Table="TABLE",e.View="VIEW",e.Column="COLUMN",e.Datasource="DATA_SOURCE",e.Root="ROOT"}(Oe||(Oe={})),function(e){e.Glue="GLUE_CONNECTION",e.GlueCatalog="GLUE_CATALOG"}(Pe||(Pe={}));const $e={Athena:"ATHENA",Redshift:"REDSHIFT",Snowflake:"SNOWFLAKE"};var Be;!function(e){e.Success="SUCCESS",e.Failed="FAILED",e.InProgress="IN_PROGRESS"}(Be||(Be={}));var Ge=n(6489);const ze=Y.css`
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
`,Ue=Y.css`
  & th {
    padding: 8px 4px;
    width: 50%;
  }

  & td {
    border: 0;
    padding: 8px 4px;
    width: 50%;
  }
`,qe=Y.css`
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 16px;
  color: var(--jp-error-color0);
  background-color: var(--jp-error-color3);
`,We=Y.css`
  font-size: 12px;
  font-style: normal;
  font-weight: 500;
  line-height: 150%;
  margin: unset;
  flex-grow: 1;
`,Xe=Y.css`
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 0 24px 12px;
  font-size: 12px;
  line-height: 150%;
  cursor: default;
`,Ye=Y.css`
  cursor: pointer;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  min-width: 18px;
`,Ke=e=>{const{isLoading:t}=e;return D().createElement(D().Fragment,null,t&&D().createElement("div",{className:ze},D().createElement(Ge.Z,{variant:"indeterminate",disableShrink:!0,sx:{animationDuration:"500ms"},size:40,thickness:4})))},Je=Y.css`
  display: flex;
  flex-direction: column;
  min-height: 100%;
  color: var(--jp-ui-font-color1);
  position: relative;
`,et=Y.css`
  display: flex;
  flex-direction: column;
  font-size: var(--jp-ui-font-size1);
`,tt=Y.css`
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 12px 24px;
`,nt=Y.css`
  display: flex;
  align-items: center;
  padding: 0 24px 12px;
  gap: 4px;
`,at=Y.css`
  font-style: normal;
  font-weight: 700;
  line-height: 200%;
`,ot=Y.css`
  flex-grow: 1;
`,lt=Y.css`
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 0 24px;
`,rt=Y.css`
  font-size: var(--jp-ui-font-size1);
  font-style: normal;
  font-weight: 700;
  line-height: 150%;
  margin: unset;
`,it=Y.css`
  display: flex;
  padding: 8px 12px;
  align-items: center;
  gap: 6px;

  border-radius: 4px;
  border: 1px solid var(--jp-border-color0);
  background: var(--juptyer-gray-2, #f5f5f5);
  cursor: pointer;

  font-size: var(--jp-ui-font-size1);
  font-style: normal;
  font-weight: 500;
  line-height: 150%;
`,st=Y.css`
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  position: relative;
`,ct=Y.css`
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border-top: 1px solid var(--jp-border-color0);
  overflow-y: auto;
  height: 240px;
`,dt=Y.css`
  display: flex;
  align-items: center;
  padding: 6px 12px;
  gap: 8px;
  border-top: 1px solid var(--jp-border-color0);
  white-space: nowrap;
`,ut=Y.css`
  text-overflow: ellipsis;
  overflow: hidden;

  font-size: 12px;
  font-style: normal;
  font-weight: 400;
  line-height: 150%;
  margin: unset;
`,mt=Y.css`
  white-space: pre-line;

  font-size: 12px;
  font-style: normal;
  font-weight: 500;
  line-height: 150%;
  padding: 24px;
`,pt=Y.css`
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  position: relative;
`,ht=Y.css`
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 16px;
  margin-top: 6px;

  font-size: var(--jp-ui-font-size1);
  line-height: 20px;
`,Ct=Y.css`
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border-top: 1px solid var(--jp-border-color0);
`,gt=Y.css`
  display: inline-flex;
  width: 20px;
  height: 20px;
  justify-content: center;
  align-items: center;
  flex-shrink: 0;
`,vt=Y.css`
  display: inline-flex;
  width: 20px;
  height: 20px;
  justify-content: center;
  align-items: center;
  flex-shrink: 0;
`,ft=Y.css`
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  height: 240px;
  flex-grow: 1;
`,Et=Y.css`
  font-size: 12px;
  line-height: 150%; /* 18px */
  padding: 0 24px 12px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  box-sizing: border-box;
`,_t=Y.css`
  display: flex;
  flex-direction: column;
`,St=Y.css`
  font-size: 12px;
  font-weight: 700;
  display: flex;
  align-items: center;
  height: 32px;
  box-sizing: border-box;

  padding: 4px 24px;
  border-top: 1px solid var(--jp-border-color0);
  border-bottom: 1px solid var(--jp-border-color0);
`,Lt=Y.css`
  display: flex;
  flex-direction: column;
`,yt=Y.css`
  display: flex;
  align-items: center;
  gap: 2px;
  padding: 6px 12px;
`,Nt=Y.css`
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  gap: 4px;
  overflow: hidden;
`,wt=Y.css`
  display: flex;
  align-items: center;
  gap: 6px;

  font-size: 12px;
  line-height: 150%;
`,bt=Y.css`
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 12px;
  line-height: 150%;
`,xt=Y.css`
  display: flex;
  flex-direction: column;
  flex-grow: 1;

  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  background-color: var(--jp-layout-color1);
`,Tt=Y.css`
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 12px 24px;
  border-bottom: 1px solid var(--jp-border-color0);
  font-size: var(--jp-ui-font-size1);
`,It=Y.css`
  line-height: 200%;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  flex-grow: 1;
  overflow: hidden;
`,kt=Y.css`
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,Mt=Y.css`
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  overflow-y: auto;
`,Dt=Y.css`
  padding: 16px 24px;
  border-bottom: 1px solid var(--jp-border-color0);
`,At=Y.css`
  font-size: 12px;
  font-style: normal;
  font-weight: 400;
  line-height: 150%;
  white-space: pre-line;
`,Ot=Y.css`
  padding: 16px 24px;

  &:not(:last-child) {
    border-bottom: 1px solid var(--jp-border-color0);
  }
`,Pt=Y.css`
  font-size: var(--jp-ui-font-size1);
  font-weight: 500;
  line-height: 150%;
  margin-bottom: 16px;
`,Rt=Y.css`
  display: flex;
  justify-content: flex-end;
  padding: 8px 16px;
  border-top: 1px solid var(--jp-border-color0);
`,Vt=Y.css`
  font-family: var(--jp-ui-font-family);
  max-height: 100%;
`,Ht=Y.css`
  font-size: var(--jp-ui-font-size1);

  &:hover {
    background-color: var(--jp-layout-color2);
  }

  &:hover button:nth-child(4) {
    visibility: initial;
  }
`,Zt=Y.css`
  & {
    display: flex;
    align-items: center;
    height: 100%;
    line-height: 20px;
    white-space: nowrap;
    cursor: pointer;
    position: relative;
    box-sizing: border-box;
    gap: 2px;
  }

  & > span:nth-child(1) {
    margin-left: 8px;
    flex-shrink: 0;
  }

  & > span:nth-child(3) {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    flex-grow: 1;
  }

  & > button:nth-child(4) {
    margin-right: 8px;
    visibility: hidden;
  }

  &.isFocused > button:nth-child(4),
  &.isSelected > button:nth-child(4) {
    visibility: initial;
  }

  &.isSelected {
    background: var(--jp-brand-color1);
    color: var(--jp-ui-inverse-font-color1);
  }
`,Qt=e=>{let t;switch(e.connectionType){case Ae.Snowflake:t=he;break;case Ae.Athena:t=ge;break;case Ae.Redshift:t=Ce;break;case Ae.Datazone:t=fe;break;default:t=ue}return D().createElement(t.react,{className:gt,elementPosition:"center",tag:"span",width:"100%",height:"100%"})},jt=e=>{let t;switch(e.nodeType){case Oe.Database:case Oe.Datasource:t=ue;break;case Oe.Schema:t=Se;break;case Oe.Table:t=Le;break;case Oe.View:t=ye;break;case Oe.Column:t=Ne;break;case Oe.Root:t=ue}return D().createElement(t.react,{className:vt,elementPosition:"center",tag:"span",width:"100%",height:"100%"})},Ft=e=>{const[t,n]=(0,M.useState)(!1),{error:a}=e,o=L(a,"message")?a.message:void 0;return(0,M.useEffect)((()=>{n(!1)}),[a]),o&&!t?D().createElement("div",{className:qe},D().createElement("p",{className:We},o),D().createElement(k.IconButton,{sx:{padding:"4px",color:"inherit"},onClick:()=>{n(!0)},"data-testid":"errorCancelButton"},D().createElement(xe.react,{elementPosition:"center",tag:"span"}))):null};var $t=n(7167),Bt=n(6014),Gt=n(2233);const zt=D().createContext(Bt.nullTranslator);class Ut extends D().Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,t){this.setState({hasError:!0,error:e})}render(){let e;return"string"==typeof this.state.error?e=this.state.error:this.state.error instanceof Error&&(e=this.state.error.message),this.state.hasError?D().createElement("div",{className:"jp-error-boundary"},D().createElement(k.Stack,{spacing:4},D().createElement(k.Alert,{severity:"error"},D().createElement(k.AlertTitle,null,this.props.alertTitle),this.props.alertMessage),e&&D().createElement(D().Fragment,null,D().createElement(k.Typography,{variant:"h1"},this.props.detailTitle),D().createElement("pre",null,e)))):this.props.children}}const qt="refreshSidePanel",Wt="jp-connections-Heading";function Xt(e){const{level:t,children:n}=e,a=`h${null!=t?t:1}`;return D().createElement(a,{className:Wt},n)}var Yt=n(4721),Kt=n(1023),Jt=n(2715),en=n(5722);const tn=Y.css`
  display: flex;
  flex-direction: column;
  width: 25%;
  justify-content: flex-start;
`,nn=Y.css`
  color: var(--jp-color-root-light-800);
  font-weight: 400;
  font-size: var(--jp-ui-font-size1);
  line-height: var(--jp-ui-font-size1);
  margin-bottom: var(--jp-ui-font-size1);
  display: flex;
  align-items: center;
`,an=Y.css`
  background-color: #e0e0e0; /* Set the desired gray background color */
  opacity: 0.25; /* Ensure full opacity */

  /* Target the filled variant specifically */
  &.MuiFilledInput-root {
    background-color: #e0e0e0 !important; /* Use important to override MUI styles */
  }
`,on=Y.css`
  position: relative;

  & .MuiTooltip-arrow {
    color: var(--tooltip-surface);

    &:before {
      box-shadow: var(--tooltip-shadow);
    }
  }
`,ln=Y.css`
  display: flex;
  align-items: center;
`,rn=Y.css`
  color: var(--jp-ui-font-color0);
`,sn=Y.css`
  display: flex;
  align-items: center;
`,cn=Y.css`
  color: var(--jp-brand-color3);
`,dn=({labelInfo:e,required:t,toolTipText:n,errorMessage:a,name:o,value:l,onChange:r,selectOptions:i,disabled:s,...c})=>{const d=i?Object.keys(i)[0]:"";return D().createElement("div",{className:tn},D().createElement("div",{className:nn},D().createElement("label",null,e),n&&D().createElement(Kt.Z,{className:on,title:n,arrow:!0},D().createElement(Yt.Z,{fontSize:"small"}))),i?D().createElement(en.Z,{name:o,value:l||d,onChange:r,error:y(a),displayEmpty:!0,...c},Object.keys(i).map((e=>D().createElement(k.MenuItem,{key:e,value:i[e]},i[e])))):D().createElement(Jt.Z,{name:o,value:l,disabled:s,variant:s?"filled":"outlined",onChange:r,error:y(a),className:s?an:"",helperText:a}))},un={SSE_S3:"SSE_S3",SSE_KMS:"SSE_KMS",CSE_KMS:"CSE_KMS"},mn="Serverless",pn="Provisioned",hn="Enter the name of the database you want to connect to. Make sure the database exists on the specified Redshift cluster.",Cn="Specify the port number used to connect to the Redshift cluster. The default is usually 5439, but this can vary based on your setup.",gn="Enter the unique identifier for your Redshift cluster. This is used to locate and connect to the correct cluster instance.",vn="Provide the endpoint of your Redshift cluster. This is typically in the format: <cluster-identifier>.<random-string>.<region>.redshift.amazonaws.com.",fn="Specify the name of the serverless workgroup to use when running queries against your data warehouse in serverless mode.",En="Enter the account ID associated with your serverless Redshift account. This is required for connection to serverless resources.",_n="Limit metadata queries to the current database only.",Sn="Maximum prepared statement.",Ln="Time in seconds before the connection times out.",yn="Convert NUMERIC data types to float.",Nn="Use SSL for the connection.",wn="Level of SSL verification.",bn="Automatically create the database user if not exist.",xn="Comma-separated list of database group names that the user joins for the session.",Tn="https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-sql-extension-connection-properties.html#sagemaker-sql-extension-connection-properties-snowflake",In='The Snowflake account identifier, typically in the format "account.region.cloud_provider".',kn="The name of the Snowflake database to connect to and run queries against.",Mn="The schema within the selected database to query from.",Dn="The Snowflake virtual warehouse to use for running queries and performing data operations.",An="The maximum time (in seconds) to wait for login response before timing out.",On="The maximum time (in seconds) to wait for network operations to complete before timing out.",Pn="The number of threads used for prefetching data client-side to optimize performance.",Rn="If checked, Snowflake will validate the default parameters upon connection.",Vn="If checked, converts Arrow format numbers to decimal types for Snowflake operations.",Hn="If checked, autocommit is enabled for all queries, automatically committing changes.",Zn={schema_name:"default",catalog_name:"AwsDataCatalog",encryption_option:"SSE_S3",poll_interval:1,result_reuse_minutes:60,duration_seconds:3600,result_reuse_enable:!1},Qn=[{label:"Work Group",name:"work_group",tooltip:"Select or specify the Athena workgroup to which the query execution belongs. Workgroups help manage and monitor queries."},{label:"S3 Staging Directory",name:"s3_staging_dir",tooltip:"Specify the S3 directory where query results are staged. This must be a valid S3 URI, such as 's3://bucket-name/prefix/'."},{label:"Schema Name",name:"schema_name",tooltip:"Optional: Enter the schema name that contains the tables to query. If left blank, the default schema is used."},{label:"Catalog Name",name:"catalog_name",tooltip:"Specify the name of the data catalog to use for the query. This is optional and typically defaults to the AWS Glue Data Catalog."},{label:"Encryption Option",name:"encryption_option",tooltip:"Choose how the query results should be encrypted. Options include SSE_S3 (server-side encryption with S3-managed keys), SSE_KMS (server-side encryption with KMS keys), and CSE_KMS (client-side encryption with KMS keys).",selectOptions:un},{label:"KMS Key",name:"kms_key",tooltip:"If you choose KMS encryption, specify the KMS key ARN to be used for encrypting query results."},{label:"Poll Interval",name:"poll_interval",tooltip:"Optional: Enter the interval in seconds to poll the status of query results in Athena."},{label:"Result Reuse Minutes",name:"result_reuse_minutes",tooltip:"Optional: Enter the maximum age of query results that can be reused."},{label:"Max Session Duration In Seconds",name:"duration_seconds",tooltip:"Optional: Enter the maximum age of query results that can be reused in seconds."}],jn=[{label:"Enable Result Reuse",name:"result_reuse_enable",tooltip:"Enable the reuse of previous query results."}],Fn=({properties:e,onInputChange:t,onCheckboxChange:n})=>D().createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},Qn.map((({label:n,name:a,tooltip:o,selectOptions:l})=>"kms_key"===a&&e.encryption_option===un.SSE_S3?null:D().createElement(dn,{key:a,labelInfo:n,name:a,value:e[a],onChange:t,toolTipText:o,selectOptions:l}))),jn.map((({label:t,name:a,tooltip:o})=>D().createElement("div",{className:ln},D().createElement(k.Checkbox,{name:a,color:"primary",checked:Boolean(e[a]),onChange:n}),D().createElement("span",null,t),D().createElement(k.Tooltip,{classes:{popperInteractive:rn},title:o},D().createElement(Yt.Z,{fontSize:"small"}))))));var $n=n(2122),Bn=n(9756),Gn=n(9032);const zn=M.createContext(void 0);var Un=n(2879),qn=n(9416);const Wn="FormControl";function Xn(e){return(0,Un.d)(Wn,e)}(0,qn.s)(Wn,["root","disabled","error","filled","focused","required"]);var Yn=n(7293),Kn=n(4780),Jn=n(1873),ea=n(5893);const ta=["defaultValue","children","disabled","error","onChange","required","slotProps","slots","value"],na=M.forwardRef((function(e,t){var n;const{defaultValue:a,children:o,disabled:l=!1,error:r=!1,onChange:i,required:s=!1,slotProps:c={},slots:d={},value:u}=e,m=(0,Bn.Z)(e,ta),[p,h]=(0,Gn.Z)({controlled:u,default:a,name:"FormControl",state:"value"}),C=function(e){return null!=e&&!(Array.isArray(e)&&0===e.length)&&""!==e}(p),[g,v]=M.useState(!1),f=g&&!l;M.useEffect((()=>v((e=>!l&&e))),[l]);const E=(0,$n.Z)({},e,{disabled:l,error:r,filled:C,focused:f,required:s}),_=M.useMemo((()=>({disabled:l,error:r,filled:C,focused:f,onBlur:()=>{v(!1)},onChange:e=>{h(e.target.value),null==i||i(e)},onFocus:()=>{v(!0)},required:s,value:null!=p?p:""})),[l,r,C,f,i,s,h,p]),S=function(e){const{disabled:t,error:n,filled:a,focused:o,required:l}=e,r={root:["root",t&&"disabled",o&&"focused",n&&"error",a&&"filled",l&&"required"]};return(0,Kn.Z)(r,(0,Jn.T)(Xn))}(E),L=null!=(n=d.root)?n:"div",y=(0,Yn.y)({elementType:L,externalSlotProps:c.root,externalForwardedProps:m,additionalProps:{ref:t,children:"function"==typeof o?o(_):o},ownerState:E,className:S.root});return(0,ea.jsx)(zn.Provider,{value:_,children:(0,ea.jsx)(L,(0,$n.Z)({},y))})})),aa={_cluster_type:pn,database:"dev"},oa=[{label:"Auto Create User",name:"auto_create",tooltip:bn}],la=[{label:"Database Groups",name:"db_groups",tooltip:xn}],ra=[{label:"Database",name:"database",tooltip:hn},{label:"Port",name:"port",tooltip:Cn}],ia=[{label:"Enable SSL",name:"ssl",tooltip:Nn}],sa=[{label:"SSL Mode",name:"sslmode",tooltip:wn,selectOptions:{VERIFY_CA:"verify-ca",VERIFY_FULL:"verify-full"}}],ca=[{label:"Max Prepared Statement",name:"max_prepared_statements",tooltip:Sn},{label:"Connection Timeout",name:"timeout",tooltip:Ln}],da=[{label:"Database Metadata Current DB only",name:"database_metadata_current_db_only",tooltip:_n},{label:"Numeric to Float",name:"numeric_to_float",tooltip:yn}],ua=({properties:e,onInputChange:t,onRadioChange:n,onCheckboxChange:a})=>D().createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},D().createElement(na,null,D().createElement(k.FormLabel,null,"Cluster Type"),D().createElement(k.RadioGroup,{name:"cluster_type",value:e._cluster_type,onChange:n,row:!0},D().createElement(k.FormControlLabel,{value:pn,control:D().createElement(k.Radio,null),label:pn}),D().createElement(k.FormControlLabel,{value:mn,control:D().createElement(k.Radio,null),label:mn}))),e._cluster_type===pn&&D().createElement(D().Fragment,null,D().createElement(dn,{labelInfo:"Cluster Identifier",name:"cluster_identifier",value:e.cluster_identifier,onChange:t,toolTipText:gn}),D().createElement(dn,{labelInfo:"Host",name:"host",value:e.host,onChange:t,toolTipText:vn})),e._cluster_type===mn&&D().createElement(D().Fragment,null,D().createElement(dn,{labelInfo:"Serverless Workgroup",name:"serverless_workgroup",value:e.serverless_workgroup,onChange:t,toolTipText:fn}),D().createElement(dn,{labelInfo:"Serverless Account ID",name:"serverless_account_id",value:e.serverless_account_id,onChange:t,toolTipText:En})),ra.map((({label:n,name:a,tooltip:o})=>D().createElement(dn,{key:a,labelInfo:n,name:a,value:e[a],onChange:t,toolTipText:o}))),D().createElement(Xt,{level:3},"Security Settings"),ia.map((({label:t,name:n,tooltip:o})=>D().createElement("div",{className:ln},D().createElement(k.Checkbox,{name:n,color:"primary",checked:Boolean(e[n]),onChange:a}),D().createElement("span",null,t),D().createElement(k.Tooltip,{classes:{popperInteractive:rn},title:o},D().createElement(Yt.Z,{fontSize:"small"}))))),sa.map((({label:n,name:a,tooltip:o,selectOptions:l})=>"sslmode"===a&&!0!==e.ssl?null:D().createElement(dn,{key:a,labelInfo:n,name:a,value:e[a],onChange:t,toolTipText:o,selectOptions:l}))),D().createElement(Xt,{level:3},"Advanced Settings"),ca.map((({label:n,name:a,tooltip:o})=>D().createElement(dn,{key:a,labelInfo:n,name:a,value:e[a],onChange:t,toolTipText:o}))),da.map((({label:t,name:n,tooltip:o})=>D().createElement("div",{className:ln},D().createElement(k.Checkbox,{name:n,color:"primary",checked:Boolean(e[n]),onChange:a}),D().createElement("span",null,t),D().createElement(k.Tooltip,{classes:{popperInteractive:rn},title:o},D().createElement(Yt.Z,{fontSize:"small"})))))),ma=({properties:e,onInputChange:t,onCheckboxChange:n})=>D().createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},oa.map((({label:t,name:a,tooltip:o})=>D().createElement("div",{className:ln},D().createElement(k.Checkbox,{name:a,color:"primary",checked:Boolean(e[a]),onChange:n}),D().createElement("span",null,t),D().createElement(k.Tooltip,{classes:{popperInteractive:rn},title:o},D().createElement(Yt.Z,{fontSize:"small"}))))),la.map((({label:n,name:a,tooltip:o})=>D().createElement(dn,{key:a,labelInfo:n,name:a,value:e[a],onChange:t,toolTipText:o}))));var pa=n(1072);const ha=({tooltipText:e,link:t})=>D().createElement("div",null,D().createElement("span",{className:sn},e),D().createElement(pa.Z,{href:t,target:"_blank"},D().createElement("p",{className:cn},"Learn more"))),Ca={account:"",database:"",schema:"",warehouse:"",login_timeout:"",network_timeout:"",client_prefetch_threads:"",validate_default_parameters:!1,arrow_number_to_decimal:!1,autocommit:!1,aws_secret_arn:""},ga=[{label:"Account",name:"account",tooltip:In},{label:"Database",name:"database",tooltip:kn},{label:"Schema",name:"schema",tooltip:Mn},{label:"Warehouse",name:"warehouse",tooltip:Dn},{label:"Login Timeout",name:"login_timeout",tooltip:An},{label:"Network Timeout",name:"network_timeout",tooltip:On},{label:"Client Prefetch Threads",name:"client_prefetch_threads",tooltip:Pn}],va=[{label:"Validate Default Parameters",name:"validate_default_parameters",tooltip:Rn},{label:"Arrow Number To Decimal",name:"arrow_number_to_decimal",tooltip:Vn},{label:"Autocommit",name:"autocommit",tooltip:Hn}],fa=({properties:e,onCheckboxChange:t,onInputChange:n})=>D().createElement(D().Fragment,null,D().createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},ga.map((({label:t,name:a,tooltip:o})=>D().createElement(dn,{key:a,labelInfo:t,name:a,value:e[a],onChange:n,toolTipText:o}))),va.map((({label:n,name:a,tooltip:o})=>D().createElement("div",{className:ln},D().createElement(k.Checkbox,{name:a,color:"primary",checked:Boolean(e[a]),onChange:t}),D().createElement("span",null,n),D().createElement(k.Tooltip,{classes:{popperInteractive:rn},title:D().createElement(ha,{tooltipText:o,link:Tn})},D().createElement(Yt.Z,{fontSize:"small"}))))))),Ea="jp-create-connection-",_a={name:"",aws_secret_arn:"",connectionType:$e.Athena},Sa={show:!1,severity:"error",message:""};function La({app:e,connectionData:t,mode:n}){const a=("jupyterlab",(0,M.useContext)(zt).load("jupyterlab"));const o=(0,M.useMemo)((()=>new R({})),[]),[l,r]=(0,M.useState)(_a),[i,s]=(0,M.useState)(Sa),[c,d]=(0,M.useState)(!1),[u,m]=(0,M.useState)(Zn),[p,h]=(0,M.useState)(aa),[C,g]=(0,M.useState)(Ca);(0,M.useEffect)((()=>{if("edit"===n&&t){const{Name:e,ConnectionType:n,ConnectionProperties:a}=t,o=JSON.parse(a.PythonProperties);switch(r({name:e,aws_secret_arn:o.aws_secret_arn?o.aws_secret_arn:"",connectionType:n}),n){case $e.Athena:m({...Zn,...o});break;case $e.Redshift:h({...aa,...o});break;case $e.Snowflake:g({...Ca,...o})}}}),[n,t]);const v=(e,t)=>{r((n=>({...n,[e]:t})))},f=e=>{const{name:t,value:n}=e.target;v(t,n)},E=e=>{h((t=>({...t,_cluster_type:e.target.value})))},_=e=>{const{name:t,checked:n}=e.target;h((e=>({...e,[t]:n})))},S=(e,t)=>{const{name:n,value:a}=e.target,o=""===a?void 0:Number(a),l=isNaN(o)?a:o;switch(t){case $e.Athena:m("encryption_option"===n?e=>({...e,[n]:a,kms_key:a===un.SSE_S3?"":e.kms_key}):e=>({...e,[n]:l}));break;case $e.Redshift:h((e=>({...e,[n]:l})));break;case $e.Snowflake:g((e=>({...e,[n]:l})))}},L=()=>{const t=e.shell.currentWidget;t&&t.dispose()},y=e=>{const t=Object.fromEntries(Object.entries(e).filter((([e])=>!e.startsWith("_"))));return JSON.stringify(t)},N=(()=>{const e=window.location.host.match(/\.([a-z0-9-]+)\.sagemaker\.aws$/);return e&&e[1]?e[1]:"us-west-2"})();return D().createElement($t.Box,{sx:{p:8}},D().createElement("form",{style:{maxWidth:"700px"},onSubmit:e=>e.preventDefault()},D().createElement($t.Stack,{spacing:6},D().createElement(Xt,{level:2},"edit"===n?a.__("Edit data connection"):a.__("Add data connection")),D().createElement(D().Fragment,null,i.show&&D().createElement(k.Alert,{severity:i.severity},i.message)),D().createElement(k.Divider,{variant:"middle"}),D().createElement(Xt,{level:3},a.__("Connection Name")),D().createElement(k.TextField,{sx:{width:"25%"},label:a.__("Name"),variant:"outlined",onChange:f,value:l.name,id:`${Ea}name`,name:"name",disabled:"edit"===n}),D().createElement(k.Divider,{variant:"middle"}),D().createElement(Xt,{level:3},a.__("Source")),D().createElement($t.Stack,{direction:"row",width:"60%",height:60,spacing:5},Object.keys($e).map((e=>"edit"===n&&l.connectionType!==$e[e]?null:D().createElement(k.Button,{key:e,variant:l.connectionType===$e[e]?"contained":"outlined",sx:{flex:1,borderRadius:5},onClick:()=>{v("connectionType",$e[e])}},e)))),D().createElement(k.Divider,{variant:"middle"}),D().createElement(Xt,{level:3},a.__("Authentication")),D().createElement(dn,{key:`${Ea}aws_secret_arn`,labelInfo:a.__("Secret ARN"),name:"aws_secret_arn",value:l.aws_secret_arn,onChange:f,toolTipText:"Enter secret ARN that contains user credentials"}),D().createElement(k.Link,{href:`https://${N}.console.aws.amazon.com/secretsmanager/home?region=${N}`,target:"_blank",rel:"noopener noreferrer"},a.__("Open AWS Secrets Manager")),l.connectionType===$e.Redshift&&D().createElement(ma,{onInputChange:e=>S(e,$e.Redshift),onRadioChange:E,onCheckboxChange:_,properties:p}),D().createElement(k.Divider,{variant:"middle"}),D().createElement(Xt,{level:3},a.__("Connection Properties")),l.connectionType===$e.Athena&&D().createElement(Fn,{onInputChange:e=>S(e,$e.Athena),onCheckboxChange:e=>{const{name:t,checked:n}=e.target;m((e=>({...e,[t]:n})))},properties:u}),l.connectionType===$e.Redshift&&D().createElement(ua,{onInputChange:e=>S(e,$e.Redshift),onRadioChange:E,onCheckboxChange:_,properties:p}),l.connectionType===$e.Snowflake&&D().createElement(fa,{onInputChange:e=>S(e,$e.Snowflake),onCheckboxChange:e=>{const{name:t,checked:n}=e.target;g((e=>({...e,[t]:n})))},properties:C}),D().createElement($t.Box,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",flexWrap:"wrap",gap:3}},D().createElement(k.Button,{variant:"outlined",onClick:e=>{(async()=>{(await(0,T.showDialog)({title:"Cancel",body:D().createElement("div",null,D().createElement("p",null,"Are you sure you want to cancel adding this data connection?")),buttons:[T.Dialog.cancelButton({label:"Review"}),T.Dialog.okButton({label:"Confirm"})]})).button.accept&&L()})()}},a.__("Cancel")),D().createElement(k.Button,{variant:"contained",disabled:c,onClick:e=>{(async e=>{d(!0),e.preventDefault(),await(async()=>{let e;switch(l.connectionType){case $e.Athena:e={...u,aws_secret_arn:l.aws_secret_arn};break;case $e.Redshift:e={...p,aws_secret_arn:l.aws_secret_arn};break;case $e.Snowflake:e={...C,aws_secret_arn:l.aws_secret_arn};break;default:return}const a={name:l.name,description:"Created by XX Uno SQL Editor",connectionProperties:{PythonProperties:y(e)},connectionType:l.connectionType};let r,i;console.log("Create data connection input:",a);try{"edit"===n&&t?(r=await o.updateDataConnection(a),i=a.name+" data connection edited"):(r=await o.createDataConnection(a),i=a.name+" data connection added"),s((e=>({...e,show:!0,severity:"success",message:i})))}catch(e){i=e instanceof Error?e.message:"An unknown error occurred";const t=JSON.parse(i);s((e=>({...e,show:!0,severity:"error",message:t.error})))}var c;console.log("Create data connection response:",r),200===(null==r?void 0:r.status)&&(L(),c=i,window.dispatchEvent(new CustomEvent(qt,{detail:{message:c}})))})(),d(!1)})(e)}},"edit"===n?a.__("Update"):a.__("Create"))))))}class ya extends T.ReactWidget{constructor(e){super(),this._app=e.app,this._translator=e.translator,this._trans=this._translator.load("jupyterlab"),this._connectionData=e.connectionData,this._mode=this._connectionData?"edit":"create",this.addClass("jp-data-connections-panel")}render(){return D().createElement(Gt.Z,{theme:De()},D().createElement(zt.Provider,{value:this._translator},D().createElement(Ut,{alertTitle:this._trans.__("Internal error"),alertMessage:this._trans.__("We encountered an internal error. Please try your command again."),detailTitle:this._trans.__("Error details")},D().createElement(La,{app:this._app,connectionData:this._connectionData,mode:this._mode}))))}}const Na="data-connections-panel";var wa;!function(e){e.restoreLayout="data-explorer:restore-layout",e.addDataConnection="data-explorer:add-connection",e.editDataConnection="data-explorer:edit-connection"}(wa||(wa={}));const ba={id:s.DATA_CONNECTION_PLUGIN_ID,requires:[Bt.ITranslator,g.ILayoutRestorer,T.ICommandPalette],autoStart:!0,activate:function(e,t,n,a){console.log("Data Connections Plugin is activated");const o=t.load("jupyterlab"),{commands:l}=e,r=new T.WidgetTracker({namespace:"amazon_sagemaker_sql_editor"});let i,s;n.restore(r,{command:wa.restoreLayout,name:()=>Na});const c=async n=>{let a;a=n?o.__("Edit data connection"):o.__("Add data connection"),!i||i.isDisposed?(s=new ya({app:e,translator:t,connectionData:n}),i=new T.MainAreaWidget({content:s}),i.id=Na,i.title.label=a,i.title.icon=ue,i.title.closable=!0):(i.close(),s=new ya({app:e,translator:t,connectionData:n}),i=new T.MainAreaWidget({content:s}),i.id=Na,i.title.label=a,i.title.icon=ue,i.title.closable=!0),r.has(i)||r.add(i),i.isAttached||e.shell.add(i,"main"),i.content.update(),e.shell.activateById(i.id)};l.addCommand(wa.restoreLayout,{execute:async e=>{c()}}),l.addCommand(wa.editDataConnection,{execute:async e=>{const t=e.connectionData;if(t){const e={Name:t.name,Description:t.description,ConnectionType:t.connectionType,ConnectionProperties:{PythonProperties:t.connectionProperties.PythonProperties}};c(e)}else console.error("Connection data not found.")}}),l.addCommand(wa.addDataConnection,{execute:async()=>{await c()},label:o.__("Add data connection")}),a.addItem({command:wa.addDataConnection,category:"tutorial"})}},xa="Results are cached",Ta=e=>{const{connections:t,onConnectionClick:n,successMessage:a}=e,[o,l]=(0,M.useState)(!1);return(0,M.useEffect)((()=>{a&&l(!0)}),[a]),D().createElement(Qe.Z,{component:"div"},D().createElement(Ve.Z,null,D().createElement(je.Z,null,D().createElement(Fe.Z,null,D().createElement(Ze.Z,null,"Name"))),D().createElement(D().Fragment,null,o&&D().createElement(k.Alert,{severity:"success",onClose:()=>{l(!1)}},a)),D().createElement(He.Z,null,t.map((e=>D().createElement(Fe.Z,{key:e.name,sx:{"& td, & th":{border:0},cursor:"pointer"},hover:!0,onClick:()=>(e=>{n(e)})(e)},D().createElement(Ze.Z,{sx:{display:"flex",alignItems:"center",gap:"6px"},scope:"row"},D().createElement(Qt,{connectionType:e.type}),e.name)))))))},Ia=e=>{const{onConnectionClick:t,showAddConnectionButton:n=!1,refreshKey:a}=e,o=Q(),[l,r]=(0,M.useState)(!0),[i,s]=(0,M.useState)(),[c,d]=(0,M.useState)([]),[u,m]=(0,M.useState)(""),p=c.length>0,h=async(e=!1)=>{var t;try{r(!0);const n=await o.getDataSources({path:"",pageSize:-1,refresh:e,enableDefaultAthena:j.enableDefaultAthena});d((null!==(t=n.nodeList)&&void 0!==t?t:[]).map((e=>{var t,n,a,o;return{name:e.name,source:null!==(n=null===(t=e.nodeData)||void 0===t?void 0:t.source)&&void 0!==n?n:Pe.Glue,type:null!==(o=null===(a=e.nodeData)||void 0===a?void 0:a.type)&&void 0!==o?o:Ae.Athena}}))),r(!1)}catch(e){r(!1),s(e)}};(0,M.useEffect)((()=>{h()}),[]),(0,M.useEffect)((()=>{void 0!==a&&C()}),[a]);const C=()=>{o.refreshDataConnections(),h(!0)};return(0,M.useEffect)((()=>{const e=e=>{h(!0),m(e.detail.message)};return window.addEventListener(qt,e),()=>{window.removeEventListener(qt,e)}}),[]),D().createElement("div",{className:st},D().createElement("div",{className:ct},p&&D().createElement(Ta,{connections:c,onConnectionClick:t,successMessage:u}),!p&&!l&&D().createElement(D().Fragment,null,!n&&D().createElement("p",{className:mt},"No data connections to display.\n\n\nPlease contact your admin, to grant you access to, or to configure a data connection.\n\nAdditionally, if you have Athena already setup in your account, you can enable default Athena connection in the settings to get started quickly,\n\n1. Ensure your role has permissions to access athena and glue catalogs\n2. Go to 'Settings' in jupyter lab menu bar -> Settings Editor -> Search for 'Data Discovery' and check 'Enable default Athena connection' \n\nFor more details, refer: https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-sql-extension.html"),n&&D().createElement($t.Stack,{sx:{p:6},spacing:5},D().createElement($t.Box,{sx:{border:"1px solid #ccc",p:"16px 32px",display:"flex",flexDirection:"column",textAlign:"center",gap:2}},"No data to display.",D().createElement(Re.Z,{variant:"contained",onClick:()=>{e.app.commands.execute(wa.addDataConnection)}},"Add data connection")),D().createElement(k.Alert,{icon:!1,severity:"info",className:mt},"Please contact your admin, to grant you access to, or to configure a data connection.\n\nAdditionally, if you have Athena already setup in your account, you can enable default Athena connection in the settings to get started quickly,\n\n1. Ensure your role has permissions to access athena and glue catalogs\n2. Go to 'Settings' in jupyter lab menu bar -> Settings Editor -> Search for 'Data Discovery' and check 'Enable default Athena connection' \n\nFor more details, refer: https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-sql-extension.html"))),D().createElement(Ft,{error:i})),D().createElement(Ke,{isLoading:l}),D().createElement("div",{className:dt},D().createElement(Re.Z,{sx:{textTransform:"unset",gap:"4px",flexShrink:0},size:"small",onClick:()=>C()},D().createElement(pe.react,{elementPosition:"center",tag:"span"}),"Refresh"),D().createElement("p",{className:ut,title:xa},xa)))};var ka=n(4799),Ma=n(4486),Da=n(3931),Aa=n(4821),Oa=n(2408),Pa=n.n(Oa);function Ra(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}const Va={flex:1,width:"100%",height:"100%",minHeight:0,minWidth:0,flexBasis:0},Ha=D().forwardRef(((e,t)=>{const{ref:n,width:a,height:o}=Pa()();return D().createElement("div",{style:Va,ref:Ra(n,t)},a&&o?e.children({width:a,height:o}):null)})),Za=e=>{const[t,n]=(0,M.useState)(null),[a,o]=(0,M.useState)(null),l=null!==t,r=(null==a?void 0:a.nodeType)===Oe.Table||(null==a?void 0:a.nodeType)===Oe.View,[i,s]=(0,M.useState)(null);(0,M.useEffect)((()=>{var t;0===(null===(t=e.expandedNodeSet)||void 0===t?void 0:t.size)&&(null==i||i.closeAll())}),[e.expandedNodeSet]);const c=t=>{var n,a;const o=e.nodeIdToNodeMap.get(t);if(o){const t=new Set(e.expandedNodeSet);t.has(o)?t.delete(o):(t.add(o),null===(n=e.onNodeExpand)||void 0===n||n.call(e,o)),null===(a=e.setExpandedNodeSet)||void 0===a||a.call(e,t)}},d=()=>{n(null),o(null)},u=(0,M.useMemo)((()=>function(e){return({node:t,style:n,dragHandle:a})=>{var o;const l=!!(null===(o=t.data.nodeData)||void 0===o?void 0:o.sampleQuery);return D().createElement("div",{ref:a,style:n,className:(0,Y.cx)(Zt,t.state),onClick:()=>t.isInternal&&t.toggle()},D().createElement(Qa,{node:t}),D().createElement(jt,{nodeType:t.data.nodeType}),D().createElement("span",null,t.data.name),l&&D().createElement(ka.Z,{sx:{padding:"4px",color:"inherit"},onClick:n=>(n=>{var a,o;n.preventDefault(),n.stopPropagation(),null===(a=e.setMenuAnchorEl)||void 0===a||a.call(e,n.currentTarget),null===(o=e.setMenuSelectedNode)||void 0===o||o.call(e,t.data),t.select()})(n)},D().createElement(we.react,{elementPosition:"center",tag:"span"})))}}({setMenuAnchorEl:n,setMenuSelectedNode:o})),[]),m=e=>{var t;return e.isLeaf||e.nodeType===Oe.Table||e.nodeType===Oe.View?null:null!==(t=e.nodeList)&&void 0!==t?t:null};return D().createElement(D().Fragment,null,D().createElement(Ha,null,(t=>{var n;return D().createElement(Aa.Tree,{...t,className:Vt,rowClassName:Ht,ref:e=>s(e),data:null===(n=e.rootNode)||void 0===n?void 0:n.nodeList,idAccessor:"path",childrenAccessor:m,onToggle:c,disableDrag:!0,disableMultiSelection:!0,openByDefault:!1,rowHeight:32},u)})),D().createElement(Ma.Z,{id:"long-menu",anchorEl:t,open:l,onClose:()=>d()},D().createElement(Da.Z,{key:"query-in-notebook",onClick:()=>(d(),void(a&&e.onQueryInNotebook(a)))},"Query in notebook"),r&&D().createElement(Da.Z,{key:"preview",onClick:()=>(d(),void(a&&e.onPreviewNode(a)))},"Preview table details")))},Qa=({node:e})=>e.isLeaf?D().createElement("span",null):D().createElement(D().Fragment,null,e.isOpen?D().createElement(Ee.react,{elementPosition:"center",tag:"span"}):D().createElement(_e.react,{elementPosition:"center",tag:"span"}));function ja(e,t,n){var a;const o={...e,path:(null==t?void 0:t.path)?t.path+"/"+e.name:e.name,parent:t,nodeList:[]};return o.nodeList=(null!==(a=e.nodeList)&&void 0!==a?a:[]).map((e=>ja(e,o,n))),n.set(o.path,o),o.nodeList=o.isLeaf?void 0:o.nodeList,o}var Fa;function $a(e,t){return`${e===h.connectionName?`${s.SQL_MAGIC_COMMAND} ${function(e="primary"){return`--connection-properties '{"${p.ConnectionType}": "ATHENA", "${p.WorkGroup}": "${e}"}'`}(j.workGroup)}`:`${s.SQL_MAGIC_COMMAND} ${s.SQL_CONNECTION_METASTORE_ID_ARG_KEY} ${e} ${s.SQL_CONNECTION_METASTORE_TYPE_ARG_KEY} ${a.GlueConnection}`}\n\n\n${t}`}!function(e){e[e.Home=0]="Home",e[e.Data=1]="Data",e[e.DataConnection=2]="DataConnection",e[e.Search=3]="Search"}(Fa||(Fa={}));const Ba="Results are cached",Ga=e=>{const{connection:t,openNotebookPanelWithSource:n,onPreviewNode:a}=e,[o,l]=(0,M.useState)(!0),[r,i]=(0,M.useState)(),[s,c]=(0,M.useState)(new Set),d=Q(),[u,m]=(0,M.useState)(),p=(0,M.useMemo)((()=>new Map),[]),[h,C]=(0,M.useState)(null),g=(0,M.useMemo)((()=>new Map),[]),v=async(e=!1)=>{try{l(!0);const n=await d.getDataSources({path:t.name,pageSize:-1,refresh:e,enableDefaultAthena:j.enableDefaultAthena});n.name=t.name;const a=ja(n,null,p);m(a),g.set(a,!0),l(!1)}catch(e){l(!1),i(e)}},f=async e=>{var t;if(!g.get(e))try{l(!0);const n=await d.getDataSources({path:e.path,pageSize:-1,enableDefaultAthena:j.enableDefaultAthena});e.nodeList=null===(t=n.nodeList)||void 0===t?void 0:t.map((t=>ja(t,e,p))),g.set(e,!0),l(!1)}catch(e){l(!1),i(e)}};(0,M.useEffect)((()=>{v()}),[]);const E=()=>{C(null)};return D().createElement("div",{className:(0,Y.cx)(pt,"data-connection-container")},D().createElement("div",{className:Ct},D().createElement("div",{className:ht},D().createElement(Qt,{connectionType:t.type}),t.name,D().createElement(k.IconButton,{onClick:e=>{C(e.currentTarget)},"aria-label":"More options",sx:{flexShrink:0,flexGrow:0}},D().createElement(we.react,null)),D().createElement(k.Menu,{anchorEl:h,open:Boolean(h),onClose:E},D().createElement(k.MenuItem,{onClick:()=>{E(),v(!0)}},"Refresh"),D().createElement(k.MenuItem,{onClick:()=>(async t=>{let n;E();try{n=await d.getDataConnection(t)}catch(e){i(e)}e.app.commands.execute(wa.editDataConnection),e.app.commands.execute(wa.editDataConnection,{connectionData:null==n?void 0:n.data})})(t.name)},"Edit"),D().createElement(k.MenuItem,{onClick:()=>(async t=>{E(),(await(0,T.showDialog)({title:"Delete",body:D().createElement("div",null,D().createElement("p",null,"Are you sure you want to permanently delete data connection: ",t,"?")),buttons:[T.Dialog.cancelButton({label:"Cancel"}),T.Dialog.okButton({label:"Delete"})]})).button.accept&&(async t=>{var n;try{await d.deleteDataConnection(t)}catch(e){i(e)}null===(n=e.afterDeleteConnection)||void 0===n||n.call(e)})(t)})(t.name)},"Delete"))),D().createElement(Ft,{error:r}),D().createElement(Za,{connection:t,rootNode:u,expandedNodeSet:s,nodeIdToNodeMap:p,setExpandedNodeSet:c,onNodeExpand:f,onQueryInNotebook:t=>{var a,o;if(n){const l=$a(e.connection.name,null!==(o=null===(a=t.nodeData)||void 0===a?void 0:a.sampleQuery)&&void 0!==o?o:"");n(l)}},onPreviewNode:async e=>{a&&(await f(e),a(e))}})),D().createElement(Ke,{isLoading:o}),D().createElement("div",{className:dt},D().createElement(Re.Z,{sx:{textTransform:"unset",gap:"4px",flexShrink:0},size:"small",onClick:()=>(c(new Set),g.clear(),p.clear(),void v(!0))},D().createElement(pe.react,{elementPosition:"center",tag:"span"}),"Refresh"),D().createElement("p",{className:ut,title:Ba},Ba)))};var za=n(1057),Ua=n(6540);const qa="ROOT",Wa=e=>{const{breadcrumb:t,onBreadcrumbClick:n}=e;return D().createElement("div",{className:Xe},D().createElement(Xa,{onClick:()=>null==n?void 0:n(qa)},D().createElement(Te.react,{elementPosition:"center",tag:"span"})),D().createElement("span",null,"/"),t&&D().createElement(Xa,{onClick:()=>null==n?void 0:n(t)},t))},Xa=e=>{const{children:t,onClick:n}=e;return D().createElement("div",{className:Ye,onClick:n},t)},Ya=e=>{const{headerLabel:t,onBackButtonClick:n,searchTerm:a,onSearchTermChange:o,showBackButton:l=!1,showAddConnectionButton:r=!1}=e,i=e.activeChild===Fa.Data||e.activeChild===Fa.DataConnection,s=e.activeChild===Fa.DataConnection?e.connectionName:void 0;return D().createElement("div",{className:et},D().createElement("div",{className:tt},l&&n&&D().createElement(ka.Z,{sx:{padding:"4px"},onClick:()=>n(),"data-testid":"doraDataBackButton"},D().createElement(me.react,{elementPosition:"center",tag:"span"})),D().createElement(ue.react,{elementPosition:"center",tag:"span"}),D().createElement("span",{className:at},t)),D().createElement("div",{className:nt},D().createElement(Jt.Z,{className:ot,placeholder:"Search...",variant:"outlined",value:e.searchTerm,size:"small",InputProps:{startAdornment:D().createElement(za.Z,{position:"start"},D().createElement(be.react,{elementPosition:"center",tag:"span",width:"24px",height:"24px"})),endAdornment:a&&D().createElement(za.Z,{position:"end"},D().createElement(ka.Z,{onClick:()=>{null==o||o("")},size:"small"},D().createElement(ve.react,{elementPosition:"center",tag:"span"})))},onChange:t=>{var n;const a=t.target.value;null===(n=e.onSearchTermChange)||void 0===n||n.call(e,a)}}),r&&D().createElement(k.Button,{variant:"contained",color:"primary",sx:{minWidth:"auto",aspectRatio:"1"},onClick:()=>{e.app.commands.execute(wa.addDataConnection)}},D().createElement(Ua.Z,{fontSize:"small"}))),i&&D().createElement(Wa,{breadcrumb:s,onBreadcrumbClick:e=>{e===qa&&(null==n||n())}}))},Ka=e=>D().createElement("div",{className:lt},D().createElement("h2",{className:rt},"Assets"),D().createElement("button",{className:it,onClick:()=>e.onChildActionClick(Fa.Data),"data-testid":"doraHomeDataButton"},D().createElement(ue.react,{elementPosition:"center"}),D().createElement("span",null,"Data"))),Ja=e=>{const{data:t,columns:n}=e;return D().createElement(k.Table,{size:"small"},D().createElement(k.TableHead,null,D().createElement(k.TableRow,{className:Ue},n.map((e=>D().createElement(k.TableCell,{key:e},e))))),D().createElement(k.TableBody,null,t.map((e=>D().createElement(k.TableRow,{key:e.name,className:Ue},D().createElement(k.TableCell,null,e.name),D().createElement(k.TableCell,null,e.value))))))},eo=e=>{var t,n,a,o;const{node:l}=e,r=(null!==(t=l.nodeList)&&void 0!==t?t:[]).filter((e=>e.nodeType===Oe.Column)).map((e=>{var t,n;return{name:e.name,value:null!==(n=null===(t=e.nodeData)||void 0===t?void 0:t.columnType)&&void 0!==n?n:""}})),i=Object.entries(null!==(a=null===(n=l.nodeData)||void 0===n?void 0:n.tableMetadata)&&void 0!==a?a:{}).map((([e,t])=>({name:e,value:t})));return D().createElement("div",{className:xt},D().createElement("div",{className:Tt},D().createElement(ka.Z,{sx:{padding:"4px"},onClick:()=>{var t;null===(t=e.onCloseClick)||void 0===t||t.call(e)},"data-testid":"previewCloseButton"},D().createElement(me.react,{elementPosition:"center",tag:"span"})),D().createElement("span",{className:It,"data-testid":"previewHeaderText"},D().createElement(jt,{nodeType:l.nodeType}),D().createElement("span",{className:kt},l.name))),D().createElement("div",{className:Mt},(null===(o=l.metadata)||void 0===o?void 0:o.description)&&D().createElement("div",{className:Dt},D().createElement("div",{className:At},l.metadata.description)),r&&r.length>0&&D().createElement("div",{className:Ot},D().createElement("div",{className:Pt},"Columns"),D().createElement(Ja,{data:r,columns:["Name","Type"]})),i&&i.length>0&&D().createElement("div",{className:Ot},D().createElement("div",{className:Pt},"Metadata"),D().createElement(Ja,{data:i,columns:["Name","Value"]}))),D().createElement("div",{className:Rt},D().createElement(Re.Z,{sx:{textTransform:"unset",gap:"4px",flexShrink:0},variant:"contained",disableElevation:!0,size:"small",onClick:()=>{var t,n,a,o;if(null===(t=l.nodeData)||void 0===t?void 0:t.sampleQuery){const t=$a(e.connection.name,null!==(a=null===(n=l.nodeData)||void 0===n?void 0:n.sampleQuery)&&void 0!==a?a:"");null===(o=e.openNotebookPanelWithSQLSource)||void 0===o||o.call(e,t)}},"data-testid":"previewQueryButton"},"Query")))};var to=n(7144);const no=/<mark>/gi,ao=/<\/mark>/gi,oo=/<mark>(.*?)<\/mark>/gi,lo=e=>{const[t,n]=(0,M.useState)(""),[a,o]=(0,M.useState)(void 0),[l,r]=(0,M.useState)(null),i=null!==l,s=t.length>=3,{isLoading:c,searchNodes:d,searchIndexes:u,error:m}=((e,t)=>{const[n,a]=(0,M.useState)(void 0),[o,l]=(0,M.useState)(void 0),[r,i]=(0,M.useState)(),[s,c]=(0,M.useState)(!1),d=Q();return function(e,t){const n=(0,M.useRef)(e);(0,M.useEffect)((()=>{n.current=e})),(0,M.useEffect)((()=>{function e(){n.current()}if(null!==t){e();const n=setInterval(e,t);return()=>clearInterval(n)}}),[t])}((async()=>{try{const t=await d.search({highlight:!0,term:e,pageSize:-1,enableDefaultAthena:j.enableDefaultAthena});return a(t.data.hits),l(t.data.indexes),202===t.status?c(!0):c(!1),i(void 0),t}catch(e){i(e),c(!1)}}),s?3e3:null),(0,M.useEffect)((()=>{c(!(!e||!t))}),[e]),{isLoading:s,searchNodes:n,searchIndexes:o,error:r}})(t,s),p=null==u?void 0:u.filter((e=>e.indexStatus===Be.Failed)),h=p&&p.length>0,C=s&&void 0!==d&&!c,g=void 0!==d&&d.length>=0?d.length:void 0,v=(0,M.useCallback)((0,to.Z)((e=>{n(e)}),1e3),[]);(0,M.useEffect)((()=>{var t;v(null!==(t=e.searchTerm)&&void 0!==t?t:"")}),[e.searchTerm]);const f=()=>{r(null)},E=(0,M.useCallback)(((e,t)=>{e.preventDefault(),e.stopPropagation(),r(e.currentTarget),o(t)}),[]),_=h&&D().createElement(k.Tooltip,{title:`Indexing failed for ${p.length} connection(s)`},D().createElement("span",{style:{flexShrink:0}},D().createElement(I.infoIcon.react,{elementPosition:"center",tag:"span"})));return D().createElement("div",{className:ft},!s&&D().createElement("span",{className:Et,"data-testid":"searchResultAtLeastThreeCharacters"},"Please type at least three characters to search..."),D().createElement(Ft,{error:m}),c&&D().createElement(D().Fragment,null,D().createElement(k.LinearProgress,{style:{margin:"0 24px"}}),D().createElement("span",{className:Et,"data-testid":"searchResultLoading"},`Loading search results for ${t}`,_)),C&&D().createElement(D().Fragment,null,D().createElement("span",{className:Et,"data-testid":"searchResultCountMessage"},"Results for ",D().createElement("strong",null,t)," ",`${void 0!==g?`(${g})`:""}${0===g?". Please try different search term.":""}`,_),D().createElement(ro,{groupLabel:"Databases and schemas",nodes:d,nodeTypes:[Oe.Database,Oe.Schema],onMenuClick:E}),D().createElement(ro,{groupLabel:"Tables and views",nodes:d,nodeTypes:[Oe.Table,Oe.View],onMenuClick:E})),D().createElement(k.Menu,{id:"search-item-menu",anchorEl:l,open:i,onClose:()=>f(),"data-testid":"searchResultItemMenu"},D().createElement(k.MenuItem,{key:"query-in-notebook",onClick:()=>(()=>{var t;if(f(),a&&e.openNotebookPanelWithSource){const n=$a(a.data.connectionName,null!==(t=a.data.sampleQuery)&&void 0!==t?t:"");e.openNotebookPanelWithSource(n)}})()},"Query in notebook")))},ro=e=>{const[t,n]=(0,M.useState)(!1),a=e=>{const t=[],n=e.match(oo);let a=0,o=e;return null==n||n.forEach((e=>{const[n,l]=o.split(e);n&&t.push(D().createElement(D().Fragment,{key:a++},n));const r=e.replace(no,"").replace(ao,"");t.push(D().createElement("mark",null,D().createElement("strong",{key:a++},r))),o=l})),o&&t.push(D().createElement(D().Fragment,{key:a++},o)),t},o=(0,M.useMemo)((()=>{return n(!1),t=e.nodes,o=e.nodeTypes,t.filter((e=>o.some((t=>t===e.nodeType)))).map((t=>{const n=t.data.highlightedName?a(t.data.highlightedName):D().createElement(D().Fragment,null,t.name),o=t.data.highlightedPath?a(t.data.highlightedPath):D().createElement(D().Fragment,null,t.data.path),l=!!t.data.sampleQuery;return D().createElement("div",{className:yt,key:t.data.path+t.name+t.nodeType,"data-testid":"searchResultItemContainer"},D().createElement("div",{className:Nt},D().createElement("span",{className:wt},D().createElement(jt,{nodeType:t.nodeType}),D().createElement("span",{className:bt},n)),D().createElement("span",{className:bt},o)),l&&D().createElement(k.IconButton,{sx:{padding:"4px",flexShrink:0},onClick:n=>e.onMenuClick(n,t),"data-testid":"searchResultItemMenuButton"},D().createElement(we.react,{elementPosition:"center",tag:"span"})))}));var t,o}),[e.nodes]),l=(0,M.useMemo)((()=>t?o:o.slice(0,5)),[o,t]),r=!t&&o.length>5;return l.length>0?D().createElement("div",{className:_t},D().createElement("div",{className:St},e.groupLabel),D().createElement("div",{className:Lt},l,r&&D().createElement(k.Button,{onClick:()=>{n(!0)}},"View all (",o.length,")"))):null},io=e=>{var t;const[n,a]=(0,M.useState)([Fa.Data]),[o,l]=(0,M.useState)(0),[r,i]=(0,M.useState)(),[s,c]=(0,M.useState)(""),[d,u]=(0,M.useState)(),m=n.length>1,p=null!==(t=n[0])&&void 0!==t?t:Fa.Data,h=e=>{e!==p&&a([e,...n])},C=()=>{if(n.length>=2){const e=n.slice(1);a(e),c("")}};return D().createElement(Z,null,D().createElement("div",{className:Je},D().createElement(Ya,{app:e.app,showAddConnectionButton:!0,headerLabel:"Data",searchTerm:s,activeChild:p,connectionName:null==r?void 0:r.name,showBackButton:m,onBackButtonClick:C,onSearchTermChange:e=>{c(e),e?h(Fa.Search):C()}}),p===Fa.Home&&D().createElement(Ka,{onChildActionClick:e=>h(e)}),p===Fa.Data&&D().createElement(Ia,{app:e.app,showAddConnectionButton:!0,refreshKey:o,onConnectionClick:e=>{i(e),h(Fa.DataConnection)}}),p===Fa.DataConnection&&r&&D().createElement(Ga,{app:e.app,connection:r,openNotebookPanelWithSource:e.openNotebookPanelWithSource,onPreviewNode:u,afterDeleteConnection:()=>{i(void 0),h(Fa.Data),l((e=>e+1))}}),p===Fa.Search&&s&&D().createElement(lo,{searchTerm:s,openNotebookPanelWithSource:e.openNotebookPanelWithSource}),d&&r&&D().createElement(eo,{connection:r,node:d,onCloseClick:()=>u(void 0),openNotebookPanelWithSQLSource:e.openNotebookPanelWithSource})))};class so extends T.ReactWidget{constructor(e){super(),this.props=e}render(){return D().createElement(Ie.ThemeProvider,{theme:De()},D().createElement(io,{...this.props}))}}const co={id:s.DORA_SIDE_PANEL_PLUGIN_ID,requires:[T.ICommandPalette,T.IThemeManager],autoStart:!0,activate:async(e,t,n)=>{console.log("Data Discovery side panel plugin activated!");const a=e.shell;a instanceof g.LabShell&&a.restored.then((async()=>{e.commands.addCommand("dora:side-panel:open",{label:"Data Discovery Side Panel",caption:"Data Discovery Side Panel",execute:t=>{e.shell.activateById(a.id)}});const a=new so({app:e,openNotebookPanelWithSource:t=>async function(e,t){var n,a;if(e.shell instanceof g.LabShell){const l=e.shell;let r;await l.restored,l.currentWidget&&l.currentWidget instanceof o.NotebookPanel?r=l.currentWidget:(r=await e.commands.execute("notebook:create-new"),await new Promise((e=>{r.sessionContext.kernelChanged.connect(((t,n)=>{e(n)}))})));const i=r.content,c=await async function(e,t){if(e.shell instanceof g.LabShell){const n=e.shell;if(await n.restored,n.currentWidget&&n.currentWidget instanceof o.NotebookPanel){const e=n.currentWidget.content.widgets;for(const n of e)if(n instanceof C.CodeCell&&n.model&&n.model.sharedModel.getSource().includes(t))return!0}}return!1}(e,s.LOAD_SQL_MAGIC_COMMAND);c||(""!==(null===(n=i.activeCell)||void 0===n?void 0:n.model.sharedModel.getSource().trim())&&o.NotebookActions.insertBelow(i),null===(a=i.activeCell)||void 0===a||a.model.sharedModel.setSource(s.LOAD_SQL_MAGIC_COMMAND)),o.NotebookActions.insertBelow(i),setTimeout((()=>{var n,a;null===(a=null===(n=i.activeCell)||void 0===n?void 0:n.editor)||void 0===a||a.model.sharedModel.setSource(t),e.commands.execute(s.SQL_FORMAT_COMMAND_ID),i.activeCell instanceof C.CodeCell&&E.highlightSQLCell(i.activeCell)}))}}(e,t)});a.id="dora-side-panel",a.title.caption="Data Discovery",a.title.icon=de,n.themeChanged.connect((()=>{a.update()}),void 0),e.shell.add(a,"left"),t.addItem({command:"dora:side-panel:open",category:"Launcher"})}))}};function uo(){return{name:`${d.LSP_CONFIG_CONNECTION_IDENTIFIER}`,adapter:"json",filename:`${d.LSP_SCHEMA_FILE_DIR}/${d.LSP_CENTRAL_SCHEMA_FILE_NAME}`,projectPaths:["."],ssh:null}}const mo=[{id:s.DORA_SQL_EDITING_PLUGIN_ID,autoStart:!0,requires:[o.INotebookTracker,l.ISettingRegistry,r.ILSPCodeExtractorsManager],activate:(e,t,n,a)=>{console.log("JupyterLab extension amazon_sagemaker_sql_editor is activated!"),F(n),n.pluginChanged.connect(((e,t)=>{t===s.DORA_SIDE_PANEL_PLUGIN_ID&&F(n)})),async function(e,t){e.shell instanceof g.LabShell&&(await e.shell.restored,t.get(`${s.JUPYTERLAB_LSP_EXTENSION_ID}:plugin`,"language_servers").then((e=>{const t=e.composite;if(L(t,"sql-language-server")&&L(t["sql-language-server"],"serverSettings")&&L(t["sql-language-server"].serverSettings,"sqlLanguageServer.connections")){const e=t["sql-language-server"].serverSettings["sqlLanguageServer.connections"];for(const t of e)if(L(t,"name")&&t.name===d.LSP_CONFIG_CONNECTION_IDENTIFIER)return;e.push(uo()),t["sql-language-server"].serverSettings["sqlLanguageServer.connections"]=e}else{if(null===t||"object"!=typeof t)throw new Error(`Could not read settings for ${s.JUPYTERLAB_LSP_EXTENSION_ID}:plugin`);t["sql-language-server"]={serverSettings:{"sqlLanguageServer.connections":[uo()]}}}return t})).then((e=>{if(void 0!==e)return t.set(`${s.JUPYTERLAB_LSP_EXTENSION_ID}:plugin`,"language_servers",e)})),t.get(`${s.JUPYTERLAB_LSP_EXTENSION_ID}:completion`,"continuousHinting").then((e=>{void 0!==e.user&&null!==e.user||t.set(`${s.JUPYTERLAB_LSP_EXTENSION_ID}:completion`,"continuousHinting",!0).catch((e=>{console.error(`Unable to enable continuousHinting in ${s.JUPYTERLAB_LSP_EXTENSION_ID}:completion, SQL autocompletion may not work`)}))})),t.get(`${s.JUPYTERLAB_COMPLETER_EXTENSION_ID}:manager`,"autoCompletion").then((e=>{void 0!==e.user&&null!==e.user||t.set(`${s.JUPYTERLAB_COMPLETER_EXTENSION_ID}:manager`,"autoCompletion",!0).catch((e=>{console.error(`Unable to enable autoCompletion in ${s.JUPYTERLAB_COMPLETER_EXTENSION_ID}:manager, SQL autocompletion may not work`)}))})))}(e,n),new N(e).setFormattingAction(t),new E(e).setSyntaxHighlightingAction(),new b(a).registerSqlLspExtractor()}},ce,co,ba]},5318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6540:(e,t,n)=>{"use strict";var a=n(5318);t.Z=void 0;var o=a(n(4938)),l=n(5893);t.Z=(0,o.default)((0,l.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},4721:(e,t,n)=>{"use strict";var a=n(5318);t.Z=void 0;var o=a(n(4938)),l=n(5893);t.Z=(0,o.default)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info")},4938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.createSvgIcon}});var a=n(4040)}}]);