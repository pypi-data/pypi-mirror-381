# GridWorldPy

[![PyPI version](https://badge.fury.io/py/gridworldpy.svg)](https://badge.fury.io/py/gridworldpy)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

ä¸€ä¸ªçµæ´»ä¸”äº¤äº’å¼çš„ç½‘æ ¼ä¸–ç•Œç¯å¢ƒï¼Œä¸“ä¸ºå¼ºåŒ–å­¦ä¹ å®éªŒå’Œæ•™è‚²ç›®çš„è®¾è®¡ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ¯ **çµæ´»çš„ç¯å¢ƒé…ç½®**ï¼šæ”¯æŒè‡ªå®šä¹‰ç½‘æ ¼å¤§å°ã€å¥–åŠ±å‡½æ•°å’Œç»ˆæ­¢æ¡ä»¶
- ğŸ¨ **å®æ—¶å¯è§†åŒ–**ï¼šåŸºäºtkinterçš„ç›´è§‚å›¾å½¢ç•Œé¢ï¼Œæ”¯æŒå®æ—¶æ¸²æŸ“
- âš¡ **äº¤äº’æ§åˆ¶**ï¼šæ”¯æŒé”®ç›˜æ§åˆ¶å’Œè‡ªåŠ¨æ‰§è¡Œæ¨¡å¼
- ğŸ® **ç­–ç•¥å¯è§†åŒ–**ï¼šç›´è§‚æ˜¾ç¤ºåŠ¨ä½œæ¦‚ç‡åˆ†å¸ƒå’ŒçŠ¶æ€ä»·å€¼
- ğŸš« **çŠ¶æ€ç¦ç”¨**ï¼šæ”¯æŒç¦ç”¨ç‰¹å®šçŠ¶æ€åˆ›å»ºéšœç¢ç‰©
- ğŸ“Š **é¢œè‰²æ˜ å°„**ï¼šæ ¹æ®å¥–åŠ±å€¼å’ŒçŠ¶æ€ä»·å€¼è‡ªåŠ¨è°ƒæ•´é¢œè‰²æ˜¾ç¤º

## ğŸš€ å®‰è£…

ä½¿ç”¨pipä»PyPIå®‰è£…ï¼š

```bash
pip install gridworldpy
```

æˆ–è€…ä»æºç å®‰è£…ï¼š

```bash
git clone https://github.com/hitlic/gridworldpy.git
cd gridworldpy
pip install -e .
```

## ğŸ“– å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

```python
from gridworldpy import GridWorldEnv

# åˆ›å»ºä¸€ä¸ª5x5çš„ç½‘æ ¼ä¸–ç•Œ
env = GridWorldEnv(grid_size=(5, 5), keyboard_control=True)
# è®¾ç½®éšæœºå¥–åŠ±
env.set_rewards('random')
# è®¾ç½®éšæœºç­–ç•¥
env.set_policy('random')
# æ¸²æŸ“ç¯å¢ƒ
env.render()
# æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œ
obs, reward, done, is_effective, info = env.step(1)  # å‘ä¸Šç§»åŠ¨

```

### è‡ªå®šä¹‰é…ç½®

```python
from gridworldpy import GridWorldEnv

# åˆ›å»ºå¸¦è‡ªå®šä¹‰é…ç½®çš„ç¯å¢ƒ
env = GridWorldEnv(
    grid_size=(4, 4),
    keyboard_control=True,      # å¯ç”¨é”®ç›˜æ§åˆ¶
    terminal_condition=(3, 3),  # ç›®æ ‡ä½ç½®ä¸º(3,3)
    cell_size=150,              # æ¯ä¸ªæ ¼å­150åƒç´ 
    circle_radius=40,           # å¥–åŠ±åœ†åœˆåŠå¾„40åƒç´ 
)

# è®¾ç½®ç‰¹å®šä½ç½®çš„å¥–åŠ±
rewards = [
    ((0, 0), -0.1),  # èµ·å§‹ä½ç½®å°è´Ÿå¥–åŠ±
    ((1, 1), -1.0),  # é™·é˜±ï¼šå¤§è´Ÿå¥–åŠ±
    ((3, 3), 1.0),   # ç›®æ ‡ï¼šå¤§æ­£å¥–åŠ±
]
env.set_rewards(rewards)

# è®¾ç½®ç‰¹å®šçš„ç­–ç•¥
policy = [
    ((0, 0), [0.1, 0.2, 0.2, 0.2, 0.3]),  # ä½ç½®(0,0)çš„åŠ¨ä½œæ¦‚ç‡
    ((1, 0), [0.0, 0.0, 0.5, 0.0, 0.5]),  # ä½ç½®(1,0)çš„åŠ¨ä½œæ¦‚ç‡
]
env.set_policy(policy)

# ç¦ç”¨æŸäº›çŠ¶æ€ï¼ˆåˆ›å»ºéšœç¢ç‰©ï¼‰
env.disable_states([(1, 2), (2, 1)])

# æ¸²æŸ“ç¯å¢ƒ
env.render()
```

### å¸¦çŠ¶æ€ä»·å€¼çš„å¯è§†åŒ–

```python
# åˆ›å»ºçŠ¶æ€ä»·å€¼åˆ—è¡¨
state_values = [
    ((0, 0), 0.1), ((0, 1), 0.2), ((0, 2), 0.3),
    ((1, 0), 0.4), ((1, 1), -0.5), ((1, 2), 0.6),
    ((2, 0), 0.7), ((2, 1), 0.8), ((2, 2), 0.9),
]

# æ¸²æŸ“æ—¶åŒ…å«çŠ¶æ€ä»·å€¼
env.render(state_values=state_values)
```

## ğŸ® æ§åˆ¶æ–¹å¼

### é”®ç›˜æ§åˆ¶æ¨¡å¼

å½“`keyboard_control=True`æ—¶ï¼Œä½¿ç”¨ç©ºæ ¼é”®æ§åˆ¶æ‰§è¡Œï¼š

- æŒ‰**ç©ºæ ¼é”®**æ‰§è¡Œä¸‹ä¸€æ­¥
- çª—å£ä¼šæ˜¾ç¤ºå½“å‰æ­¥æ•°å’Œç¯å¢ƒçŠ¶æ€
- ç¨‹åºä¼šç­‰å¾…ç”¨æˆ·è¾“å…¥åç»§ç»­

### è‡ªåŠ¨æ¨¡å¼

å½“`keyboard_control=False`æ—¶ï¼Œå¯ä»¥è¿ç»­è°ƒç”¨`render()`æ–¹æ³•ï¼š

```python
for step in range(10):
    env.render()
    action = np.random.randint(0, 5)  # éšæœºé€‰æ‹©åŠ¨ä½œ
    obs, reward, done, is_effective,info = env.step(action)
    if done:
        break
```

## ğŸ¯ API å‚è€ƒ

### GridWorldEnv

ä¸»è¦çš„ç¯å¢ƒç±»ï¼Œæä¾›ç½‘æ ¼ä¸–ç•Œçš„å®Œæ•´åŠŸèƒ½ã€‚

#### åˆå§‹åŒ–å‚æ•°

```python
GridWorldEnv(
    grid_size=(5, 5),           # ç½‘æ ¼å¤§å° (è¡Œ, åˆ—)
    render_mode="human",        # æ¸²æŸ“æ¨¡å¼
    keyboard_control=True,      # æ˜¯å¦å¯ç”¨é”®ç›˜æ§åˆ¶
    terminal_condition=None,    # ç»ˆæ­¢æ¡ä»¶
    cell_size=130,              # æ¯ä¸ªæ ¼å­çš„åƒç´ å¤§å°
    circle_radius=35,           # å¥–åŠ±åœ†åœˆåŠå¾„
    font_size=16,               # å­—ä½“å¤§å°
    max_arrow_length=50,        # ç­–ç•¥ç®­å¤´æœ€å¤§é•¿åº¦
    show_cell_pos=True,         # åœ¨æ¯ä¸ªå•å…ƒä¸Šæ˜¾ç¤ºä½ç½®åæ ‡
    color_alpha=0.0             # æ§åˆ¶è‰²å½©æ•æ„Ÿåº¦
)
```

#### ä¸»è¦æ–¹æ³•

- `step(action)`: æ‰§è¡ŒåŠ¨ä½œï¼Œè¿”å›(observation, reward, done, info)
- `render(state_values=None, policy_config=None, reward_config=None)`: æ¸²æŸ“ç¯å¢ƒ
- `set_rewards(reward_config)`: è®¾ç½®å¥–åŠ±é…ç½®
- `set_policy(policy_config)`: è®¾ç½®ç­–ç•¥é…ç½®
- `disable_states(disabled_poses)`: ç¦ç”¨æŒ‡å®šçŠ¶æ€
- `close()`: å…³é—­ç¯å¢ƒ

#### åŠ¨ä½œç©ºé—´

- 0: åœç•™åœ¨å½“å‰ä½ç½®
- 1: å‘ä¸Šç§»åŠ¨
- 2: å‘ä¸‹ç§»åŠ¨  
- 3: å‘å·¦ç§»åŠ¨
- 4: å‘å³ç§»åŠ¨

## ğŸ¨ å¯è§†åŒ–è¯´æ˜

### é¢œè‰²ç¼–ç 

- **è“è‰²**: è´Ÿå€¼ï¼ˆå¥–åŠ±æˆ–çŠ¶æ€ä»·å€¼ï¼‰
- **æ©™è‰²**: æ­£å€¼ï¼ˆå¥–åŠ±æˆ–çŠ¶æ€ä»·å€¼ï¼‰
- **æµ…è“è‰²**: é›¶å€¼æˆ–ä¸­æ€§å€¼
- **é»„è‰²**: ç›®æ ‡çŠ¶æ€
- **ç°è‰²**: ç¦ç”¨çŠ¶æ€
- **çº¢è‰²è¾¹æ¡†**: æ™ºèƒ½ä½“å½“å‰ä½ç½®

### æ˜¾ç¤ºå…ƒç´ 

- **åœ†åœˆ**: æ˜¾ç¤ºå¥–åŠ±å€¼å’ŒçŠ¶æ€ä»·å€¼
- **ç®­å¤´é•¿çŸ­**: å½“å‰ç­–ç•¥ä¸­è½¬ç§»è‡³ç›¸é‚»çŠ¶æ€çš„åŠ¨ä½œæ¦‚ç‡
- **åœ†å¿ƒå¤§å°**ï¼šåœç•™åœ¨å½“å‰çŠ¶æ€çš„æ¦‚ç‡
- **æ–‡æœ¬**: æ˜¾ç¤ºå…·ä½“çš„æ•°å€¼

## ğŸ“ ç¤ºä¾‹

æŸ¥çœ‹`examples/`ç›®å½•è·å–æ›´å¤šä½¿ç”¨ç¤ºä¾‹ï¼š

- `basic_usage.py`ï¼šåŸºæœ¬ä½¿ç”¨ç¤ºä¾‹
- `policy_evaluation.py`ï¼šè’™ç‰¹å¡ç½—æ³•ç­–ç•¥è¯„ä¼°
- `value_iteration.py`ï¼šä»·å€¼è¿­ä»£å¯»æ‰¾æœ€ä¼˜ç­–ç•¥

## ğŸ“„ è®¸å¯

æœ¬é¡¹ç›®ä½¿ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚
