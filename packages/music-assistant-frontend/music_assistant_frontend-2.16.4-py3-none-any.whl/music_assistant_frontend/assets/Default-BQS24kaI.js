import{_ as ya,T as fa,V as et}from"./Toolbar-CrXd_iJ6.js";import{D as ha}from"./constants-BXWEQHoz.js";import{_ as pa,s as a,d as O,c as g,o as r,a as P,b as u,w as y,F as Y,r as ue,e as V,V as Qe,f as ga,t as I,g as le,u as t,h as Ce,i as A,j as we,k as Ie,l as Ae,m as M,M as F,P as kt,n as Ne,$ as Z,p as tt,q as C,v as Je,A as ba,x as ce,y as de,z as _a,B as Xe,C as me,D as j,E as ie,G as Ve,H as wa,I as Pe,J as Pa,K as ka,L as S,N as je,O as ot,Q as Re,R as nt,S as xa,T as rt,U as Be,W as zt,X as ut,Y as ct,Z as Ge,a0 as U,a1 as Dt,a2 as dt,a3 as be,a4 as Ia,a5 as mt,a6 as vt,a7 as Ot,a8 as yt,a9 as Nt,aa as Ca,ab as ve,ac as ee,ad as Wt,ae as $a,af as Qa,ag as Ht,ah as Va,ai as Sa,aj as Ta,ak as La,al as Ma,am as Ea,an as Ke,ao as Ba,ap as Te,aq as ft,ar as Aa,as as Ra,at as Fa,au as ht,av as qa,aw as Ut,ax as za,ay as Da,az as G,aA as Oa,aB as Na,aC as Wa,aD as Ha,aE as We,aF as Ua,aG as Ya,aH as Xa,aI as ja,aJ as Ga,aK as xt,aL as Ka,aM as Za,aN as Ja,aO as el,aP as tl,aQ as al,aR as $e,aS as re,aT as Le,aU as He,aV as pt,aW as ae,aX as Me,aY as Yt,aZ as Ue,a_ as ll,a$ as Fe,b0 as qe,b1 as Ye,b2 as at,b3 as Se,b4 as N,b5 as he,b6 as Xt,b7 as jt,b8 as lt,b9 as Gt,ba as It,bb as Ct,bc as il,bd as sl,be as ol,bf as De,bg as nl,bh as $t,bi as Qt,bj as Vt,bk as ge,bl as Kt,bm as rl,bn as ul,bo as cl,bp as dl}from"./index-ra7TBoRz.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as Ee}from"./MediaItemThumb-CR-mI_Ce.js";import{V as Zt}from"./VDialog-CAKjRQF6.js";import{u as ml,c as vl,m as yl,a as gt,b as bt}from"./layout-CCTswPrU.js";import{V as fl,a as hl}from"./VInfiniteScroll-Dt2Dv-Cq.js";import{z as pl}from"./index-CBho6rsP.js";import{m as St,B as pe}from"./Button-D2bb5m0g.js";import{V as gl,P as _t,g as bl,a as ze}from"./PlayerCard-vZUuOW-m.js";import{V as _l}from"./VSlider-D6BtFUZc.js";import{L as wl}from"./ListItem-D2hYCs4D.js";import{V as Pl,a as _e,m as kl,b as Jt}from"./VBtn-B-NuY1a5.js";import{M as se,a as it}from"./marquee_text_sync-PsJWXngV.js";import{_ as xl}from"./NowPlayingBadge.vue_vue_type_style_index_0_lang-RQRAUHrN.js";import{V as Il}from"./VToolbar-DA4cqAVo.js";import{V as Cl}from"./VVirtualScroll-CDzAG2cn.js";import{V as $l,a as Tt,b as Lt,c as Mt}from"./VExpansionPanels-CVniPvfe.js";import"./VInput-CEXId6XX.js";const Ql=oe(pa,[["__scopeId","data-v-89a5b6dd"]]),ea=function(){const e=localStorage.getItem("frontend.settings.menu_items"),i=e?e.split(","):ha,l=[];for(const s of i)s==="home"&&l.push({label:"home",icon:"mdi-home-outline",path:"/home",isLibraryNode:!1}),s==="search"&&l.push({label:"search",icon:"mdi-magnify",path:"/search",isLibraryNode:!1}),s==="artists"&&l.push({label:"artists",icon:"mdi-account-outline",path:"/artists",isLibraryNode:!0,hidden:a.libraryArtistsCount===0}),s==="albums"&&l.push({label:"albums",icon:"md:album",path:"/albums",isLibraryNode:!0,hidden:a.libraryAlbumsCount===0}),s==="tracks"&&l.push({label:"tracks",icon:"mdi-music-note",path:"/tracks",isLibraryNode:!0,hidden:a.libraryTracksCount===0}),s==="playlists"&&l.push({label:"playlists",icon:"md:playlist_play",path:"/playlists",isLibraryNode:!0,hidden:a.libraryPlaylistsCount===0}),s==="podcasts"&&l.push({label:"podcasts",icon:"mdi-podcast",path:"/podcasts",isLibraryNode:!0,hidden:a.libraryPodcastsCount===0}),s==="audiobooks"&&l.push({label:"audiobooks",icon:"mdi-book-play-outline",path:"/audiobooks",isLibraryNode:!0,hidden:a.libraryAudiobooksCount===0}),s==="radios"&&l.push({label:"radios",icon:"mdi-access-point",path:"/radios",isLibraryNode:!0,hidden:a.libraryRadiosCount===0}),s==="browse"&&l.push({label:"browse",icon:"mdi-folder-outline",path:"/browse",isLibraryNode:!0}),s==="settings"&&l.push({label:"settings.settings",icon:"mdi-cog-outline",path:"/settings",isLibraryNode:!0});return l},Vl={class:"sidebar"},Sl=O({__name:"Navigation",setup(e){const i=ea();return(l,s)=>(r(),g("nav",Vl,[s[0]||(s[0]=P("div",{class:"sidebar-header"},[P("img",{src:ya,alt:"Music Assistant",class:"sidebar-header-logo"}),P("div",{class:"sidebar-header-title"},"Music Assistant")],-1)),u(Ce,{class:"sidebar-list"},{default:y(()=>[(r(!0),g(Y,null,ue(t(i),o=>(r(),V(Qe,{key:o.label,slim:"",nav:"",class:"menuButton",to:o.path},{prepend:y(()=>[u(le,{icon:o.icon,size:"24px"},null,8,["icon"])]),default:y(()=>[u(ga,{textContent:I(l.$t(o.label))},null,8,["textContent"])]),_:2},1032,["to"]))),128))]),_:1})]))}}),Tl=oe(Sl,[["__scopeId","data-v-032ea6d4"]]),Ll={class:"media-thumb"},Ml={style:{"margin-left":"-10px","padding-right":"5px"}},El=O({__name:"AddToPlaylistDialog",setup(e){const i=A(!1),l=A([]),s=A([]),o=A(),n=A([]);we(()=>{Ie.on("playlistdialog",async T=>{i.value=!0,n.value=T.items,o.value=T.parentItem,await c()}),Ae(()=>{Ie.off("playlistdialog")})});const c=async function(){l.value=[],s.value=[];const T=await M.getLibraryPlaylists();let w=n.value.length?n.value[0]:void 0;if(w){"provider_mappings"in w||(w=await M.getItem(w.media_type,w.item_id,w.provider));for(const d of T){if(!d.provider_mappings.filter(x=>x.available).length||!d.is_editable||o.value&&o.value.media_type===F.PLAYLIST&&d.item_id===o.value.item_id)continue;const $=M.providers[d.provider_mappings[0].provider_instance];$&&($.domain=="builtin"||$.is_streaming_provider||w?.provider_mappings.filter(x=>x.provider_instance==$.instance_id).length)&&l.value.push(d)}for(const d of Object.values(M.providers))d.supported_features.includes(kt.PLAYLIST_CREATE)&&d.supported_features.includes(kt.PLAYLIST_TRACKS_EDIT)&&(d.domain=="builtin"||d.is_streaming_provider||w?.provider_mappings.filter($=>$.provider_instance==d.instance_id).length)&&s.value.push(d.instance_id)}},m=async function(T){M.addPlaylistTracks(T.item_id,n.value.map(w=>w.uri)),v(),a.activeAlert={type:ba.INFO,message:Z("background_task_added"),persistent:!1}},f=async function(T){const w=prompt(Z("new_playlist_name"));if(!w)return;const d=await M.createPlaylist(w,T);m(d)},v=function(){i.value=!1};return(T,w)=>(r(),V(Zt,{modelValue:i.value,"onUpdate:modelValue":[w[0]||(w[0]=d=>i.value=d),w[1]||(w[1]=d=>{t(a).dialogActive=d})],fullscreen:"",transition:"dialog-bottom-transition"},{default:y(()=>[u(Ne,null,{default:y(()=>[u(fa,{icon:"mdi-playlist-plus",title:t(Z)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:v}]},null,8,["title","menu-items"]),u(tt),w[4]||(w[4]=P("br",null,null,-1)),u(Ce,null,{default:y(()=>[(r(!0),g(Y,null,ue(l.value,d=>(r(),g("div",{key:d.item_id},[u(Qe,{onClick:$=>m(d)},{prepend:y(()=>[P("div",Ll,[u(Ee,{item:d,size:50},null,8,["item"])])]),title:y(()=>[P("div",null,I(d.name),1)]),subtitle:y(()=>[P("div",null,I(d.owner),1)]),append:y(()=>[d.provider_mappings?(r(),V(Je,{key:0,domain:d.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):C("",!0)]),_:2},1032,["onClick"])]))),128)),w[2]||(w[2]=P("div",{style:{height:"30px"}},null,-1)),u(tt),w[3]||(w[3]=P("div",{style:{height:"30px"}},null,-1)),(r(!0),g(Y,null,ue(s.value,d=>(r(),g("div",{key:d},[u(Qe,{onClick:$=>f(d)},{prepend:y(()=>[P("div",Ml,[u(Je,{domain:t(M).providers[d].domain,size:50},null,8,["domain"])])]),title:y(()=>[P("div",null,I(t(Z)("new_playlist")),1)]),subtitle:y(()=>[P("div",null,I(t(Z)("create_playlist_on",[t(M).providers[d].name])),1)]),append:y(()=>[u(Je,{domain:t(M).providers[d].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Bl=oe(El,[["__scopeId","data-v-bd014719"]]),Al=de({scrollable:Boolean,...Pe(),...wa(),...Ve({tag:"main"})},"VMain"),Rl=ce()({name:"VMain",props:Al(),setup(e,i){let{slots:l}=i;const{dimensionStyles:s}=_a(e),{mainStyles:o}=ml(),{ssrBootStyles:n}=Xe();return me(()=>u(e.tag,{class:ie(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:j([o.value,n.value,s.value,e.style])},{default:()=>[e.scrollable?P("div",{class:"v-main__scroller"},[l.default?.()]):l.default?.()]})),{}}}),Fl={class:"content-section"},ql=O({__name:"View",setup(e){return(i,l)=>{const s=ka("router-view");return r(),V(Rl,{id:"cont",class:"main-layout"},{default:y(()=>[t(a).mobileLayout?C("",!0):(r(),V(Tl,{key:0,class:"nav-section"})),P("div",Fl,[u(s,null,{default:y(({Component:o})=>[(r(),V(Pa(o)))]),_:1}),u(Bl),u(Ql),u(fl,{"model-value":t(a).activeAlert!==void 0,color:t(a).activeAlert?.type||"grey",text:t(a).activeAlert?.message,"close-on-content-click":"",position:"sticky",timeout:t(a).activeAlert?.persistent?-1:5e3,"z-index":"999999",style:{"z-index":"999999"},"onUpdate:modelValue":l[0]||(l[0]=()=>t(a).activeAlert=void 0)},null,8,["model-value","color","text","timeout"])])]),_:1})}}}),Et=oe(ql,[["__scopeId","data-v-1daaf33c"]]),zl=e=>{const i=S(()=>{const{variant:n,width:c,height:m,staticWidth:f,staticHeight:v,maxWidth:T,maxHeight:w,minWidth:d,minHeight:$,badge:x,...E}=e,q={...E,size:e.size||f||void 0||v||void 0||(e.maxHeight?e.maxHeight:void 0)||(e.maxWidth?e.maxWidth:void 0)||"24px"};return pl(n).with("button",()=>({...q,class:e.class?`icon-button ${e.class}`:"icon-button"})).with("responsive",()=>({...q,class:e.class?`icon-responsive ${e.class}`:"icon-responsive"})).with("default",()=>({...q,class:e.class?`icon-default ${e.class}`:"icon-default"})).otherwise(()=>({...q,class:e.class?`icon-default ${e.class}`:"icon-default"}))}),l=S(()=>{const n={};if(e.staticWidth?n.width=e.staticWidth:e.width&&(n.width=e.width),e.staticHeight?n.height=e.staticHeight:e.height&&(n.height=e.height),e.maxWidth&&(n.maxWidth=e.maxWidth),e.maxHeight&&(n.maxHeight=e.maxHeight),e.minWidth&&(n.minWidth=e.minWidth),e.minHeight&&(n.minHeight=e.minHeight),typeof e.style=="object")Object.assign(n,e.style);else if(typeof e.style=="string"){const c=e.style.split(";").reduce((m,f)=>{const[v,T]=f.split(":").map(w=>w.trim());return v&&T&&(m[v]=T),m},{});Object.assign(n,c)}return n}),s=S(()=>St("icon-container",e.variant&&`icon-container--${e.variant}`,e.disabled&&"icon-container--disabled")),o=S(()=>St("icon",e.variant&&`icon--${e.variant}`));return{iconProps:i,containerStyle:l,containerClasses:s,iconClasses:o}},Dl={variant:"default",minWidth:"24px",minHeight:"24px",badge:!1,disabled:!1},Ol=de({...Pe(),...nt(yl(),["fullHeight"]),...Re()},"VApp"),Nl=ce()({name:"VApp",props:Ol(),setup(e,i){let{slots:l}=i;const s=je(e),{layoutClasses:o,getLayoutItem:n,items:c,layoutRef:m}=vl({...e,fullHeight:!0}),{rtlClasses:f}=ot();return me(()=>P("div",{ref:m,class:ie(["v-application",s.themeClasses.value,o.value,f.value,e.class]),style:j([e.style])},[P("div",{class:"v-application__wrap"},[l.default?.()])])),{getLayoutItem:n,items:c,theme:s}}}),Wl=de({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...yt(),...Pe(),...Ot(),...vt(),...mt(),...bt({name:"bottom-navigation"}),...Ve({tag:"header"}),...Ia({selectedClass:"v-btn--selected"}),...Re()},"VBottomNavigation"),Hl=ce()({name:"VBottomNavigation",props:Wl(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,i){let{slots:l}=i;const{themeClasses:s}=xa(),{borderClasses:o}=rt(e),{backgroundColorClasses:n,backgroundColorStyles:c}=Be(()=>e.bgColor),{densityClasses:m}=zt(e),{elevationClasses:f}=ut(e),{roundedClasses:v}=ct(e),{ssrBootStyles:T}=Xe(),w=S(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),d=Ge(e,"active",e.active),{layoutItemStyles:$}=gt({id:e.name,order:S(()=>parseInt(e.order,10)),position:U(()=>"bottom"),layoutSize:U(()=>d.value?w.value:0),elementSize:w,active:d,absolute:U(()=>e.absolute)});return Dt(e,Pl),dt({VBtn:{baseColor:U(()=>e.baseColor),color:U(()=>e.color),density:U(()=>e.density),stacked:U(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),me(()=>u(e.tag,{class:ie(["v-bottom-navigation",{"v-bottom-navigation--active":d.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},s.value,n.value,o.value,m.value,f.value,v.value,e.class]),style:j([c.value,$.value,{height:be(w.value)},T.value,e.style])},{default:()=>[l.default&&P("div",{class:"v-bottom-navigation__content"},[l.default()])]})),{}}}),Ul=e=>{const{touchstartX:i,touchendX:l,touchstartY:s,touchendY:o}=e,n=.5,c=16;e.offsetX=l-i,e.offsetY=o-s,Math.abs(e.offsetY)<n*Math.abs(e.offsetX)&&(e.left&&l<i-c&&e.left(e),e.right&&l>i+c&&e.right(e)),Math.abs(e.offsetX)<n*Math.abs(e.offsetY)&&(e.up&&o<s-c&&e.up(e),e.down&&o>s+c&&e.down(e))};function Yl(e,i){const l=e.changedTouches[0];i.touchstartX=l.clientX,i.touchstartY=l.clientY,i.start?.({originalEvent:e,...i})}function Xl(e,i){const l=e.changedTouches[0];i.touchendX=l.clientX,i.touchendY=l.clientY,i.end?.({originalEvent:e,...i}),Ul(i)}function jl(e,i){const l=e.changedTouches[0];i.touchmoveX=l.clientX,i.touchmoveY=l.clientY,i.move?.({originalEvent:e,...i})}function Gl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:l=>Yl(l,i),touchend:l=>Xl(l,i),touchmove:l=>jl(l,i)}}function Kl(e,i){const l=i.value,s=l?.parent?e.parentElement:e,o=l?.options??{passive:!0},n=i.instance?.$.uid;if(!s||n===void 0)return;const c=Gl(i.value);s._touchHandlers=s._touchHandlers??Object.create(null),s._touchHandlers[n]=c,Nt(c).forEach(m=>{s.addEventListener(m,c[m],o)})}function Zl(e,i){const l=i.value?.parent?e.parentElement:e,s=i.instance?.$.uid;if(!l?._touchHandlers||s===void 0)return;const o=l._touchHandlers[s];Nt(o).forEach(n=>{l.removeEventListener(n,o[n])}),delete l._touchHandlers[s]}const st={mounted:Kl,unmounted:Zl},ta=Symbol.for("vuetify:v-window"),aa=Symbol.for("vuetify:v-window-group"),la=de({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},crossfade:Boolean,transitionDuration:Number,...Pe(),...Ve(),...Re()},"VWindow"),Bt=ce()({name:"VWindow",directives:{vTouch:st},props:la(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:l}=i;const{themeClasses:s}=je(e),{isRtl:o}=ot(),{t:n}=Ca(),c=Dt(e,aa),m=A(),f=S(()=>o.value?!e.reverse:e.reverse),v=ve(!1),T=S(()=>{if(e.crossfade)return"v-window-crossfade-transition";const z=e.direction==="vertical"?"y":"x",h=(f.value?!v.value:v.value)?"-reverse":"";return`v-window-${z}${h}-transition`}),w=ve(0),d=A(void 0),$=S(()=>c.items.value.findIndex(z=>c.selected.value.includes(z.id)));ee($,(z,b)=>{const h=c.items.value.length,Q=h-1;h<=2?v.value=z<b:z===Q&&b===0?v.value=!0:z===0&&b===Q?v.value=!1:v.value=z<b}),Qa(ta,{transition:T,isReversed:v,transitionCount:w,transitionHeight:d,rootRef:m});const x=U(()=>e.continuous||$.value!==0),E=U(()=>e.continuous||$.value!==c.items.value.length-1);function q(){x.value&&c.prev()}function X(){E.value&&c.next()}const J=S(()=>{const z=[],b={icon:o.value?e.nextIcon:e.prevIcon,class:`v-window__${f.value?"right":"left"}`,onClick:c.prev,"aria-label":n("$vuetify.carousel.prev")};z.push(x.value?l.prev?l.prev({props:b}):u(_e,b,null):P("div",null,null));const h={icon:o.value?e.prevIcon:e.nextIcon,class:`v-window__${f.value?"left":"right"}`,onClick:c.next,"aria-label":n("$vuetify.carousel.next")};return z.push(E.value?l.next?l.next({props:h}):u(_e,h,null):P("div",null,null)),z}),W=S(()=>e.touch===!1?e.touch:{...{left:()=>{f.value?q():X()},right:()=>{f.value?X():q()},start:b=>{let{originalEvent:h}=b;h.stopPropagation()}},...e.touch===!0?{}:e.touch});return me(()=>Wt(u(e.tag,{ref:m,class:ie(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows,"v-window--crossfade":!!e.crossfade},s.value,e.class]),style:j([e.style,e.transitionDuration&&!$a?{"--v-window-transition-duration":be(e.transitionDuration,"ms")}:void 0])},{default:()=>[P("div",{class:"v-window__container",style:{height:d.value}},[l.default?.({group:c}),e.showArrows!==!1&&P("div",{class:ie(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[J.value])]),l.additional?.({group:c})]}),[[st,W.value]])),{group:c}}}),ia=de({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Pe(),...Ea(),...Ma()},"VWindowItem"),At=ce()({name:"VWindowItem",directives:{vTouch:st},props:ia(),emits:{"group:selected":e=>!0},setup(e,i){let{slots:l}=i;const s=Ht(ta),o=Va(e,aa),{isBooted:n}=Xe();if(!s||!o)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const c=ve(!1),m=S(()=>n.value&&(s.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function f(){!c.value||!s||(c.value=!1,s.transitionCount.value>0&&(s.transitionCount.value-=1,s.transitionCount.value===0&&(s.transitionHeight.value=void 0)))}function v(){c.value||!s||(c.value=!0,s.transitionCount.value===0&&(s.transitionHeight.value=be(s.rootRef.value?.clientHeight)),s.transitionCount.value+=1)}function T(){f()}function w(x){c.value&&Ke(()=>{!m.value||!c.value||!s||(s.transitionHeight.value=be(x.clientHeight))})}const d=S(()=>{const x=s.isReversed.value?e.reverseTransition:e.transition;return m.value?{name:typeof x!="string"?s.transition.value:x,onBeforeEnter:v,onAfterEnter:f,onEnterCancelled:T,onBeforeLeave:v,onAfterLeave:f,onLeaveCancelled:T,onEnter:w}:!1}),{hasContent:$}=Sa(e,o.isSelected);return me(()=>u(La,{transition:d.value,disabled:!n.value},{default:()=>[Wt(P("div",{class:ie(["v-window-item",o.selectedClass.value,e.class]),style:j(e.style)},[$.value&&l.default?.()]),[[Ta,o.isSelected.value]])]})),{groupItem:o}}}),Jl=de({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...yt(),...Pe(),...vt(),...bt(),...mt(),...Ve({tag:"footer"}),...Re()},"VFooter"),ei=ce()({name:"VFooter",props:Jl(),setup(e,i){let{slots:l}=i;const s=A(),{themeClasses:o}=je(e),{backgroundColorClasses:n,backgroundColorStyles:c}=Be(()=>e.color),{borderClasses:m}=rt(e),{elevationClasses:f}=ut(e),{roundedClasses:v}=ct(e),T=ve(32),{resizeRef:w}=Ba($=>{$.length&&(T.value=$[0].target.clientHeight)}),d=S(()=>e.height==="auto"?T.value:parseInt(e.height,10));return Te(()=>e.app,()=>{const $=gt({id:e.name,order:S(()=>parseInt(e.order,10)),position:U(()=>"bottom"),layoutSize:d,elementSize:S(()=>e.height==="auto"?void 0:d.value),active:U(()=>e.app),absolute:U(()=>e.absolute)});ft(()=>{s.value=$.layoutItemStyles.value})}),me(()=>u(e.tag,{ref:w,class:ie(["v-footer",o.value,n.value,m.value,f.value,v.value,e.class]),style:j([c.value,e.app?s.value:{height:be(e.height)},e.style])},l)),{}}});function ti(e){let{rootEl:i,isSticky:l,layoutItemStyles:s}=e;const o=ve(!1),n=ve(0),c=S(()=>{const v=typeof o.value=="boolean"?"top":o.value;return[l.value?{top:"auto",bottom:"auto",height:void 0}:void 0,o.value?{[v]:be(n.value)}:{top:s.value.top}]});we(()=>{ee(l,v=>{v?window.addEventListener("scroll",f,{passive:!0}):window.removeEventListener("scroll",f)},{immediate:!0})}),Ae(()=>{window.removeEventListener("scroll",f)});let m=0;function f(){const v=m>window.scrollY?"up":"down",T=i.value.getBoundingClientRect(),w=parseFloat(s.value.top??0),d=window.scrollY-Math.max(0,n.value-w),$=T.height+Math.max(n.value,w)-window.scrollY-window.innerHeight,x=parseFloat(getComputedStyle(i.value).getPropertyValue("--v-body-scroll-y"))||0;T.height<window.innerHeight-w?(o.value="top",n.value=w):v==="up"&&o.value==="bottom"||v==="down"&&o.value==="top"?(n.value=window.scrollY+T.top-x,o.value=!0):v==="down"&&$<=0?(n.value=0,o.value="bottom"):v==="up"&&d<=0&&(x?o.value!=="top"&&(n.value=-d+x+w,o.value="top"):(n.value=T.top+d,o.value="top")),m=window.scrollY}return{isStuck:o,stickyStyles:c}}const ai=100,li=20;function Rt(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function Ft(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let i=0;for(let l=e.length-1;l>0;l--){if(e[l].t===e[l-1].t)continue;const s=Rt(i),o=(e[l].d-e[l-1].d)/(e[l].t-e[l-1].t);i+=(o-s)*Math.abs(o),l===e.length-1&&(i*=.5)}return Rt(i)*1e3}function ii(){const e={};function i(o){Array.from(o.changedTouches).forEach(n=>{(e[n.identifier]??(e[n.identifier]=new Aa(li))).push([o.timeStamp,n])})}function l(o){Array.from(o.changedTouches).forEach(n=>{delete e[n.identifier]})}function s(o){const n=e[o]?.values().reverse();if(!n)throw new Error(`No samples for touch id ${o}`);const c=n[0],m=[],f=[];for(const v of n){if(c[0]-v[0]>ai)break;m.push({t:v[0],d:v[1].clientX}),f.push({t:v[0],d:v[1].clientY})}return{x:Ft(m),y:Ft(f),get direction(){const{x:v,y:T}=this,[w,d]=[Math.abs(v),Math.abs(T)];return w>d&&v>=0?"right":w>d&&v<=0?"left":d>w&&T>=0?"down":d>w&&T<=0?"up":si()}}}return{addMovement:i,endTouch:l,getVelocity:s}}function si(){throw new Error}function oi(e){let{el:i,isActive:l,isTemporary:s,width:o,touchless:n,position:c}=e;we(()=>{window.addEventListener("touchstart",J,{passive:!0}),window.addEventListener("touchmove",W,{passive:!1}),window.addEventListener("touchend",z,{passive:!0})}),Ae(()=>{window.removeEventListener("touchstart",J),window.removeEventListener("touchmove",W),window.removeEventListener("touchend",z)});const m=S(()=>["left","right"].includes(c.value)),{addMovement:f,endTouch:v,getVelocity:T}=ii();let w=!1;const d=ve(!1),$=ve(0),x=ve(0);let E;function q(h,Q){return(c.value==="left"?h:c.value==="right"?document.documentElement.clientWidth-h:c.value==="top"?h:c.value==="bottom"?document.documentElement.clientHeight-h:xe())-(Q?o.value:0)}function X(h){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const L=c.value==="left"?(h-x.value)/o.value:c.value==="right"?(document.documentElement.clientWidth-h-x.value)/o.value:c.value==="top"?(h-x.value)/o.value:c.value==="bottom"?(document.documentElement.clientHeight-h-x.value)/o.value:xe();return Q?Ra(L):L}function J(h){if(n.value)return;const Q=h.changedTouches[0].clientX,L=h.changedTouches[0].clientY,B=25,R=c.value==="left"?Q<B:c.value==="right"?Q>document.documentElement.clientWidth-B:c.value==="top"?L<B:c.value==="bottom"?L>document.documentElement.clientHeight-B:xe(),_=l.value&&(c.value==="left"?Q<o.value:c.value==="right"?Q>document.documentElement.clientWidth-o.value:c.value==="top"?L<o.value:c.value==="bottom"?L>document.documentElement.clientHeight-o.value:xe());(R||_||l.value&&s.value)&&(E=[Q,L],x.value=q(m.value?Q:L,l.value),$.value=X(m.value?Q:L),w=x.value>-20&&x.value<80,v(h),f(h))}function W(h){const Q=h.changedTouches[0].clientX,L=h.changedTouches[0].clientY;if(w){if(!h.cancelable){w=!1;return}const R=Math.abs(Q-E[0]),_=Math.abs(L-E[1]);(m.value?R>_&&R>3:_>R&&_>3)?(d.value=!0,w=!1):(m.value?_:R)>3&&(w=!1)}if(!d.value)return;h.preventDefault(),f(h);const B=X(m.value?Q:L,!1);$.value=Math.max(0,Math.min(1,B)),B>1?x.value=q(m.value?Q:L,!0):B<0&&(x.value=q(m.value?Q:L,!1))}function z(h){if(w=!1,!d.value)return;f(h),d.value=!1;const Q=T(h.changedTouches[0].identifier),L=Math.abs(Q.x),B=Math.abs(Q.y);(m.value?L>B&&L>400:B>L&&B>3)?l.value=Q.direction===({left:"right",right:"left",top:"down",bottom:"up"}[c.value]||xe()):l.value=$.value>.5}const b=S(()=>d.value?{transform:c.value==="left"?`translateX(calc(-100% + ${$.value*o.value}px))`:c.value==="right"?`translateX(calc(100% - ${$.value*o.value}px))`:c.value==="top"?`translateY(calc(-100% + ${$.value*o.value}px))`:c.value==="bottom"?`translateY(calc(100% - ${$.value*o.value}px))`:xe(),transition:"none"}:void 0);return Te(d,()=>{const h=i.value?.style.transform??null,Q=i.value?.style.transition??null;ft(()=>{i.value?.style.setProperty("transform",b.value?.transform||"none"),i.value?.style.setProperty("transition",b.value?.transition||null)}),Fa(()=>{i.value?.style.setProperty("transform",h),i.value?.style.setProperty("transition",Q)})}),{isDragging:d,dragProgress:$,dragStyles:b}}function xe(){throw new Error}const ni=["start","end","left","right","top","bottom"],ri=de({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>ni.includes(e)},sticky:Boolean,...yt(),...Pe(),...Ha(),...Wa({mobile:null}),...vt(),...bt(),...mt(),...Ve({tag:"nav"}),...Re()},"VNavigationDrawer"),ui=ce()({name:"VNavigationDrawer",props:ri(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,i){let{attrs:l,emit:s,slots:o}=i;const{isRtl:n}=ot(),{themeClasses:c}=je(e),{borderClasses:m}=rt(e),{backgroundColorClasses:f,backgroundColorStyles:v}=Be(()=>e.color),{elevationClasses:T}=ut(e),{displayClasses:w,mobile:d}=ht(e),{roundedClasses:$}=ct(e),x=qa(),E=Ge(e,"modelValue",null,H=>!!H),{ssrBootStyles:q}=Xe(),{scopeId:X}=Ut(),J=A(),W=ve(!1),{runOpenDelay:z,runCloseDelay:b}=Oa(e,H=>{W.value=H}),h=S(()=>e.rail&&e.expandOnHover&&W.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),Q=S(()=>za(e.location,n.value)),L=U(()=>e.persistent),B=S(()=>!e.permanent&&(d.value||e.temporary)),R=S(()=>e.sticky&&!B.value&&Q.value!=="bottom");Te(()=>e.expandOnHover&&e.rail!=null,()=>{ee(W,H=>s("update:rail",!H))}),Te(()=>!e.disableResizeWatcher,()=>{ee(B,H=>!e.permanent&&Ke(()=>E.value=!H))}),Te(()=>!e.disableRouteWatcher&&!!x,()=>{ee(x.currentRoute,()=>B.value&&(E.value=!1))}),ee(()=>e.permanent,H=>{H&&(E.value=!0)}),e.modelValue==null&&!B.value&&(E.value=e.permanent||!d.value);const{isDragging:_,dragProgress:p}=oi({el:J,isActive:E,isTemporary:B,width:h,touchless:U(()=>e.touchless),position:Q}),k=S(()=>{const H=B.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):h.value;return _.value?H*p.value:H}),{layoutItemStyles:D,layoutItemScrimStyles:K}=gt({id:e.name,order:S(()=>parseInt(e.order,10)),position:Q,layoutSize:k,elementSize:h,active:Da(E),disableTransitions:U(()=>_.value),absolute:S(()=>e.absolute||R.value&&typeof te.value!="string")}),{isStuck:te,stickyStyles:ye}=ti({rootEl:J,isSticky:R,layoutItemStyles:D}),ne=Be(()=>typeof e.scrim=="string"?e.scrim:null),fe=S(()=>({..._.value?{opacity:p.value*.2,transition:"none"}:void 0,...K.value}));return dt({VList:{bgColor:"transparent"}}),me(()=>{const H=o.image||e.image;return P(Y,null,[u(e.tag,G({ref:J,onMouseenter:z,onMouseleave:b,class:["v-navigation-drawer",`v-navigation-drawer--${Q.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":W.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":B.value,"v-navigation-drawer--persistent":L.value,"v-navigation-drawer--active":E.value,"v-navigation-drawer--sticky":R.value},c.value,f.value,m.value,w.value,T.value,$.value,e.class],style:[v.value,D.value,q.value,ye.value,e.style]},X,l),{default:()=>[H&&P("div",{key:"image",class:"v-navigation-drawer__img"},[o.image?u(Ua,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},o.image):u(We,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),o.prepend&&P("div",{class:"v-navigation-drawer__prepend"},[o.prepend?.()]),P("div",{class:"v-navigation-drawer__content"},[o.default?.()]),o.append&&P("div",{class:"v-navigation-drawer__append"},[o.append?.()])]}),u(Na,{name:"fade-transition"},{default:()=>[B.value&&(_.value||E.value)&&!!e.scrim&&P("div",G({class:["v-navigation-drawer__scrim",ne.backgroundColorClasses.value],style:[fe.value,ne.backgroundColorStyles.value],onClick:()=>{L.value||(E.value=!1)}},X),null)]})])}),{isStuck:te}}}),wt=Symbol.for("vuetify:v-tabs"),sa=de({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...nt(kl({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Oe=ce()({name:"VTab",props:sa(),setup(e,i){let{slots:l,attrs:s}=i;const{textColorClasses:o,textColorStyles:n}=Ya(()=>e.sliderColor),c=A(),m=A(),f=S(()=>e.direction==="horizontal"),v=S(()=>c.value?.group?.isSelected.value??!1);function T(w){let{value:d}=w;if(d){const $=c.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),x=m.value;if(!$||!x)return;const E=getComputedStyle($).color,q=$.getBoundingClientRect(),X=x.getBoundingClientRect(),J=f.value?"x":"y",W=f.value?"X":"Y",z=f.value?"right":"bottom",b=f.value?"width":"height",h=q[J],Q=X[J],L=h>Q?q[z]-X[z]:q[J]-X[J],B=Math.sign(L)>0?f.value?"right":"bottom":Math.sign(L)<0?f.value?"left":"top":"center",_=(Math.abs(L)+(Math.sign(L)<0?q[b]:X[b]))/Math.max(q[b],X[b])||0,p=q[b]/X[b]||0,k=1.5;ja(x,{backgroundColor:[E,"currentcolor"],transform:[`translate${W}(${L}px) scale${W}(${p})`,`translate${W}(${L/k}px) scale${W}(${(_-1)/k+1})`,"none"],transformOrigin:Array(3).fill(B)},{duration:225,easing:Ga})}}return me(()=>{const w=_e.filterProps(e);return u(_e,G({symbol:wt,ref:c,class:["v-tab",e.class],style:e.style,tabindex:v.value?0:-1,role:"tab","aria-selected":String(v.value),active:!1},w,s,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":T}),{...l,default:()=>P(Y,null,[l.default?.()??e.text,!e.hideSlider&&P("div",{ref:m,class:ie(["v-tab__slider",o.value]),style:j(n.value)},null)])})}),Xa({},c)}}),ci=de({...nt(la(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),di=ce()({name:"VTabsWindow",props:ci(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:l}=i;const s=Ht(wt,null),o=Ge(e,"modelValue"),n=S({get(){return o.value!=null||!s?o.value:s.items.value.find(c=>s.selected.value.includes(c.id))?.value},set(c){o.value=c}});return me(()=>{const c=Bt.filterProps(e);return u(Bt,G({_as:"VTabsWindow"},c,{modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),l)}),{}}}),mi=de({...ia()},"VTabsWindowItem"),vi=ce()({name:"VTabsWindowItem",props:mi(),setup(e,i){let{slots:l}=i;return me(()=>{const s=At.filterProps(e);return u(At,G({_as:"VTabsWindowItem"},s,{class:["v-tabs-window-item",e.class],style:e.style}),l)}),{}}});function yi(e){return e?e.map(i=>Ja(i)?i:{text:i,value:i}):[]}const fi=de({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Za(sa(),["spaced"]),...Ka({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Ot(),...Ve()},"VTabs"),hi=ce()({name:"VTabs",props:fi(),emits:{"update:modelValue":e=>!0},setup(e,i){let{attrs:l,slots:s}=i;const o=Ge(e,"modelValue"),n=S(()=>yi(e.items)),{densityClasses:c}=zt(e),{backgroundColorClasses:m,backgroundColorStyles:f}=Be(()=>e.bgColor),{scopeId:v}=Ut();return dt({VTab:{color:U(()=>e.color),direction:U(()=>e.direction),stacked:U(()=>e.stacked),fixed:U(()=>e.fixedTabs),sliderColor:U(()=>e.sliderColor),hideSlider:U(()=>e.hideSlider)}}),me(()=>{const T=xt.filterProps(e),w=!!(s.window||e.items.length>0);return P(Y,null,[u(xt,G(T,{modelValue:o.value,"onUpdate:modelValue":d=>o.value=d,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},c.value,m.value,e.class],style:[{"--v-tabs-height":be(e.height)},f.value,e.style],role:"tablist",symbol:wt},v,l),{default:()=>[s.default?.()??n.value.map(d=>s.tab?.({item:d})??u(Oe,G(d,{key:d.text,value:d.value,spaced:e.spaced}),{default:s[`tab.${d.value}`]?()=>s[`tab.${d.value}`]?.({item:d}):void 0}))]}),w&&u(di,G({modelValue:o.value,"onUpdate:modelValue":d=>o.value=d,key:"tabs-window"},v),{default:()=>[n.value.map(d=>s.item?.({item:d})??u(vi,{value:d.value},{default:()=>s[`item.${d.value}`]?.({item:d})})),s.window?.()]})])}),{}}}),pi=O({__name:"Icon",props:el({variant:{},width:{},height:{},staticWidth:{},staticHeight:{},maxWidth:{},maxHeight:{},minWidth:{},minHeight:{},icon:{},color:{},disabled:{type:Boolean},size:{},badge:{type:Boolean},class:{},style:{}},Dl),emits:["click"],setup(e,{emit:i}){const l=e,s=i,{iconProps:o,containerStyle:n,containerClasses:c,iconClasses:m}=zl(l),f=A(),v=A(),T=async()=>{if(!(l.variant!=="responsive"||!f.value||!v.value)){await Ke();try{const d=f.value.offsetWidth,$=f.value.offsetHeight,x=Math.min(d,$);v.value.$el&&(v.value.$el.style.fontSize=`${x}px`)}catch(d){console.error("Icon sizing adjustment failed:",d)}}},w=d=>{if(l.disabled){d.preventDefault(),d.stopPropagation();return}s("click",d)};return we(()=>{l.variant==="responsive"&&(T(),window.addEventListener("resize",T))}),Ae(()=>{l.variant==="responsive"&&window.removeEventListener("resize",T)}),(d,$)=>(r(),g("div",{ref_key:"iconContainer",ref:f,class:ie(t(c)),style:j(t(n)),onClick:w},[u(et,{"model-value":e.badge===!0,color:"error",dot:""},{default:y(()=>[u(t(le),G({ref_key:"iconElement",ref:v},t(o),{class:t(m)}),tl({_:2},[ue(d.$slots,(x,E)=>({name:E,fn:y(()=>[al(d.$slots,E,{},void 0,!0)])}))]),1040,["class"])]),_:3},8,["model-value"])],6))}}),ke=oe(pi,[["__scopeId","data-v-3db51b10"]]),oa=O({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(e){return(i,l)=>e.isVisible&&e.playerQueue?(r(),V(ke,G({key:0},e.icon,{disabled:!e.playerQueue.active||e.playerQueue.items==0,color:t($e)(e.icon?.color,[[e.playerQueue.repeat_mode==t(re).OFF,null],[e.playerQueue.repeat_mode==t(re).ALL,"primary"],[e.playerQueue.repeat_mode==t(re).ONE,"primary"]]),icon:t($e)(e.icon?.icon,[[e.playerQueue.repeat_mode==t(re).OFF,"mdi-repeat-off"],[e.playerQueue.repeat_mode==t(re).ALL,"mdi-repeat"],[e.playerQueue.repeat_mode==t(re).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),variant:"button",onClick:l[0]||(l[0]=s=>t(M).queueCommandRepeat(e.playerQueue.queue_id||"",t($e)(null,[[e.playerQueue.repeat_mode==t(re).OFF,t(re).ONE],[e.playerQueue.repeat_mode==t(re).ALL,t(re).OFF],[e.playerQueue.repeat_mode==t(re).ONE,t(re).ALL]])))}),null,16,["disabled","color","icon"])):C("",!0)}}),na=O({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(e){const i=e,l=S(()=>i.playerQueue?.active?(i.playerQueue.current_index||0)<i.playerQueue.items-1:!1),s=S(()=>!i.player||i.playerQueue?.active||!i.player.current_media?!1:i.player.supported_features.includes(Le.NEXT_PREVIOUS));return(o,n)=>e.isVisible&&e.player?(r(),V(ke,G({key:0},e.icon,{disabled:!l.value&&!s.value,icon:"mdi-skip-next-outline",variant:"button",onClick:n[0]||(n[0]=c=>t(M).playerCommandNext(e.player.player_id))}),null,16,["disabled"])):C("",!0)}}),ra=O({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(e){const i=e,l=S(()=>i.playerQueue?i.playerQueue.items>0:!1),s=S(()=>!(!i.player||i.playerQueue?.active||!i.player.current_media)),o=S(()=>i.player?.playback_state==He.PLAYING?"mdi-pause":"mdi-play");return(n,c)=>e.isVisible&&e.player?(r(),V(ke,G({key:0},e.icon,{disabled:!l.value&&!s.value,icon:e.iconStyle?`${o.value}-${e.iconStyle}`:o.value,variant:"button",onClick:c[0]||(c[0]=m=>t(M).playerCommandPlayPause(e.player.player_id))}),null,16,["disabled","icon"])):C("",!0)}}),ua=O({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(e){const i=e,l=S(()=>!i.playerQueue?.active||!i.playerQueue?.items||!i.playerQueue.current_index?!1:i.playerQueue.current_index>0),s=S(()=>!i.player||i.playerQueue?.active||!i.player.current_media?!1:i.player.supported_features.includes(Le.NEXT_PREVIOUS));return(o,n)=>e.isVisible&&e.player?(r(),V(ke,G({key:0},e.icon,{disabled:!l.value&&!s.value,icon:"mdi-skip-previous-outline",variant:"button",onClick:n[0]||(n[0]=c=>t(M).playerCommandPrevious(e.player.player_id))}),null,16,["disabled"])):C("",!0)}}),ca=O({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(e){return(i,l)=>e.isVisible&&e.playerQueue?(r(),V(ke,G({key:0},e.icon,{disabled:!e.playerQueue.active||e.playerQueue.items==0,color:t($e)(e.icon?.color,[[e.playerQueue.shuffle_enabled,"primary",""]]),icon:t($e)(e.icon?.icon,[[e.playerQueue.shuffle_enabled,"mdi-shuffle"],[e.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),variant:"button",onClick:l[0]||(l[0]=s=>t(M).queueCommandShuffle(e.playerQueue.queue_id,!e.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):C("",!0)}}),gi={key:0,class:"player-controls"},bi={key:0,class:"player-controls-elements"},_i={key:1,class:"player-controls-elements"},wi={key:2},Pi={key:3,class:"player-controls-elements"},ki={key:4,class:"player-controls-elements"},qt=O({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(e){return(i,l)=>e.visibleComponents?(r(),g("div",gi,[e.visibleComponents&&e.visibleComponents.shuffle?.isVisible?(r(),g("div",bi,[u(ca,{"player-queue":t(a).activePlayerQueue,class:"media-controls-item",icon:e.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):C("",!0),e.visibleComponents&&e.visibleComponents.previous?.isVisible?(r(),g("div",_i,[u(ua,{player:t(a).activePlayer,"player-queue":t(a).activePlayerQueue,class:"media-controls-item",icon:e.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):C("",!0),e.visibleComponents&&e.visibleComponents.play?.isVisible?(r(),g("div",wi,[u(ra,{player:t(a).activePlayer,"player-queue":t(a).activePlayerQueue,class:"media-controls-item","icon-style":"circle",icon:e.visibleComponents.play.icon},null,8,["player","player-queue","icon"])])):C("",!0),e.visibleComponents&&e.visibleComponents.next?.isVisible?(r(),g("div",Pi,[u(na,{player:t(a).activePlayer,"player-queue":t(a).activePlayerQueue,icon:e.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):C("",!0),e.visibleComponents&&e.visibleComponents.repeat?.isVisible?(r(),g("div",ki,[u(oa,{"player-queue":t(a).activePlayerQueue,icon:e.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):C("",!0)])):C("",!0)}}),da=O({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(e){const i=function(){a.showFullscreenPlayer&&a.showQueueItems?a.showQueueItems=!1:a.showFullscreenPlayer&&!a.showQueueItems?a.showQueueItems=!0:(a.showQueueItems=!0,a.showFullscreenPlayer=!0)};return(l,s)=>e.isVisible?(r(),V(ke,G({key:0},e.icon,{disabled:!t(a).activePlayerId||t(a).showFullscreenPlayer&&!t(a).curQueueItem&&!t(a).showQueueItems,icon:"mdi-playlist-play",color:t($e)(e.icon?.color,[[t(a).showFullscreenPlayer&&t(a).showQueueItems,"primary",""]]),variant:"button",onClick:i}),null,16,["disabled","color"])):C("",!0)}}),ma=O({__name:"SpeakerBtn",props:{color:{}},setup(e){return(i,l)=>(r(),V(pe,{variant:"icon",ripple:!1,icon:"",onClick:l[0]||(l[0]=s=>t(a).showPlayersMenu=!0)},{default:y(()=>[u(le,{color:e.color?e.color:"",size:24,icon:t(a).activePlayer?.group_members.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]),_:1}))}}),xi={key:0},Ii={key:0},Ci={class:"text-caption"},$i={key:1},Qi=O({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(e){const i=e,l=A(!1);return(s,o)=>i.isVisible&&t(a).activePlayer?(r(),g("div",xi,[u(pt,{modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=n=>l.value=n),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:s.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:y(({props:n})=>[t(ae)("bp6")||!e.responsiveVolumeSize?(r(),g("div",Ii,[u(_t,{style:"margin-right: 0px; margin-left: 0px;",width:e.volumeSize,"is-powered":!0,"model-value":t(a).activePlayer.group_members.length>0?Math.round(t(a).activePlayer?.group_volume||0):Math.round(t(a).activePlayer?.volume_level||0),"allow-wheel":!0,"onUpdate:modelValue":o[0]||(o[0]=c=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolume(t(a).activePlayer?.player_id||"",c):t(M).playerCommandVolumeSet(t(a).activePlayer?.player_id||"",c))},{prepend:y(()=>[u(pe,G({variant:"icon",size:"48",ripple:!1},{...n}),{default:y(()=>[u(le,{color:i.color?e.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),P("div",Ci,I(t(a).activePlayer.group_members.length>0?Math.round(t(a).activePlayer?.group_volume||0):Math.round(t(a).activePlayer?.volume_level||0)),1)]),_:1},16)]),_:2},1032,["width","model-value"])])):(r(),g("div",$i,[u(pe,G({...n},{size:"48",variant:"icon"}),{default:y(()=>[u(le,{color:i.color?e.color:"",icon:"mdi-volume-high"},null,8,["color"]),P("div",{class:"text-caption",style:j({color:i.color?e.color:""})},I(t(a).activePlayer.group_members.length>0?Math.round(t(a).activePlayer?.group_volume||0):Math.round(t(a).activePlayer?.volume_level||0)),5)]),_:1},16)]))]),default:y(()=>[u(Ne,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:y(()=>[t(a).activePlayer?(r(),V(gl,{key:0,player:t(a).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"show-heading-row":!0,"show-volume-control":!0,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):C("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):C("",!0)}}),Vi=oe(Qi,[["__scopeId","data-v-70c82677"]]),Si=O({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(e){return(i,l)=>(r(),g(Y,null,[e.player&&e.player.isVisible?(r(),V(ma,{key:0,color:e.player.color},null,8,["color"])):C("",!0),e.queue&&e.queue.isVisible?(r(),V(da,{key:1,color:e.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):C("",!0),e.volume&&e.volume.isVisible?(r(),V(Vi,{key:2,color:e.volume.color,"volume-size":e.volume.volumeSize,"responsive-volume-size":e.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):C("",!0)],64))}}),Ti={style:{width:"auto",height:"24px"}},Li={key:0,style:{width:"100%"}},Mi=["onClick"],Ei={key:0,class:"time-text-row"},Bi={class:"text-caption time-text-right"},Ai=O({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1},color:{default:void 0}},setup(e){const i=A(!1),l=A(!0),s=A(!1),o=A(0),n=A(0),c=S(()=>a.curQueueItem?i.value?`-${Me(a.curQueueItem.duration-f.value)}`:`${Me(f.value)}`:"0:00"),m=S(()=>{if(!a.curQueueItem||!a.curQueueItem.duration||a.curQueueItem.media_item?.media_type==F.RADIO)return"";const $=a.curQueueItem.duration;return Me($)}),f=S(()=>s.value?(n.value=o.value,o.value):a.activePlayerQueue?a.activePlayerQueue.elapsed_time:0),v=S(()=>{const $={};return a.curQueueItem?.media_item?.metadata?.chapters&&a.curQueueItem.media_item.metadata.chapters.forEach(x=>{$[x.start]=x.name}),$});ee(f,$=>{s.value||(o.value=$)});const T=function(){s.value=!0},w=()=>{s.value=!1,!s.value&&a.activePlayer&&M.playerCommandSeek(a.activePlayer.player_id,Math.round(n.value))},d=function($){if(a.curQueueItem?.media_item?.metadata?.chapters){for(const x of a.curQueueItem.media_item.metadata.chapters)if(x.start==$){M.playMedia(a.curQueueItem.media_item.uri,void 0,void 0,x.position.toString());return}}};return($,x)=>(r(),g("div",Ti,[t(a).activePlayerQueue?(r(),g("div",Li,[u(_l,{modelValue:o.value,"onUpdate:modelValue":x[0]||(x[0]=E=>o.value=E),disabled:!t(a).curQueueItem||!t(a).curQueueItem.media_item||!t(a).curQueueItem.duration||t(a).curQueueItem.media_item.media_type==t(F).RADIO||t(a).activePlayer?.powered==!1,style:{width:"100%"},min:0,max:t(a).curQueueItem?.duration,"hide-details":"","track-size":4,"thumb-size":l.value?0:10,"show-ticks":v.value?"always":!1,ticks:v.value,"tick-size":"4",color:e.color,onTouchstart:x[1]||(x[1]=E=>l.value=!1),onTouchend:x[2]||(x[2]=E=>l.value=!0),onMouseenter:x[3]||(x[3]=E=>l.value=!1),onMouseleave:x[4]||(x[4]=E=>l.value=!0),onStart:T,onEnd:w},{"tick-label":y(({tick:E})=>[e.showLabels&&!l.value&&Object.values(v.value).length<6?(r(),g("a",{key:0,class:"text-caption",onClick:q=>d(E.value)},I(E.label),9,Mi)):C("",!0)]),_:1},8,["modelValue","disabled","max","thumb-size","show-ticks","ticks","color"]),e.showLabels?(r(),g("div",Ei,[P("div",{class:"text-caption time-text-left",onClick:x[5]||(x[5]=E=>i.value?i.value=!1:i.value=!0)},I(c.value),1),P("div",Bi,I(m.value),1)])):C("",!0)])):C("",!0)]))}}),va=oe(Ai,[["__scopeId","data-v-43d849c6"]]),Ri={class:"lyrics-container"},Fi={key:0,class:"lyrics-loading"},qi={key:1,class:"lyrics-empty"},zi={key:2,class:"lyrics-intro"},Di={class:"song-title"},Oi={class:"artist-name"},Ni={class:"lyrics-coming-soon"},Wi=O({__name:"LyricsViewer",props:{mediaItem:{default:void 0},position:{default:void 0},duration:{default:void 0},streamDetails:{default:void 0},textColor:{default:"#FFFFFF"},debugMode:{type:Boolean,default:!1}},setup(e){Yt(b=>({v3c09aed1:b.textColor}));const i=e,l=(b,h=!0)=>{if(h&&!i.debugMode)return;(h?console.debug:console.log)(`[lyricSynch] ${b}`)},s=A([]),o=A(!1),n=A(-1),c=A(null),m=A(!1),f=A(0),v=A(0),T=S(()=>{if(!d.value||!s.value.length)return!1;const b=s.value[0].time,h=i.position||0;return n.value===-1&&h<b}),w=S(()=>{if(!i.mediaItem)return"";if("media_type"in i.mediaItem&&i.mediaItem.media_type==="track"){const b=i.mediaItem;if(b.artists?.length)return b.artists.map(h=>h.name).join(", ")}return"media_type"in i.mediaItem&&i.mediaItem.media_type==="artist"?i.mediaItem.name:""});S(()=>{const b=i.mediaItem?.metadata?.lyrics,h=i.mediaItem?.metadata?.lrc_lyrics;return!!b&&b.trim().length>0||!!h&&h.trim().length>0});const d=S(()=>{if(s.value.some(Q=>Q.time>0))return!0;const b=i.mediaItem?.metadata?.lrc_lyrics,h=i.mediaItem?.metadata?.lyrics;return!!(b&&b.includes("[")||h&&/\[\d+:\d+[.:]?\d*\]/.test(h))}),$=b=>{const h=b.match(/\[(\d+):(\d+)([.:]\d+)?\](.*)/);if(h){const Q=parseInt(h[1]);let L=parseInt(h[2]),B=0;if(h[3]){const p=h[3].replace(/[.:]/,".");B=Math.round(parseFloat(p)*1e3)}return{time:(Q*60*1e3+L*1e3+B)/1e3,text:h[4].trim()||" "}}return{time:0,text:b.trim()||" "}},x=()=>{if(!i.mediaItem){s.value=[];return}o.value=!0;try{const b=i.mediaItem.metadata?.lrc_lyrics||"",h=i.mediaItem.metadata?.lyrics||"";let Q="",L=!1;if(b?(Q=b,L=!0):h&&/\[\d+:\d+[.:]?\d*\]/.test(h)?(Q=h,L=!0):h&&(Q=h,L=!1),L){const B=Q.split(`
`).filter(R=>R.trim());s.value=B.map(R=>$(R)).filter(R=>R.text.trim()).sort((R,_)=>R.time-_.time),l(`Loaded ${s.value.length} synchronized lyrics lines`,!1)}else if(Q){const B=Q.split(`
`).filter(R=>R.trim());s.value=B.map(R=>({time:0,text:R.trim()})).filter(R=>R.text),l(`Loaded ${s.value.length} plain text lyrics lines`,!1)}else s.value=[]}catch(b){l(`Error processing lyrics: ${b}`,!1),s.value=[]}finally{o.value=!1}},E=b=>{const h=b;l(`Calculating look-ahead at ${b.toFixed(3)}s`);let Q=-1,L=-1;for(let ne=0;ne<s.value.length;ne++)if(s.value[ne].time<=h)Q=ne;else{L=ne;break}if(l(`Current lyric index: ${Q}, Next lyric index: ${L}`),L===0){const fe=s.value[0].time-h;if(l(`Pre-lyrics intro: ${fe.toFixed(2)}s until first lyric`),fe>5){l("Long intro - using fixed look-ahead: 0.3s"),f.value=.3;return}else if(fe>2){const H=Math.min(1,fe*.15);l(`Medium intro - calculated look-ahead: ${H.toFixed(2)}s`),f.value=H;return}l("Short intro - using standard calculation")}if(L===-1||Q===-1){l("Cannot determine appropriate look-ahead, using default: 0.3s"),f.value=.3;return}const B=s.value[Q].time,R=s.value[L].time,_=R-B,p=f.value;l(`Gap analysis:
    - Current lyric time: ${B.toFixed(3)}s
    - Next lyric time: ${R.toFixed(3)}s
    - Gap between lyrics: ${_.toFixed(3)}s
    - Previous look-ahead: ${p.toFixed(3)}s`);let k;_<.5?(k=.3,l(`Very rapid lyrics detected (${_.toFixed(2)}s gap) - using 30% look-ahead`)):_<.8?(k=.1,l(`Fast lyrics detected (${_.toFixed(2)}s gap) - using 10% look-ahead`)):_<1.5?(k=.2,l(`Medium lyrics detected (${_.toFixed(2)}s gap) - using 20% look-ahead`)):_<3?(k=.3,l(`Slower lyrics detected (${_.toFixed(2)}s gap) - using 30% look-ahead`)):_>10?(k=.02,l(`Very slow lyrics detected (${_.toFixed(2)}s gap) - using 2% look-ahead`)):(k=.4,l(`Slow lyrics detected (${_.toFixed(2)}s gap) - using 40% look-ahead`));const D=Math.min(1.5,_*k);l(`Target look-ahead: ${D.toFixed(3)}s`);const K=Math.abs(D-p),te=Math.min(.8,.3+K*.5),ye=p*(1-te)+D*te;l(`Smoothed look-ahead: ${ye.toFixed(3)}s (adaptation rate: ${(te*100).toFixed(0)}%)`),Math.abs(ye-p)>.3&&l(`Look-ahead adjusted: ${p.toFixed(2)}s → ${ye.toFixed(2)}s`,!1),f.value=ye},q=b=>b===void 0||!s.value.length||!d.value||m.value,X=b=>{const h=Math.round((b+f.value)*1e3);let Q=-1;for(let L=0;L<s.value.length&&Math.round(s.value[L].time*1e3)<=h;L++)Q=L;return Q},J=(b,h)=>{b<0||b===n.value||(l(`Lyric activated: "${s.value[b].text}"`),l(`Activating lyric at ${h.toFixed(2)}s (adjusted: ${(h+f.value).toFixed(2)}s):
    - Index: ${b}
    - Lyric time: ${s.value[b].time.toFixed(2)}s`),l(`Transition details:
    - Raw position: ${h.toFixed(3)}s
    - Dynamic look-ahead: ${f.value.toFixed(3)}s
    - Adjusted position: ${(h+f.value).toFixed(3)}s`),b>0&&W(b,h),v.value=h,n.value=b,Ke(()=>z()))},W=(b,h)=>{const Q=h-v.value,L=s.value[b].time-s.value[b-1].time;l(`Timing analysis:
    - Expected gap: ${L.toFixed(3)}s
    - Actual gap: ${Q.toFixed(3)}s
    - Difference: ${(Q-L).toFixed(3)}s`)},z=()=>{const b=document.querySelector(".lyrics-line.active"),h=c.value;b&&h&&b.scrollIntoView({behavior:"smooth",block:"center"})};return ee(()=>i.mediaItem?.item_id,()=>{x()},{immediate:!0}),ee(()=>i.position,b=>{if(q(b))return;const h=b??0;E(h);const Q=X(h);Q!==n.value&&J(Q,h)}),we(()=>{const b=c.value;b&&b.addEventListener("scroll",()=>{m.value=!0,setTimeout(()=>{m.value=!1},8e3)},{passive:!0})}),(b,h)=>(r(),g("div",Ri,[o.value?(r(),g("div",Fi,[u(Jt,{indeterminate:"",color:e.textColor},null,8,["color"]),P("div",null,I(t(Z)("loading_lyrics")),1)])):s.value.length?T.value&&d.value?(r(),g("div",zi,[P("div",Di,I(i.mediaItem?.name),1),P("div",Oi,I(w.value),1),P("div",Ni,I(t(Z)("lyrics_will_appear_soon")),1)])):(r(),g("div",{key:3,ref_key:"lyricsContainer",ref:c,class:ie(["lyrics-scroll-container",{"static-lyrics":!d.value}])},[(r(!0),g(Y,null,ue(s.value,(Q,L)=>(r(),g("div",{key:L,class:ie(["lyrics-line",{active:n.value===L||!d.value}])},I(Q.text),3))),128))],2)):(r(),g("div",qi,I(t(Z)("no_lyrics_available")),1))]))}}),Hi=oe(Wi,[["__scopeId","data-v-a59ccea0"]]),Ui=["onClick"],Yi={class:"main"},Xi={key:0,class:"main-media-details"},ji={key:0,class:"main-media-details-image"},Gi={class:"main-media-details-track-info"},Ki={key:0},Zi={key:0},Ji={key:12,style:{margin:"auto","padding-top":"20px"}},es={key:1,class:"main-queue-items"},ts={class:"queue-items-scroll-box"},as={class:"media-thumb listitem-media-thumb"},ls={class:"title-row"},is={class:"d-flex"},ss={style:{"white-space":"nowrap"},class:"pr-1"},os={key:0},ns={key:0,style:{"margin-left":"50px"}},rs={key:0,class:"text-caption"},us={key:1,class:"lyrics-wrapper"},cs={key:2,class:"main-queue-items"},ds={class:"main-media-details-image main-media-details-image-alt"},ms={class:"player-bottom"},vs={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},ys={class:"media-controls"},fs={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},hs={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},ps=O({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(e){const{name:i}=ht(),l=e,s=new it,o=A(-1),n=new it,c=A([]),m=A(0),f=A(!1),v=S(()=>a.activePlayerQueue?c.value.slice(a.activePlayerQueue.current_index):[]),T=S(()=>a.activePlayerQueue?c.value.slice(0,a.activePlayerQueue.current_index).reverse():[]),w=S(()=>{const _=a.curQueueItem?.media_item?.metadata?.lyrics,p=a.curQueueItem?.media_item?.metadata?.lrc_lyrics;return!!_&&_.trim().length>0||!!p&&p.trim().length>0}),d=S(()=>{switch(i.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return a.showQueueItems?"1.5em":"2.5em";case"xl":return a.showQueueItems?"1.6em":"3em";case"xxl":return a.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),$=S(()=>{switch(i.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return a.showQueueItems?"1.0em":"1.6em";case"xl":return a.showQueueItems?"1.2em":"2em";case"xxl":return a.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),x=S(()=>Ue.display.height.value>800),E=function(_){a.showFullscreenPlayer=!1,It.push({name:_.media_type,params:{itemId:_.item_id,provider:_.provider}})},q=function(_){a.globalSearchTerm=_,It.push({name:"search"}),a.showFullscreenPlayer=!1},X=function(_,p){const k=c.value.indexOf(p),D=[{label:"play_now",labelArgs:[],action:()=>{W(p,"play_now")},icon:"mdi-play-circle-outline",disabled:k===a.activePlayerQueue?.current_index||k===a.activePlayerQueue?.index_in_buffer},{label:"play_next",labelArgs:[],action:()=>{W(p,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:k<=(a.activePlayerQueue?.index_in_buffer||0)},{label:"queue_move_up",labelArgs:[],action:()=>{W(p,"up")},icon:"mdi-arrow-up",disabled:k<=(a.activePlayerQueue?.index_in_buffer||0)},{label:"queue_move_down",labelArgs:[],action:()=>{W(p,"down")},icon:"mdi-arrow-down",disabled:k<=(a.activePlayerQueue?.index_in_buffer||0)},{label:"queue_delete",labelArgs:[],action:()=>{W(p,"delete")},icon:"mdi-delete",disabled:k<=(a.activePlayerQueue?.index_in_buffer||0)}];p?.media_item?.media_type==F.TRACK&&D.push({label:"show_info",labelArgs:[],action:()=>{E(p.media_item)},icon:"mdi-information-outline",disabled:!1}),Ie.emit("contextmenu",{items:D,posX:_.clientX,posY:_.clientY})},J=function(_){a.activePlayer&&Ie.emit("contextmenu",{items:bl(a.activePlayer,a.activePlayerQueue),posX:_.clientX,posY:_.clientY})},W=function(_,p){!_||!a.activePlayerQueue||(p=="play_now"?M.queueCommandPlayIndex(a.activePlayerQueue?.queue_id,_.queue_item_id):p=="move_next"?M.queueCommandMoveNext(a.activePlayerQueue?.queue_id,_.queue_item_id):p=="up"?M.queueCommandMoveUp(a.activePlayerQueue?.queue_id,_.queue_item_id):p=="down"?M.queueCommandMoveDown(a.activePlayerQueue?.queue_id,_.queue_item_id):p=="delete"&&M.queueCommandDelete(a.activePlayerQueue?.queue_id,_.queue_item_id))},z=async function(){f.value=!0,c.value=[],await Ct(100),f.value=!1},b=async function({done:_}){if(!a.activePlayerQueue||a.activePlayerQueue.items==0){_("empty");return}if(c.value.length>=a.activePlayerQueue?.items){_("empty");return}const p=c.value.length,k=(a.activePlayerQueue.current_index||0)+50,D=await M.getPlayerQueueItems(a.activePlayerQueue.queue_id,k,p);c.value.push(...D),D.length<50?_("empty"):_("ok")};we(()=>{const _=M.subscribe(ll.QUEUE_ITEMS_UPDATED,p=>{p.object_id==a.activePlayerQueue?.queue_id&&(p.data,z())});Ae(_)});const h=async function(_){if(!a.curQueueItem?.media_item)return;if(!a.curQueueItem.media_item.favorite){M.toggleFavorite(a.curQueueItem.media_item);return}let p=a.curQueueItem.media_item;(p.provider!="library"||!("provider_mappings"in p))&&[F.ALBUM,F.ARTIST,F.AUDIOBOOK,F.PLAYLIST,F.PODCAST,F.RADIO,F.TRACK].includes(p.media_type)&&(p=await M.getLibraryItem(p.media_type,p.item_id,p.provider)||p);const k=[];"favorite"in p&&p.favorite&&p.provider=="library"&&[F.ALBUM,F.ARTIST,F.AUDIOBOOK,F.PLAYLIST,F.PODCAST,F.RADIO,F.TRACK].includes(p.media_type)&&k.push({label:"favorites_remove",labelArgs:[],action:()=>{M.removeItemFromFavorites(p.media_type,p.item_id),p.favorite=!1,a.curQueueItem.media_item.favorite=!1},icon:"mdi-heart"}),[F.ALBUM,F.ARTIST,F.AUDIOBOOK,F.PLAYLIST,F.PODCAST,F.RADIO,F.TRACK].includes(p.media_type)&&k.push({label:"add_playlist",labelArgs:[],action:()=>{Ie.emit("playlistdialog",{items:[a.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}),Ie.emit("contextmenu",{items:k,posX:_.clientX,posY:_.clientY})},Q=function(){f.value=!0,Ct(100).then(()=>{f.value=!1})},L=function(_,p){M.playMedia(_.uri,il.PLAY,void 0,p.position.toString())};ee(()=>a.activePlayerId,_=>{z()},{immediate:!0});const B=A(void 0),R=A(void 0);return ft(()=>{const _=Fe("white"),p=Fe("black"),k=5,D=.05,K=Ue.theme.current.value.dark?l.colorPalette.darkColor||"#000":l.colorPalette.lightColor||"#fff";let te=Fe(K);const ye=_.contrast(te),ne=p.contrast(te),fe=ye>=ne;let H=fe?_:p,Ze=Math.max(ye,ne);if(Ze<k){let Pt=D;for(;Ze<k&&Pt<=.5;)fe?te=te.darken(D):te=te.lighten(D),Ze=Fe(H).contrast(te),Pt+=D}document.documentElement.style.setProperty("--text-color",H.hex()),B.value=H.hex(),R.value=te.hex()}),(_,p)=>(r(),V(Zt,{modelValue:t(a).showFullscreenPlayer,"onUpdate:modelValue":p[13]||(p[13]=k=>t(a).showFullscreenPlayer=k),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999"},{default:y(()=>[u(Ne,{color:R.value},{default:y(()=>[u(Il,{class:"v-toolbar-default",color:"transparent"},{prepend:y(()=>[u(pe,{icon:"",onClick:p[0]||(p[0]=k=>t(a).showFullscreenPlayer=!1)},{default:y(()=>[u(le,{icon:"mdi-chevron-down"})]),_:1})]),append:y(()=>[t(a).activePlayerQueue?.radio_source.length?(r(),V(pt,{key:0,scrim:""},{activator:y(({props:k})=>[u(pe,G(k,{icon:""}),{default:y(()=>[u(le,{color:"accent",icon:"mdi-radio-tower"})]),_:1},16)]),default:y(()=>[u(Ne,{title:t(Z)("queue_radio_enabled"),subtitle:t(Z)("queue_radio_based_on")},{text:y(()=>[(r(!0),g(Y,null,ue(t(a).activePlayerQueue?.radio_source,k=>(r(),g("div",{key:k.uri},[P("a",{onClick:D=>E(k)},I(k.name),9,Ui)]))),128))]),_:1},8,["title","subtitle"])]),_:1})):C("",!0),x.value?C("",!0):(r(),V(ma,{key:1})),u(pe,{icon:"",onClick:qe(J,["stop"])},{default:y(()=>[u(le,{icon:"mdi-dots-vertical"})]),_:1})]),_:1}),P("div",Yi,[t(ae)("bp7")||!t(a).showQueueItems?(r(),g("div",Xi,[_.$vuetify.display.height>600?(r(),g("div",ji,[t(a).activePlayer?.powered!=!1&&t(a).curQueueItem?(r(),V(Ee,{key:0,item:t(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"},fallback:_.$vuetify.theme.current.dark?t(Ye):t(at)},null,8,["item","fallback"])):t(a).activePlayer?.powered!=!1&&!t(a).curQueueItem?.image&&t(a).activePlayer?.current_media?.image_url?(r(),V(We,{key:1,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:t(a).activePlayer.current_media.image_url},null,8,["src"])):(r(),V(We,{key:2,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:_.$vuetify.theme.current.dark?t(Ye):t(at)},null,8,["src"]))])):C("",!0),P("div",Gi,[t(a).activePlayer?.powered==!1?(r(),V(Se,{key:0,style:j(`font-size: ${d.value};`)},{default:y(()=>[N(I(t(a).activePlayer?.name),1)]),_:1},8,["style"])):t(a).curQueueItem?.media_item?(r(),V(Se,{key:1,style:j(`font-size: ${d.value};cursor:pointer;`),onClick:p[1]||(p[1]=k=>E(t(a).curQueueItem.media_item))},{default:y(()=>[u(se,{sync:t(s)},{default:y(()=>[N(I(t(a).curQueueItem.media_item.name)+" ",1),"version"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.version?(r(),g("span",Ki,"("+I(t(a).curQueueItem.media_item.version)+")",1)):C("",!0)]),_:1},8,["sync"])]),_:1},8,["style"])):!t(a).activePlayerQueue&&t(a).activePlayer?.current_media?.title?(r(),V(Se,{key:2},{default:y(()=>[t(a).activePlayer?.current_media?.artist?(r(),g("div",Zi,[u(se,{sync:t(s)},{default:y(()=>[N(I(t(a).activePlayer?.current_media?.artist),1)]),_:1},8,["sync"])])):C("",!0),t(a).activePlayer?.current_media?.title?(r(),g("div",{key:1,style:j(`font-size: ${$.value};`)},[u(se,{sync:t(s)},{default:y(()=>[N(I(t(a).activePlayer?.current_media?.title),1)]),_:1},8,["sync"])],4)):C("",!0)]),_:1})):(r(),V(Se,{key:3,style:j(`font-size: ${d.value};cursor:pointer;`),onClick:p[2]||(p[2]=k=>t(a).showPlayersMenu=!0)},{default:y(()=>[u(se,{sync:t(s)},{default:y(()=>[N(I(t(a).activePlayer?.name||t(Z)("no_player")),1)]),_:1},8,["sync"])]),_:1},8,["style"])),t(a).activePlayer?.powered==!1?(r(),V(he,{key:4,class:"text-h6 text-md-h5 text-lg-h4"},{default:y(()=>[N(I(t(Z)("off")),1)]),_:1})):C("",!0),t(a).curQueueItem?.streamdetails?.stream_metadata&&t(a).curQueueItem?.streamdetails?.stream_metadata.title&&t(a).curQueueItem?.streamdetails?.stream_metadata.artist?(r(),V(he,{key:5,class:"text-h6 text-md-h5 text-lg-h4",onClick:p[3]||(p[3]=k=>q(`${t(a).curQueueItem?.streamdetails?.stream_metadata.artist} - ${t(a).curQueueItem?.streamdetails?.stream_metadata.title}`))},{default:y(()=>[u(se,{sync:t(s)},{default:y(()=>[N(I(t(a).curQueueItem?.streamdetails?.stream_metadata.artist)+" - "+I(t(a).curQueueItem?.streamdetails?.stream_metadata.title),1)]),_:1},8,["sync"])]),_:1})):C("",!0),t(a).curQueueItem?.streamdetails?.stream_metadata&&t(a).curQueueItem?.streamdetails?.stream_metadata.title?(r(),V(he,{key:6,class:"text-h6 text-md-h5 text-lg-h4",onClick:p[4]||(p[4]=k=>q(t(a).curQueueItem?.streamdetails?.stream_metadata.title))},{default:y(()=>[u(se,{sync:t(s)},{default:y(()=>[N(I(t(a).curQueueItem?.streamdetails?.stream_metadata.title),1)]),_:1},8,["sync"])]),_:1})):C("",!0),t(a).curQueueItem?.media_item&&"album"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.album&&t(a).activePlayer?.powered!=!1?(r(),V(he,{key:7,style:j(`font-size: ${$.value};cursor:pointer;`),onClick:p[5]||(p[5]=k=>E(t(a).curQueueItem.media_item.album))},{default:y(()=>[u(se,{sync:t(s)},{default:y(()=>[N(I(t(a).curQueueItem.media_item.album.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):C("",!0),t(a).curQueueItem?.media_item&&"artists"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.artists.length&&t(a).activePlayer?.powered!=!1?(r(),V(he,{key:8,style:j(`font-size: ${$.value};cursor:pointer;`),onClick:p[6]||(p[6]=k=>E(t(a).curQueueItem.media_item.artists[0]))},{default:y(()=>[u(se,{sync:t(s)},{default:y(()=>[N(I(t(a).curQueueItem.media_item.artists[0].name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):C("",!0),t(a).curQueueItem?.media_item&&"podcast"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.podcast?(r(),V(he,{key:9,style:j(`font-size: ${$.value};`)},{default:y(()=>[u(se,{sync:t(s)},{default:y(()=>[N(I(t(a).curQueueItem.media_item.podcast.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):t(a).activePlayer&&t(a).activePlayer?.active_source!=t(a).activePlayer?.player_id&&t(a).activePlayer?.powered!=!1?(r(),V(he,{key:10},{default:y(()=>[N(I(t(Z)("external_source_active",[t(Xt)(t(a).activePlayer)])),1)]),_:1})):t(a).activePlayerQueue&&t(a).activePlayerQueue.items==0&&t(a).activePlayer?.powered!=!1?(r(),V(he,{key:11,style:j(`font-size: ${$.value}`)},{default:y(()=>[N(I(t(Z)("queue_empty")),1)]),_:1},8,["style"])):C("",!0),t(a).activePlayer?.powered!=!1?(r(),g("div",Ji,[u(jt)])):C("",!0)])])):C("",!0),t(a).showQueueItems?(r(),g("div",es,[u(hi,{modelValue:m.value,"onUpdate:modelValue":p[7]||(p[7]=k=>m.value=k),"hide-slider":"",density:"compact",onClick:Q},{default:y(()=>[u(Oe,{value:0},{default:y(()=>[N(I(t(Z)("queue"))+" ",1),u(et,{color:"grey",content:(t(a).activePlayerQueue?.items||0)-(t(a).activePlayerQueue?.current_index||0),inline:""},null,8,["content"])]),_:1}),u(Oe,{value:1},{default:y(()=>[N(I(t(Z)("played"))+" ",1),u(et,{color:"grey",content:t(a).activePlayerQueue?.current_index,inline:""},null,8,["content"])]),_:1}),w.value?(r(),V(Oe,{key:0,value:2},{default:y(()=>[N(I(t(Z)("lyrics")),1)]),_:1})):C("",!0)]),_:1},8,["modelValue"]),P("div",ts,[!f.value&&m.value!==2?(r(),V(hl,{key:0,onLoad:b,"empty-text":"",height:"100%"},{default:y(()=>[u(Cl,{"item-height":70,"max-height":"90%",items:m.value==0?v.value:T.value},{default:y(({item:k,index:D})=>[u(wl,{link:"","show-menu-btn":!0,disabled:!k.available,onClick:qe(K=>X(K,k),["stop"]),onMenu:qe(K=>X(K,k),["stop"]),onMouseenter:K=>o.value=D,onMouseleave:p[8]||(p[8]=K=>o.value=-1)},{prepend:y(()=>[P("div",as,[u(Ee,{size:"50",item:k},null,8,["item"])])]),title:y(()=>[P("div",ls,[u(se,{sync:D==0&&m.value==0?t(s):t(n),disabled:!(D==0&&m.value==0||o.value==D)},{default:y(()=>[P("span",{class:ie({"is-playing":k.queue_item_id===t(a).curQueueItem?.queue_item_id})},I(k.name),3)]),_:2},1032,["sync","disabled"])])]),subtitle:y(()=>[P("div",is,[P("span",ss,I(t(Me)(k.duration))+" | ",1),u(se,{sync:D==0&&m.value==0?t(s):t(n),disabled:!(D==0&&m.value==0||o.value==D)},{default:y(()=>[k.media_item&&"album"in k.media_item&&k.media_item.album?(r(),g("span",os,I(k.media_item.album.name),1)):C("",!0)]),_:2},1032,["sync","disabled"])])]),append:y(()=>[k.queue_item_id===t(a).curQueueItem?.queue_item_id&&t(a).activePlayer?.playback_state!=t(He).IDLE?(r(),V(xl,{key:0,"show-badge":t(ae)("bp4")},null,8,["show-badge"])):C("",!0),k.available?C("",!0):(r(),V(le,{key:1},{default:y(()=>[...p[14]||(p[14]=[N("mdi-alert",-1)])]),_:1}))]),_:2},1032,["disabled","onClick","onMenu","onMouseenter"]),k.queue_item_id==t(a).curQueueItem?.queue_item_id&&k.media_item?.metadata?.chapters?.length?(r(),g("div",ns,[(r(!0),g(Y,null,ue(k.media_item.metadata?.chapters,K=>(r(),V(Qe,{key:K.position,onClick:qe(te=>L(k.media_item,K),["stop"])},{title:y(()=>[P("div",null,I(K.name),1)]),append:y(()=>[K.end?(r(),g("span",rs,I(t(Me)(K.end-K.start)),1)):C("",!0)]),_:2},1032,["onClick"]))),128))])):C("",!0)]),_:1},8,["items"])]),_:1})):C("",!0),m.value===2?(r(),g("div",us,[u(Hi,{"media-item":t(a).curQueueItem?.media_item,position:t(a).activePlayerQueue?.elapsed_time,duration:t(a).curQueueItem?.duration,"stream-details":t(a).curQueueItem?.streamdetails,"text-color":B.value},null,8,["media-item","position","duration","stream-details","text-color"])])):C("",!0)])])):C("",!0),!t(a).showQueueItems&&_.$vuetify.display.height<=600?(r(),g("div",cs,[P("div",ds,[u(Ee,{item:t(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"}},null,8,["item"])])])):C("",!0)]),P("div",ms,[P("div",vs,[u(va,{"show-labels":!0,color:B.value},null,8,["color"])]),P("div",ys,[t(a).activePlayerQueue?(r(),V(ke,{key:0,disabled:!t(a).curQueueItem?.media_item,icon:t(a).curQueueItem?.media_item?.favorite?"mdi-heart":"mdi-heart-outline",title:t(Z)("tooltip.favorite"),variant:"button",class:"media-controls-item","max-height":"30px",onClick:h},null,8,["disabled","icon","title"])):C("",!0),_.$vuetify.display.mdAndUp?(r(),V(ca,{key:1,"player-queue":t(a).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):C("",!0),u(ua,{player:t(a).activePlayer,"player-queue":t(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),u(ra,{player:t(a).activePlayer,"player-queue":t(a).activePlayerQueue,class:"media-controls-item","max-height":"70px"},null,8,["player","player-queue"]),u(na,{player:t(a).activePlayer,"player-queue":t(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),_.$vuetify.display.mdAndUp?(r(),V(oa,{key:2,"player-queue":t(a).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):C("",!0),t(a).activePlayerQueue?(r(),V(da,{key:3,class:"media-controls-item","max-height":"30px"})):C("",!0)]),t(a).activePlayer&&t(a).activePlayer.volume_control!=t(lt)?(r(),g("div",fs,[u(_t,{width:"100%","is-powered":t(a).activePlayer?.powered!=!1,disabled:!t(a).activePlayer||!t(a).activePlayer?.available,"model-value":Math.round(t(a).activePlayer?.group_volume||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus",color:B.value,"allow-wheel":!0,"onUpdate:modelValue":p[9]||(p[9]=k=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolume(t(a).activePlayerId,k):t(M).playerCommandVolumeSet(t(a).activePlayerId,k)),"onClick:prepend":p[10]||(p[10]=k=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolumeDown(t(a).activePlayerId):t(M).playerCommandVolumeDown(t(a).activePlayerId)),"onClick:append":p[11]||(p[11]=k=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolumeUp(t(a).activePlayerId):t(M).playerCommandVolumeUp(t(a).activePlayerId))},null,8,["is-powered","disabled","model-value","color"])])):C("",!0),x.value?(r(),g("div",hs,[u(_e,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:p[12]||(p[12]=k=>t(a).showPlayersMenu=!0)},{default:y(()=>[u(le,{icon:t(a).activePlayer?.icon||"mdi-speaker"},null,8,["icon"]),N(" "+I(t(a).activePlayer?t(Gt)(t(a).activePlayer):""),1)]),_:1})])):C("",!0)])]),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),gs=oe(ps,[["__scopeId","data-v-291f8a20"]]),bs={key:1},_s={key:2,class:"icon-thumb"},ws={key:0},Ps={key:2},ks={key:3},xs={key:4},Is={key:0,class:"pl-4"},Cs={key:0},$s={key:1},Qs={key:2},Vs={key:3},Ss={key:4},Ts={key:5},Ls={key:6,class:"line-clamp-1"},Ms={key:7},Es={key:8,class:"line-clamp-1"},Bs={key:9,class:"line-clamp-1"},As={key:0},Rs=O({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(e){const i=new it,l=e,s=S(()=>a.activePlayerQueue?.current_item?.streamdetails);return(o,n)=>(r(),g(Y,null,[u(Qe,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:y(()=>[P("div",{class:"media-thumb player-media-thumb",style:j(`cursor: pointer;height: ${t(ae)({breakpoint:"phone"})?60:64}px; width: ${t(ae)({breakpoint:"phone"})?60:64}px; `),onClick:n[0]||(n[0]=c=>t(a).showFullscreenPlayer=!0)},[t(a).activePlayer?.powered!=!1&&t(a).curQueueItem?(r(),V(Ee,{key:0,item:t(a).curQueueItem,fallback:t(Ye)},null,8,["item","fallback"])):t(a).activePlayer?.powered!=!1&&t(a).activePlayer?.current_media?.image_url?(r(),g("div",bs,[u(We,{class:"media-thumb",style:{"border-radius":"4px"},size:"60",src:t(a).activePlayer.current_media.image_url},null,8,["src"])])):(r(),g("div",_s,[u(le,{size:"24",icon:t(a).activePlayer?.type==t(De).PLAYER&&t(a).activePlayer?.group_members.length?"mdi-speaker-multiple":t(a).activePlayer?.icon||"mdi-speaker"},null,8,["icon"])]))],4)]),title:y(()=>[P("div",{style:j({cursor:"pointer",color:e.primaryColor})},[t(a).activePlayer?.powered==!1?(r(),g("div",{key:0,onClick:n[1]||(n[1]=c=>t(a).showPlayersMenu=!0)},I(t(a).activePlayer?.name),1)):t(a).curQueueItem?.media_item?(r(),g("div",{key:1,onClick:n[2]||(n[2]=c=>t(a).showFullscreenPlayer=!0)},[u(se,{sync:t(i)},{default:y(()=>[N(I(t(a).curQueueItem.media_item.name)+" ",1),"version"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.version?(r(),g("span",ws,"("+I(t(a).curQueueItem.media_item.version)+")",1)):C("",!0)]),_:1},8,["sync"])])):t(a).curQueueItem?(r(),g("div",Ps,I(t(a).curQueueItem.name),1)):!t(a).activePlayerQueue&&t(a).activePlayer?.current_media?.title?(r(),g("div",ks,I(t(a).activePlayer.current_media.title),1)):t(a).activePlayer?(r(),g("div",xs,I(t(a).activePlayer?.name),1)):(r(),g("div",{key:5,onClick:n[3]||(n[3]=c=>t(a).showPlayersMenu=!0)},I(o.$t("no_player")),1))],4)]),append:y(()=>[s.value?.audio_format.content_type&&!t(ae)({breakpoint:"phone"})&&e.showQualityDetailsBtn?(r(),g("div",Is,[u(jt)])):C("",!0)]),subtitle:y(()=>[P("div",{style:j({cursor:"pointer",color:e.primaryColor}),class:"line-clamp-1",onClick:n[4]||(n[4]=c=>t(a).showFullscreenPlayer=!0)},[u(se,{sync:t(i)},{default:y(()=>[t(a).activePlayer?.powered==!1?(r(),g("div",Cs,I(o.$t("off")),1)):t(a).curQueueItem&&t(a).curQueueItem.media_item?.media_type==t(F).TRACK&&"album"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.album&&!l.showOnlyArtist?(r(),g("div",$s,I(t(sl)(t(a).curQueueItem.media_item.artists))+" • "+I(t(a).curQueueItem.media_item.album.name),1)):t(a).curQueueItem?.media_item&&"artists"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.artists.length>0?(r(),g("div",Qs,I(t(a).curQueueItem.media_item.artists[0].name),1)):t(a).curQueueItem?.media_item&&"podcast"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.podcast?.name?(r(),g("div",Vs,I(t(a).curQueueItem.media_item.podcast.name),1)):t(a).curQueueItem?.streamdetails?.stream_metadata&&t(a).curQueueItem?.streamdetails?.stream_metadata.title&&t(a).curQueueItem?.streamdetails?.stream_metadata.artist?(r(),g("div",Ss,I(t(a).curQueueItem?.streamdetails?.stream_metadata.artist)+" - "+I(t(a).curQueueItem?.streamdetails?.stream_metadata.title),1)):t(a).curQueueItem?.streamdetails?.stream_metadata&&t(a).curQueueItem?.streamdetails?.stream_metadata.title?(r(),g("div",Ts,I(t(a).curQueueItem?.streamdetails?.stream_metadata.title),1)):t(a).curQueueItem?.media_item?.metadata.description?(r(),g("div",Ls,I(t(ol)(t(a).curQueueItem.media_item.metadata.description,100)),1)):!t(a).activePlayerQueue&&t(a).activePlayer?.active_source&&t(a).activePlayer?.current_media?.artist?(r(),g("div",Ms,I(t(a).activePlayer.current_media.artist),1)):!t(a).activePlayerQueue&&t(a).activePlayer?.active_source?(r(),g("div",Es,I(o.$t("external_source_active",[t(Xt)(t(a).activePlayer)])),1)):t(a).activePlayerQueue&&t(a).activePlayerQueue.items==0?(r(),g("div",Bs,I(o.$t("queue_empty")),1)):C("",!0)]),_:1},8,["sync"]),t(a).activePlayer&&t(a).activePlayer?.powered!=!1?(r(),g("div",As,I(t(Gt)(t(a).activePlayer)),1)):C("",!0)],4)]),_:1}),u(gs,{"show-fullscreen":t(a).showFullscreenPlayer,"color-palette":e.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),Fs=oe(Rs,[["__scopeId","data-v-4af10a97"]]),qs=["data-floating"],zs=["data-mobile"],Ds={class:"mediacontrols-left"},Os={class:"mediacontrols-bottom-center"},Ns={class:"mediacontrols-bottom-right"},Ws={key:0,class:"volume-slider"},Hs=O({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(e){Yt(n=>({v0920870d:o.value}));const{mobile:i}=ht({mobileBreakpoint:576}),l=A({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),s=new Image;s.src=Ue.theme.current.value.dark?Ye:at,s.crossOrigin="Anonymous",s.addEventListener("load",function(){l.value=nl(s)});const o=S(()=>Ue.theme.current.value.dark?l.value&&l.value.darkColor?l.value.darkColor:"#CCCCCC26":l.value&&l.value.lightColor?l.value.lightColor:"#CCCCCC26");return ee(()=>a.curQueueItem?.queue_item_id,()=>{a.curQueueItem?.media_item?s.src=$t(a.curQueueItem.media_item,Qt.THUMB)||"":a.curQueueItem?s.src=$t(a.curQueueItem,Qt.THUMB)||"":s.src=""}),(n,c)=>(r(),g(Y,null,[P("div",{class:"mediacontrols-bg","data-floating":e.useFloatingPlayer},null,8,qs),P("div",{class:"mediacontrols","data-mobile":t(i)},[P("div",Ds,[u(Fs,{"show-quality-details-btn":!!t(ae)("bp8"),"show-only-artist":!t(ae)("bp7"),"color-palette":l.value,"primary-color":n.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),P("div",Os,[u(qt,{"visible-components":{repeat:{isVisible:t(ae)("bp3")},shuffle:{isVisible:t(ae)("bp3")},play:{isVisible:!0,icon:{staticWidth:"48px",staticHeight:"48px"}},previous:{isVisible:t(ae)("bp3")},next:{isVisible:t(ae)("bp3")}}},null,8,["visible-components"]),t(ae)("bp6")?(r(),V(va,{key:0,"is-progress-bar":!1,disabled:!t(a).activePlayerQueue?.active||t(a).activePlayerQueue?.current_item?.media_item?.media_type!==t(F).TRACK},null,8,["disabled"])):C("",!0)]),P("div",Ns,[P("div",null,[u(Si,{queue:{isVisible:t(ae)("bp3"),color:n.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:n.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!t(i)&&(t(a).activePlayer?.volume_control!=t(lt)||t(a).activePlayer?.group_members.length>0),color:n.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),u(qt,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:t(ae)({breakpoint:"bp3",condition:"lt"}),icon:{staticWidth:"40px",staticHeight:"40px",color:n.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],8,zs),t(i)&&(t(a).activePlayer?.volume_control!=t(lt)||t(a).activePlayer?.group_members.length>0)?(r(),g("div",Ws,[u(_t,{width:"100%",color:"secondary","is-powered":t(a).activePlayer?.powered!=!1,disabled:!t(a).activePlayer||!t(a).activePlayer?.available,"model-value":Math.round(t(a).activePlayer?.group_volume||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":c[0]||(c[0]=m=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolume(t(a).activePlayerId,m):t(M).playerCommandVolumeSet(t(a).activePlayerId,m)),"onClick:prepend":c[1]||(c[1]=m=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolumeDown(t(a).activePlayerId):t(M).playerCommandVolumeDown(t(a).activePlayerId)),"onClick:append":c[2]||(c[2]=m=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolumeUp(t(a).activePlayerId):t(M).playerCommandVolumeUp(t(a).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):C("",!0)],64))}}),Us=oe(Hs,[["__scopeId","data-v-f0b417b2"]]),Ys={class:"menuButton"},Xs={class:"menuButton"},js=O({__name:"BottomNavigation",props:{height:{}},setup(e){const i=ea(),l=A(!1);return(s,o)=>(r(),V(Hl,{height:e.height,"bg-color":"default",grow:"",role:"navigation"},{default:y(()=>[(r(!0),g(Y,null,ue(t(i).filter(n=>!n.isLibraryNode),n=>(r(),V(_e,{key:n.label,to:n.path,"aria-label":s.$t(n.label),tabindex:"0",variant:"text","active-color":"fg","base-color":"grey"},{default:y(()=>[u(le,{size:"xx-large"},{default:y(()=>[N(I(n.icon),1)]),_:2},1024),P("span",Ys,I(s.$t(n.label)),1)]),_:2},1032,["to","aria-label"]))),128)),u(pt,null,{activator:y(({props:n})=>[u(_e,G(n,{"aria-haspopup":"true","aria-expanded":l.value.toString(),"aria-label":"Open library menu","base-color":"grey"}),{default:y(()=>[u(le,{size:"xx-large"},{default:y(()=>[...o[0]||(o[0]=[N("mdi-bookshelf",-1)])]),_:1}),P("span",Xs,I(s.$t("library")),1)]),_:1},16,["aria-expanded"])]),default:y(()=>[u(Ce,null,{default:y(()=>[(r(!0),g(Y,null,ue(t(i).filter(n=>n.isLibraryNode),n=>(r(),V(Qe,{key:n.label,title:s.$t(n.label),"prepend-icon":n.icon,to:n.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})]),_:1},8,["height"]))}}),Gs=O({__name:"Footer",setup(e){const i=S(()=>a.isInStandaloneMode?100:80);return(l,s)=>(r(),g(Y,null,[t(a).mobileLayout?(r(),g("div",{key:0,class:ie(l.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:`
      position: fixed;
      width: 100%;
      height: 180px;
      bottom: 0px;
      z-index: 999;
    `},null,2)):C("",!0),t(a).mobileLayout?(r(),V(js,{key:1,height:i.value},null,8,["height"])):C("",!0),u(ei,{app:"",color:"default",class:ie(`py-0 px-0 ${t(a).mobileLayout?"mediacontrols-player-float":"mediacontrols-player-default"}`)},{default:y(()=>[u(Us,{"use-floating-player":t(a).mobileLayout},null,8,["use-floating-player"])]),_:1},8,["class"])],64))}}),Ks={style:{float:"right","margin-right":"-20px"}},Zs=O({__name:"PlayerSelect",setup(e){const i=A(!1),l=A(null),s=S(()=>Object.values(M.players).filter(m=>Vt(m)).filter(m=>m.player_id!==ge.player_id).sort((m,f)=>m.name.toUpperCase()>f.name?.toUpperCase()?1:-1));ee(()=>a.activePlayerId,m=>{m&&localStorage.setItem("mass.LastPlayerId",m)}),ee(()=>M.players,m=>{m&&!a.activePlayer&&n()},{deep:!0}),ee(()=>M.state,m=>{m.value!=ul.CONNECTED&&(a.activePlayerId=void 0)},{deep:!0});function o(m,f=!1){a.activePlayerId==m.player_id?i.value=!i.value:(i.value=!1,a.activePlayerId=m.player_id),f&&(a.showPlayersMenu=!1)}we(()=>{n()});const n=function(){if(a.activePlayer&&Vt(a.activePlayer))return;const m=c();m&&(a.activePlayerId=m)},c=function(){const m=localStorage.getItem("mass.LastPlayerId");if(m&&m in M.players&&M.players[m].available)return m};return(m,f)=>(r(),g(Y,null,[u(Kt,{modelValue:t(a).showPlayersMenu,"onUpdate:modelValue":f[0]||(f[0]=v=>t(a).showPlayersMenu=v)},null,8,["modelValue"]),t(a).showPlayersMenu?(r(),V(ui,{key:0,modelValue:t(a).showPlayersMenu,"onUpdate:modelValue":f[4]||(f[4]=v=>t(a).showPlayersMenu=v),location:"right",app:"",clipped:"",temporary:"",width:460,style:{"z-index":"99999"},"z-index":"99999",color:"background"},{default:y(()=>[P("div",null,[u(Se,{class:"title",style:{"padding-top":"20px","padding-bottom":"20px"}},{default:y(()=>[P("b",null,I(m.$t("players")),1),P("div",Ks,[u(pe,{variant:"icon",to:{name:"playersettings"}},{default:y(()=>[u(le,{size:"30"},{default:y(()=>[...f[5]||(f[5]=[N("mdi-cog-outline",-1)])]),_:1})]),_:1}),u(pe,{variant:"icon",onClick:f[1]||(f[1]=v=>t(a).showPlayersMenu=!1)},{default:y(()=>[u(le,{size:"30"},{default:y(()=>[...f[6]||(f[6]=[N("mdi-window-close",-1)])]),_:1})]),_:1})])]),_:1}),u(tt),u(Ce,{flat:"",style:{margin:"0px 10px",padding:"0"}},{default:y(()=>[t(ge).mode===t(rl).BUILTIN&&t(ge).player_id&&t(M).players[t(ge).player_id]?(r(),V(ze,{key:0,id:t(ge).player_id,style:{margin:"10px 0px"},player:t(M).players[t(ge).player_id],"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":!1,"show-sync-controls":!1,"allow-power-control":!0,onClick:f[2]||(f[2]=v=>o(t(M).players[t(ge).player_id]))},null,8,["id","player"])):C("",!0),(r(!0),g(Y,null,ue(s.value.filter(v=>[t(He).PLAYING,t(He).PAUSED].includes(v.playback_state)||t(M).queues[v.player_id]?.items>0&&v.powered!=!1),v=>(r(),V(ze,{id:v.player_id,key:v.player_id,style:{margin:"10px 0px"},player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&v.player_id==t(a).activePlayerId,"show-sync-controls":v.supported_features.includes(t(Le).SET_MEMBERS),"allow-power-control":!0,onClick:T=>o(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),u($l,{modelValue:l.value,"onUpdate:modelValue":f[3]||(f[3]=v=>l.value=v),variant:"accordion",flat:"",class:"expansion"},{default:y(()=>[u(Tt,{style:{padding:"0"}},{default:y(()=>[u(Lt,null,{default:y(()=>[P("h3",null,I(m.$t("all_players")),1)]),_:1}),u(Mt,{style:{padding:"0"}},{default:y(()=>[u(Ce,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(r(!0),g(Y,null,ue(s.value.filter(v=>v.type!=t(De).GROUP),v=>(r(),V(ze,{id:v.player_id,key:v.player_id,style:{margin:"5px 0px"},player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&v.player_id==t(a).activePlayerId,"show-sync-controls":v.supported_features.includes(t(Le).SET_MEMBERS),"allow-power-control":!0,onClick:T=>o(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1}),s.value.filter(v=>v.type==t(De).GROUP).length?(r(),V(Tt,{key:0,style:{padding:"0"}},{default:y(()=>[u(Lt,null,{default:y(()=>[P("h3",null,I(m.$t("all_groups")),1)]),_:1}),u(Mt,{style:{padding:"0"}},{default:y(()=>[u(Ce,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(r(!0),g(Y,null,ue(s.value.filter(v=>v.type==t(De).GROUP),v=>(r(),V(ze,{id:v.player_id,key:v.player_id,style:{margin:"5px 0px"},player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&v.player_id==t(a).activePlayerId,"show-sync-controls":v.supported_features.includes(t(Le).SET_MEMBERS),"allow-power-control":!0,onClick:T=>o(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1})):C("",!0)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])):C("",!0)],64))}}),Js=oe(Zs,[["__scopeId","data-v-cc077ef3"]]);function eo(e={}){const{immediate:i=!1,onNeedRefresh:l,onOfflineReady:s,onRegistered:o,onRegisteredSW:n,onRegisterError:c}=e;let m,f,v;const T=async(d=!0)=>{await f,v?.()};async function w(){if("serviceWorker"in navigator){if(m=await cl(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:d}},[],import.meta.url).then(({Workbox:d})=>new d("./sw.js",{scope:"./",type:"classic"})).catch(d=>{c?.(d)}),!m)return;v=()=>{m?.messageSkipWaiting()};{let d=!1;const $=()=>{d=!0,m?.addEventListener("controlling",x=>{x.isUpdate&&window.location.reload()}),l?.()};m.addEventListener("installed",x=>{typeof x.isUpdate>"u"?typeof x.isExternal<"u"&&x.isExternal?$():!d&&s?.():x.isUpdate||s?.()}),m.addEventListener("waiting",$)}m.register({immediate:i}).then(d=>{n?n("./sw.js",d):o?.(d)}).catch(d=>{c?.(d)})}}return f=w(),T}function to(e={}){const{immediate:i=!0,onNeedRefresh:l,onOfflineReady:s,onRegistered:o,onRegisteredSW:n,onRegisterError:c}=e,m=A(!1),f=A(!1);return{updateServiceWorker:eo({immediate:i,onNeedRefresh(){m.value=!0,l?.()},onOfflineReady(){f.value=!0,s?.()},onRegistered:o,onRegisteredSW:n,onRegisterError:c}),offlineReady:f,needRefresh:m}}const ao={key:0,class:"pwa-toast",role:"alert"},lo={class:"message"},io={key:0},so={key:1},oo=O({__name:"ReloadPrompt",setup(e){const{offlineReady:i,needRefresh:l,updateServiceWorker:s}=to(),o=async()=>{i.value=!1,l.value=!1};return(n,c)=>t(i)||t(l)?(r(),g("div",ao,[P("div",lo,[t(i)?(r(),g("span",io," App ready to work offline ")):(r(),g("span",so," New content available, click on reload button to update. "))]),t(l)?(r(),g("button",{key:0,onClick:c[0]||(c[0]=m=>t(s)())},"Reload")):C("",!0),P("button",{onClick:o},"Close")])):C("",!0)}}),no=O({__name:"Default",setup(e){const i=dl();return ee([()=>i.query.player,()=>Object.keys(M.players).length],([l])=>{if(!l)return;const s=l.toString().toLowerCase(),o=Object.values(M.players).find(n=>n.player_id.toLowerCase()===s||n.name.toLowerCase()===s)?.player_id;o&&(a.activePlayerId=o)},{immediate:!0}),ee(()=>i.query.showFullscreenPlayer,l=>{a.showFullscreenPlayer=!!l},{immediate:!0}),ee(()=>i.query.frameless,l=>{l&&(a.frameless=!0)},{immediate:!0}),(l,s)=>(r(),g(Y,null,[t(a).connected?(r(),V(Nl,{key:0},{default:y(()=>[t(a).frameless?(r(),V(Et,{key:0})):(r(),g(Y,{key:1},[u(Js),u(Et),u(Gs)],64))]),_:1})):(r(),V(Kt,{key:1,class:"centeredoverlay",persistent:"","model-value":!t(a).connected},{default:y(()=>[P("div",null,[u(Jt,{color:"primary",indeterminate:"",size:"64"})])]),_:1},8,["model-value"])),t(a).isInStandaloneMode?(r(),V(oo,{key:2})):C("",!0)],64))}}),Vo=oe(no,[["__scopeId","data-v-3dcdb3ba"]]);export{Vo as default};
