import{n as $}from"./index.browser-OxPLOBIU.js";import{d as H,i as k,j as I,m as o,a_ as L,l as N,ac as S,c as V,b as i,w as s,bI as x,bl as P,o as m,q as w,a as u,u as a,e as b,b3 as h,b4 as f,t as C,b5 as g,bE as M,cg as j,p as D,bC as U,n as O,bJ as q,bw as z}from"./index-ra7TBoRz.js";import{E as J}from"./EditConfig-BE9KVxcR.js";import{a as R,b as F}from"./VBtn-B-NuY1a5.js";import"./VForm-CylqtGZY.js";import"./VInput-CEXId6XX.js";import"./VExpansionPanels-CVniPvfe.js";import"./VAlert-B1mdsVdb.js";import"./VSwitch-PhUs-I1F.js";import"./VTextField-B-G8xtcN.js";import"./VVirtualScroll-CDzAG2cn.js";import"./VSlider-D6BtFUZc.js";import"./VDialog-CAKjRQF6.js";import"./VSpacer-UUBEbx8b.js";/* empty css              */import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={key:0,style:{"margin-left":"-5px","margin-right":"-5px"}},K={id:"auth",href:"",target:"_blank"},de=H({__name:"AddProviderDetails",props:{domain:{}},setup(r){const T=q(),p=k([]),y=$(11),d=k(!1),c=k(!1),v=r;I(()=>{const n=o.subscribe(L.AUTH_SESSION,e=>{if(e.object_id!==y)return;const t=e.data;c.value=!0,window.setTimeout(()=>{const l=document.getElementById("auth");l.setAttribute("href",t),l.click()},100)});N(n)}),S(()=>v.domain,async n=>{n&&(p.value=await o.getProviderConfigEntries(v.domain,void 0,void 0,{session_id:y}))},{immediate:!0});const A=async function(n){d.value=!0,o.saveProviderConfig(v.domain,n).then(()=>{T.push({name:"providersettings"})}).catch(e=>{alert(e)}).finally(()=>{d.value=!1,c.value=!1})},E=async function(n,e){d.value=!0;for(const t of p.value)t.value!==void 0&&e[t.key]==null&&(e[t.key]=t.value);e.session_id=y,o.getProviderConfigEntries(v.domain,void 0,n,e).then(t=>{p.value=t}).catch(t=>{alert(t)}).finally(()=>{d.value=!1,c.value=!1})},B=function(n){const e=[],{t}=z();for(const l of n)l.includes("@")?e.push(`[${l.replace("@","")}](https://github.com/${l.replace("@","")})`):e.push(l);return`**${t("settings.codeowners")}**: `+e.join(" / ")};return(n,e)=>(m(),V("section",null,[i(x,null,{default:s(()=>[a(o).providerManifests[r.domain]?(m(),V("div",G,[i(h,null,{default:s(()=>[f(C(n.$t("settings.setup_provider",[a(o).providerManifests[r.domain].name])),1)]),_:1}),i(g,{innerHTML:a(M)(a(o).providerManifests[r.domain].description)},null,8,["innerHTML"]),e[3]||(e[3]=u("br",null,null,-1)),a(o).providerManifests[r.domain].codeowners.length?(m(),b(g,{key:0,innerHTML:a(M)(B(a(o).providerManifests[r.domain].codeowners))},null,8,["innerHTML"])):w("",!0),a(o).providerManifests[r.domain].documentation?(m(),b(g,{key:1},{default:s(()=>[u("b",null,C(n.$t("settings.need_help_setup_provider")),1),e[2]||(e[2]=f("Â  ",-1)),u("a",{onClick:e[0]||(e[0]=t=>a(j)(a(o).providerManifests[r.domain].documentation))},C(n.$t("settings.check_docs")),1)]),_:1})):w("",!0)])):w("",!0),e[4]||(e[4]=u("br",null,null,-1)),i(D),e[5]||(e[5]=u("br",null,null,-1)),e[6]||(e[6]=u("br",null,null,-1)),i(J,{"config-entries":p.value,disabled:!1,onSubmit:A,onAction:E},null,8,["config-entries"])]),_:1}),i(P,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=t=>d.value=t),scrim:"true",persistent:"",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:s(()=>[c.value?(m(),b(O,{key:0,style:{"background-color":"white"}},{default:s(()=>[i(h,null,{default:s(()=>[...e[7]||(e[7]=[f("Authenticating...",-1)])]),_:1}),i(g,null,{default:s(()=>[...e[8]||(e[8]=[f("A new tab/popup should be opened where you can authenticate",-1)])]),_:1}),i(U,null,{default:s(()=>[u("a",K,[i(R,null,{default:s(()=>[...e[9]||(e[9]=[f("Click here if the popup did not open",-1)])]),_:1})])]),_:1})]),_:1})):(m(),b(F,{key:1,indeterminate:"",size:"64",color:"primary"}))]),_:1},8,["modelValue"])]))}});export{de as default};
