import{x as ee,y as te,z as ie,C as ae,a as h,D as B,E as Z,H as ne,I as le,d as W,c as r,o as t,b as i,w as a,g as T,aP as oe,e as y,i as F,au as se,ac as re,L as R,bE as me,M as N,bh as U,bi as E,n as J,u as f,q as d,bt as ue,aE as M,bF as de,b3 as ce,b4 as P,t as m,b5 as L,bG as ye,bH as fe,az as ge,F as z,r as A,s as G,be,b0 as j,m as S,v as K,bs as he,bI as ke,bC as ve,bJ as xe,bK as pe,bL as $e,bM as Ce,p as we,bN as Te,aW as Ve,h as Ie}from"./index-B-4Sv7B4.js";import{M as X}from"./MediaItemThumb-dgapNT_c.js";import{T as _}from"./Toolbar-BiyPqMSh.js";import{M as D,a as Le}from"./marquee_text_sync-z__27BwI.js";import{a as V,b as De}from"./VBtn-BQgtYRkP.js";import{V as Pe}from"./VDialog-BqRe9xlp.js";import{c as Be,m as Re}from"./layout-Dpn6ZtRn.js";import{_ as ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as Ae}from"./Container-DgPX0so3.js";import{L as Q}from"./ListItem-D1K7sg9F.js";const Se=te({...le(),...ne(),...Re()},"VLayout"),He=ee()({name:"VLayout",props:Se(),setup(e,c){let{slots:g}=c;const{layoutClasses:$,layoutStyles:b,getLayoutItem:C,items:I,layoutRef:k}=Be(e),{dimensionStyles:v}=ie(e);return ae(()=>h("div",{ref:k,class:Z([$.value,e.class]),style:B([v.value,b.value,e.style])},[g.default?.()])),{getLayoutItem:C,items:I}}}),Ue=W({__name:"MenuButton",props:{icon:{default:void 0},text:{default:void 0},disabled:{type:Boolean,default:!1},width:{default:200},loading:{type:Boolean,default:!0}},emits:["click","menu"],setup(e,{emit:c}){const g=c;return($,b)=>(t(),r("div",{style:B(`width: ${e.width}px; height: 30px;`)},[i(V,{variant:"tonal",style:B(`
            width: ${e.width}px;
            position: absolute;
            border: 1px solid #cccccc4d;
            height: 38px;
            margin-top: -1px;
            margin-left: -1px;
          `),disabled:e.loading,onClick:b[0]||(b[0]=C=>g("menu"))},{default:a(()=>[i(T,{icon:"mdi-menu-down",size:"xx-large",style:B(`width: 20px; margin-left: ${e.width-42}px`)},null,8,["style"])]),_:1},8,["style","disabled"]),i(V,{color:"primary",flat:"",disabled:e.disabled||e.loading,style:B(`width: ${e.width-40}px; justify-content: left;`),text:e.text,onClick:b[1]||(b[1]=C=>g("click"))},oe({_:2},[e.icon&&e.text.length<12||e.loading?{name:"prepend",fn:a(()=>[e.loading?(t(),y(De,{key:0,color:"grey-lighten-5",indeterminate:""})):(t(),y(T,{key:1,icon:e.icon,size:"x-large"},null,8,["icon"]))]),key:"0"}:void 0]),1032,["disabled","style","text"])],4))}}),Ee={key:0,xs5:"","pa-5":"",style:{height:"80%","min-width":"230px","margin-top":"25px","margin-bottom":"15px","margin-right":"24px","align-content":"center","flex-shrink":"0"}},Fe={key:0},Ne={key:1},je={style:{"min-width":"0"}},qe=["src"],Ge={style:{"padding-bottom":"10px"}},Ke=["onClick"],We={style:{color:"accent"}},Oe={style:{color:"accent"}},Ye={style:{color:"primary"}},Je={style:{display:"flex","margin-left":"14px","padding-bottom":"10px",cursor:"pointer !important"}},Xe=["innerHTML"],Qe={key:3,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},Ze=W({__name:"InfoHeader",props:{item:{}},setup(e){const c=e,g=F(!1),$=F(),{mobile:b}=se(),C=F([]),I=new URL(""+new URL("info_gradient-C5d1dalX.jpg",import.meta.url).href,import.meta.url).href,k=new Le,v=xe();re(()=>c.item,async n=>{n?($.value=U(n,E.FANART)||U(n,E.LANDSCAPE)||U(n,E.THUMB)||I,C.value=await $e([n],n)):($.value=I,C.value=[])},{immediate:!0});const H=function(n){v.push({name:"album",params:{itemId:n.item_id,provider:n.provider}})},q=function(n){v.push({name:"artist",params:{itemId:n.item_id,provider:n.provider}})},o=function(){if(G.prevRoute){v.back();return}const n=v.currentRoute.value.name?.toString()||"";for(const s of["artist","album","track","playlist","radio"])if(n.includes(s)){v.push({name:`${s}s`});return}v.push({name:"home"})},x=function(n=!1){const s=document.getElementById("playbutton");pe(c.item,s.getBoundingClientRect().left,s.getBoundingClientRect().top+36,void 0,n)},l=R(()=>c.item?c.item.metadata&&c.item.metadata.description?c.item.metadata.description:c.item.metadata&&c.item.metadata.copyright?c.item.metadata.copyright:("artists"in c.item&&c.item.artists.forEach(function(n){if("metadata"in n&&n.metadata.description)return n.metadata.description}),""):""),p=R(()=>me(l.value)),O=R(()=>{const n=b.value?160:300;return l.value.length>n?p.value.substring(0,n)+"...":p.value}),Y=R(()=>{if(c.item&&c.item.media_type==N.ARTIST)return U(c.item,E.LOGO)});return(n,s)=>(t(),r("div",null,[i(J,{variant:"flat",img:f(I),style:{"z-index":"0","border-radius":"0px"},height:"25vh","max-height":"500px","min-height":"340px"},{default:a(()=>[e.item?d("",!0):(t(),y(ue,{key:0,indeterminate:""})),i(M,{width:"100%",height:"100%",cover:"",class:"background-image",src:$.value,gradient:n.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),i(_,{icon:"mdi-arrow-left",style:{position:"absolute"},"menu-items":C.value,"enforce-overflow-menu":!0,"show-loading":!0,"icon-action":o},null,8,["menu-items"]),e.item?(t(),y(He,{key:1,style:{margin:"0",top:"55%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px",display:"flex",width:"100%"}},{default:a(()=>[n.$vuetify.display.mobile?d("",!0):(t(),r("div",Ee,[e.item.media_type&&e.item.media_type==f(N).ARTIST?(t(),r("div",Fe,[i(de,{size:"210",style:{"margin-bottom":"10%"}},{default:a(()=>[i(X,{item:e.item,size:"calc(100%)"},null,8,["item"])]),_:1})])):(t(),r("div",Ne,[i(X,{item:e.item,size:"calc(100%)",style:{"max-height":"256px"}},null,8,["item"])]))])),h("div",je,[Y.value?(t(),r("img",{key:0,src:Y.value,width:"auto",height:"80",style:{"padding-left":"10px"}},null,8,qe)):(t(),y(ce,{key:1},{default:a(()=>[i(D,{sync:f(k)},{default:a(()=>[P(m(e.item.name),1)]),_:1},8,["sync"])]),_:1})),h("div",Ge,["version"in e.item&&e.item.version?(t(),y(L,{key:0,class:"caption"},{default:a(()=>[P(m(e.item.version)+" ",1),i(ye,{location:"bottom"},{activator:a(({props:u})=>[f(fe)(e.item.metadata.explicit||!1)?(t(),y(T,ge({key:0},u,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):d("",!0)]),default:a(()=>[h("span",null,m(n.$t("tooltip.explicit")),1)]),_:1})]),_:1})):d("",!0),"artists"in e.item&&e.item.artists?(t(),y(L,{key:1,class:"title accent--text d-flex"},{default:a(()=>[i(T,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),i(D,{sync:f(k)},{default:a(()=>[(t(!0),r(z,null,A(e.item.artists,(u,w)=>(t(),r("span",{key:u.item_id},[h("a",{style:{color:"accent"},onClick:at=>q(u)},m(u.name),9,Ke),w+1<e.item.artists.length?(t(),r("span",{key:w,style:{color:"accent"}},m(" / "))):d("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):d("",!0),"authors"in e.item&&e.item.authors.length>0?(t(),y(L,{key:2,class:"title accent--text d-flex"},{default:a(()=>[i(T,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-edit"}),i(D,{sync:f(k)},{default:a(()=>[(t(!0),r(z,null,A(e.item.authors,(u,w)=>(t(),r("span",{key:u},[h("span",We,m(u),1),w+1<e.item.authors.length?(t(),r("span",{key:w,style:{color:"accent"}},m(" / "))):d("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):d("",!0),"narrators"in e.item&&e.item.narrators.length>0?(t(),y(L,{key:3,class:"title accent--text d-flex"},{default:a(()=>[i(T,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-voice"}),i(D,{sync:f(k)},{default:a(()=>[(t(!0),r(z,null,A(e.item.narrators,(u,w)=>(t(),r("span",{key:u},[h("span",Oe,m(u),1),w+1<e.item.narrators.length?(t(),r("span",{key:w,style:{color:"accent"}},m(" / "))):d("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):d("",!0),"owner"in e.item&&e.item.owner?(t(),y(L,{key:4,class:"title d-flex"},{default:a(()=>[i(T,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),i(D,{sync:f(k)},{default:a(()=>[h("a",Ye,m(e.item.owner),1)]),_:1},8,["sync"])]),_:1})):d("",!0),"album"in e.item&&e.item.album?(t(),y(L,{key:5,class:"d-flex"},{default:a(()=>[i(T,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),i(D,{sync:f(k)},{default:a(()=>[h("a",{style:{color:"secondary"},onClick:s[0]||(s[0]=u=>H(e.item?.album))},m(e.item.album.name),1)]),_:1},8,["sync"])]),_:1})):d("",!0)]),h("div",Je,[i(Ue,{id:"playbutton",width:220,icon:"mdi-play-circle-outline",text:f(be)(n.$t("play"),14),disabled:!e.item,loading:f(G).playActionInProgress,"open-menu-on-click":!f(G).activePlayer,onClick:x,onMenu:s[1]||(s[1]=u=>x(!0))},null,8,["text","disabled","loading","open-menu-on-click"]),i(V,{variant:"plain",ripple:"",icon:e.item.favorite?"mdi-heart":"mdi-heart-outline",size:"x-large",style:{"margin-top":"-14px"},title:n.$t("tooltip.favorite"),onClick:[s[2]||(s[2]=u=>f(S).toggleFavorite(e.item)),s[3]||(s[3]=j(()=>{},["prevent"])),s[4]||(s[4]=j(()=>{},["stop"]))]},null,8,["icon","title"]),i(K,{domain:e.item.provider,size:25,style:{"margin-top":"6px"}},null,8,["domain"])]),O.value?(t(),y(L,{key:2,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:s[5]||(s[5]=u=>g.value=!g.value)},{default:a(()=>[h("div",{innerHTML:O.value},null,8,Xe)]),_:1})):d("",!0),e.item&&e.item.metadata.genres?(t(),r("div",Qe,[(t(!0),r(z,null,A(e.item.metadata.genres.slice(0,n.$vuetify.display.mobile?15:25),u=>(t(),y(he,{key:u,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:a(()=>[P(m(u),1)]),_:2},1024))),128))])):d("",!0)])]),_:1})):d("",!0)]),_:1},8,["img"]),i(Pe,{modelValue:g.value,"onUpdate:modelValue":s[7]||(s[7]=u=>g.value=u),"max-width":"975",width:"auto"},{default:a(()=>[i(J,null,{default:a(()=>[i(ke,{innerHTML:p.value},null,8,["innerHTML"]),i(ve,null,{default:a(()=>[i(V,{color:"primary",block:"",onClick:s[6]||(s[6]=u=>g.value=!1)},{default:a(()=>[P(m(n.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),ft=ze(Ze,[["__scopeId","data-v-092bb089"]]),Me={style:{"margin-bottom":"10px"}},_e={key:0},et=["title","onClick"],tt=["title"],it={class:"d-flex align-center ga-2"},gt=W({__name:"ProviderDetails",props:{itemDetails:{}},setup(e){const c=e,g=F(!1),$=function(o){window.open(o,"_blank")},b=Ce({}),C=function(o){const x=`${o.provider_instance}.${o.item_id}`,l=b[x];if(l)l.load(),delete b[x];else{const p=new Audio(I(o.provider_instance,o.item_id));b[x]=p,p.play()}},I=function(o,x){return`${S.baseUrl}/preview?item_id=${encodeURIComponent(x)}&provider=${o}`},k=function(o){return`${S.getProvider(o.provider_instance)?.lookup_key}://${c.itemDetails.media_type}/${o.item_id}`},v=function(o){navigator.clipboard.writeText(o)},H=function(){g.value=!g.value},q=R(()=>[{label:"tooltip.collapse_expand",icon:g.value?"mdi-chevron-up":"mdi-chevron-down",action:H,overflowAllowed:!1}]);return(o,x)=>(t(),r("section",Me,[i(_,{title:o.$t("mapped_providers"),"menu-items":q.value,onTitleClicked:H},null,8,["title","menu-items"]),i(we),g.value?(t(),y(Ae,{key:0},{default:a(()=>[i(Ie,null,{default:a(()=>[(t(!0),r(z,null,A(e.itemDetails?.provider_mappings,l=>(t(),y(Q,{key:l.provider_instance,disabled:!l.available||!f(S).getProvider(l.provider_instance)},{prepend:a(()=>[i(K,{domain:l.provider_domain,size:30},null,8,["domain"])]),title:a(()=>[P(m(f(S).getProvider(l.provider_instance)?.name),1)]),subtitle:a(()=>[e.itemDetails.media_type==f(N).TRACK&&l.audio_format?(t(),r("span",_e,m(l.audio_format.content_type)+" | "+m(l.audio_format.sample_rate/1e3)+"kHz/"+m(l.audio_format.bit_depth)+" bits | ",1)):d("",!0),l.url&&!l.provider_domain.startsWith("file")?(t(),r("a",{key:1,style:{opacity:"0.4"},title:o.$t("tooltip.open_provider_link"),onClick:j(p=>$(l.url),["prevent"])},m(k(l)),9,et)):(t(),r("span",{key:2,style:{opacity:"0.4"},title:o.$t("copy_uri")},m(k(l)),9,tt))]),append:a(()=>[l.audio_format&&l.audio_format.bit_depth>16?(t(),y(M,{key:0,src:f(Te),width:"30",class:Z(o.$vuetify.theme.current.dark?"hiresicondark":"hiresicon"),style:{"margin-right":"15px"}},null,8,["src","class"])):d("",!0),h("div",it,[f(Ve)("bp1")&&e.itemDetails.media_type==f(N).TRACK?(t(),y(V,{key:0,icon:b[`${l.provider_instance}.${l.item_id}`]?"mdi-pause":"mdi-play-circle",title:o.$t("tooltip.play_sample"),onClick:p=>C(l)},null,8,["icon","title","onClick"])):d("",!0),l.url&&!l.provider_domain.startsWith("file")?(t(),y(V,{key:1,icon:"mdi-open-in-new",title:o.$t("tooltip.open_provider_link"),onClick:j(p=>$(l.url),["prevent"])},null,8,["title","onClick"])):d("",!0),i(V,{icon:"mdi-link",title:o.$t("tooltip.copy_uri"),onClick:p=>v(k(l))},null,8,["title","onClick"])])]),_:2},1032,["disabled"]))),128)),e.itemDetails.provider=="library"?(t(),y(Q,{key:0},{prepend:a(()=>[i(K,{domain:"library",size:30})]),title:a(()=>[P(m(o.$t("music_assistant_library")),1)]),subtitle:a(()=>[h("span",null,"library://"+m(e.itemDetails.media_type)+"/"+m(e.itemDetails.item_id),1)]),append:a(()=>[i(V,{icon:"mdi-link",title:o.$t("tooltip.copy_uri"),onClick:x[0]||(x[0]=l=>v(`library://${e.itemDetails.media_type}/${e.itemDetails.item_id}`))},null,8,["title"])]),_:1})):d("",!0)]),_:1})]),_:1})):d("",!0)]))}});export{ft as I,gt as _};
