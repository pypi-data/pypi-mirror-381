{"version":3,"file":"DB3aFz15.js","sources":["../../../../../../src/lib/Accessibility/hone_focus.js","../../../../../../src/lib/Accessibility/hone_focus_example.svelte","../../../../../../src/lib/Milieus/Venues/Vows/Hone_Focus/Trinket.svelte"],"sourcesContent":["\n/*\n\timport { hone_focus } from '$lib/Accessibility/hone_focus'\n\n\tlet start_of_panel = \"\"\n\tlet end_of_panel = \"\"\n\tlet panel = \"\"\n\tlet escape_to = \"\"\n\tonMount (() => {\n\t\thone_focus ({\n\t\t\tescape_to_element: escape_to,\n\t\t\tafter_escape () { console.log ('escaped') },\n\t\t\t\n\t\t\tpanel_element: panel,\n\t\t\tfirst_element: start_of_panel,\n\t\t\tlast_element: end_of_panel\n\t\t})\n\t})\n*/\n\n/*\nconst on_key_press_notes = (event) => {\n\tconst control = event.ctrlKey;\n\tconst meta = event.metaKey;\n\tconst alt = event.altKey;\n\tconst shift = event.shiftKey;\n\t\n\tconst code = event.keyCode;\n\tconst source_element = event.srcElement;\n\tconst target = event.target;\n\t\t\t\n\tconst next_tab = shift === false && code === 9;\n\tconst back_tab = shift === true && code === 9;\n\t\n\tconst escape = code === 27;\n\t\n\treturn {\n\t\tescape,\n\t\tnext_tab,\n\t\tback_tab\n\t}\n}\n*/\n\n\nconst on_key_press = (event) => {\n\tconst shift = event.shiftKey;\n\tconst code = event.keyCode;\n\t\n\tconst next_tab = shift === false && code === 9;\n\tconst back_tab = shift === true && code === 9;\n\tconst escape = code === 27;\n\t\n\treturn {\n\t\tescape,\n\t\tnext_tab,\n\t\tback_tab\n\t}\n}\n\n\n\nexport const hone_focus = ({\n\tfirst_element,\n\tlast_element,\n\t\n\tpanel_element,\n\tescape_to_element = \"\",\n\t\n\tafter_escape = () => {},\n\t\n\trecords = 0\n}) => {\n\tconst record = (text) => {\n\t\tif (records >= 1) {\n\t\t\tconsole.log (text)\n\t\t}\n\t}\n\t\n\tconst escape_from_panel = (event) => {\n\t\trecord (1, \"escape_from_panel\");\n\t\t\n\t\tif (typeof escape_to_element === \"object\") {\n\t\t\tevent.preventDefault ()\n\t\t\tevent.stopPropagation ()\n\t\t\tescape_to_element.focus ()\n\t\t\tafter_escape ()\n\t\t}\n\t}\n\t\n\tpanel_element.addEventListener ('keydown', function(event) {\n\t\tconst { escape } = on_key_press (event)\n\t\tif (escape) {\n\t\t\treturn escape_from_panel (event)\n\t\t}\n\t\t\n\t\trecord (1, \"panel: keydown\")\n\t});\n\t\n\t//\n\t//\tif back_tab, then go to last element\n\t//\n\t//\n\tfirst_element.addEventListener ('keydown', function(event) {\n\t\tconst { back_tab, escape } = on_key_press (event)\n\t\tif (escape) {\n\t\t\treturn escape_from_panel (event) \n\t\t}\t\t\n\t\t\n\t\tif (back_tab) {\n\t\t\tevent.preventDefault ()\n\t\t\tevent.stopPropagation ()\n\t\t\tlast_element.focus ()\n\t\t}\n\t\t\n\t\trecord (1, { \"start of panel: keydown\": { back_tab }})\n\t});\n\t\n\t//\n\t//\tif next_tab, then go to first element\n\t//\n\t//\n\tlast_element.addEventListener ('keydown', function(event) {\n\t\tconst { next_tab, escape } = on_key_press (event)\n\t\tif (escape) {\n\t\t\treturn escape_from_panel (event)\n\t\t}\n\t\t\n\t\tif (next_tab) {\n\t\t\tevent.preventDefault ()\n\t\t\tevent.stopPropagation ()\n\t\t\tfirst_element.focus ()\n\t\t}\n\n\t\trecord (1, { \"end of panel: keydown\": { event }})\n\t});\n}","\n<script>\n\n//\n\nimport { onMount } from 'svelte'\nimport { hone_focus } from '$lib/Accessibility/hone_focus'\n\nlet start_of_panel = \"\"\nlet end_of_panel = \"\"\nlet panel = \"\"\nlet escape_to = \"\"\nonMount (() => {\n\thone_focus ({\n\t\tescape_to_element: escape_to,\n\t\tafter_escape () { console.log ('escaped') },\n\t\t\n\t\tpanel_element: panel,\n\t\tfirst_element: start_of_panel,\n\t\tlast_element: end_of_panel\n\t})\n})\n\n\n</script>\n\n<div>\n\t<header>Hone Focus</header>\n\t\n\t<button \n\t\toutside_button\n\t\ttype=\"button\" \n\t\tclass=\"btn variant-filled\"\n\t\tbind:this={ escape_to }\n\t>Outside</button>\n\t\n\t<div style=\"height: 20px\"></div>\n\t\n\t<div \n\t\tthe_panel\n\t\tbind:this={ panel }\n\t\tstyle=\"\n\t\t\tborder: 4px solid black;\n\t\t\tmin-height: 500px;\n\t\t\twidth: 100%;\n\t\t\tborder-radius: 9px;\n\t\t\tpadding: 12px;\n\t\t\"\n\t>\t\n\t\t<div tabindex=\"0\" bind:this={ start_of_panel } start_of_panel>Start of Panel</div>\n\t\t\n\t\t<hr class=\"!border-t-4\" style=\"margin: 8px 0\"/>\n\t\t\n\t\t<button type=\"button\" class=\"btn variant-filled\">Button</button>\t\n\t\t\n\t\t<hr class=\"!border-t-4\" style=\"margin: 8px 0\"/>\n\t\t\n\t\t<button type=\"button\" class=\"btn variant-filled\">Button</button>\n\t\t\n\t\t<hr class=\"!border-t-4\" style=\"margin: 8px 0\"/>\n\t\t\n\t\t<div tabindex=\"0\" bind:this={ end_of_panel } end_of_panel>End of Panel</div>\n\t</div>\n</div>","\n<script>\n\nimport Hone_Focus_Example from '$lib/Accessibility/hone_focus_example.svelte'\n\n</script>\n\n<div>\n\t<Hone_Focus_Example />\n</div>"],"names":["on_key_press","event","shift","code","hone_focus","first_element","last_element","panel_element","escape_to_element","after_escape","records","record","text","escape_from_panel","escape","back_tab","next_tab","insert_hydration","target","div4","anchor","append_hydration","header","button0","div0","div3","div1","hr0","button1","hr1","button2","hr2","div2","start_of_panel","end_of_panel","panel","escape_to","onMount","$$value","div"],"mappings":"wNA6CA,MAAMA,EAAgBC,GAAU,CAC/B,MAAMC,EAAQD,EAAM,SACdE,EAAOF,EAAM,QAMnB,MAAO,CACN,OAHcE,IAAS,GAIvB,SANgBD,IAAU,IAASC,IAAS,EAO5C,SANgBD,IAAU,IAAQC,IAAS,CAO7C,CACA,EAIaC,GAAa,CAAC,CAC1B,cAAAC,EACA,aAAAC,EAEA,cAAAC,EACA,kBAAAC,EAAoB,GAEpB,aAAAC,EAAe,IAAM,CAAE,EAEvB,QAAAC,EAAU,CACX,IAAM,CACL,MAAMC,EAAUC,GAAS,CACpBF,GAAW,GACd,QAAQ,IAAKE,CAAI,CAEpB,EAEOC,EAAqBZ,GAAU,CACpCU,EAAQ,CAAsB,EAE1B,OAAOH,GAAsB,WAChCP,EAAM,eAAc,EACpBA,EAAM,gBAAe,EACrBO,EAAkB,MAAK,EACvBC,EAAY,EAEf,EAECF,EAAc,iBAAkB,UAAW,SAASN,EAAO,CAC1D,KAAM,CAAE,OAAAa,GAAWd,EAAcC,CAAK,EACtC,GAAIa,EACH,OAAOD,EAAmBZ,CAAK,EAGhCU,EAAQ,CAAmB,CAC7B,CAAE,EAMDN,EAAc,iBAAkB,UAAW,SAASJ,EAAO,CAC1D,KAAM,CAAE,SAAAc,EAAU,OAAAD,CAAQ,EAAGd,EAAcC,CAAK,EAChD,GAAIa,EACH,OAAOD,EAAmBZ,CAAK,EAG5Bc,IACHd,EAAM,eAAc,EACpBA,EAAM,gBAAe,EACrBK,EAAa,MAAK,GAGnBK,EAAQ,CAA6C,CACvD,CAAE,EAMDL,EAAa,iBAAkB,UAAW,SAASL,EAAO,CACzD,KAAM,CAAE,SAAAe,EAAU,OAAAF,CAAQ,EAAGd,EAAcC,CAAK,EAChD,GAAIa,EACH,OAAOD,EAAmBZ,CAAK,EAG5Be,IACHf,EAAM,eAAc,EACpBA,EAAM,gBAAe,EACrBI,EAAc,MAAK,GAGpBM,EAAQ,CAAwC,CAClD,CAAE,CACF,07DC9GAM,EAqCKC,EAAAC,EAAAC,CAAA,EApCJC,EAA0BF,EAAAG,CAAA,SAE1BD,EAKgBF,EAAAI,CAAA,iBAEhBF,EAA+BF,EAAAK,CAAA,SAE/BH,EAwBKF,EAAAM,CAAA,EAbJJ,EAAiFI,EAAAC,CAAA,iBAEjFL,EAA8CI,EAAAE,CAAA,SAE9CN,EAAgEI,EAAAG,CAAA,SAEhEP,EAA8CI,EAAAI,CAAA,SAE9CR,EAA+DI,EAAAK,CAAA,SAE/DT,EAA8CI,EAAAM,CAAA,SAE9CV,EAA2EI,EAAAO,CAAA,6GArDzE,IAAAC,EAAiB,GACjBC,EAAe,GACfC,EAAQ,GACRC,EAAY,GAChBC,EAAO,IAAA,CACNjC,GAAU,CACT,kBAAmBgC,EACnB,cAAY,CAAM,QAAQ,IAAK,SAAS,GAExC,cAAeD,EACf,cAAeF,EACf,aAAcC,+CAcFE,EAASE,oDAgBSL,EAAcK,oDAYdJ,EAAYI,oDArB9BH,EAAKG,2PCjCnBrB,EAEKC,EAAAqB,EAAAnB,CAAA"}