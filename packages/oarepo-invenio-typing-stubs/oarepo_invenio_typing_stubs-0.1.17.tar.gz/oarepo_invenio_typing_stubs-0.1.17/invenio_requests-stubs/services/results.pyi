from typing import Any, List, Optional, Tuple

from flask_principal import Identity
from invenio_access.permissions import system_user_id as system_user_id
from invenio_records_resources.services.records.results import (
    ExpandableField as ExpandableField,
)
from invenio_requests.resolvers.registry import ResolverRegistry as ResolverRegistry

class EntityResolverExpandableField(ExpandableField):
    entity_proxy: Optional[Any]
    def ghost_record(self, value: Any) -> Any: ...
    def system_record(self) -> Any: ...
    def get_value_service(self, value: Any) -> Tuple[Any, Any]: ...
    def pick(self, identity: Identity, resolved_rec: Any) -> Any: ...

class MultiEntityResolverExpandableField(ExpandableField):
    entity_proxies: List[Any]
    def __init__(self, key: str) -> None: ...
    def ghost_record(self, value: Any) -> Any: ...
    def system_record(self) -> List[Any]: ...
    def get_value_service(self, value: List[Any]) -> List[Tuple[Any, Any]]: ...
    def pick(self, identity: Identity, resolved_rec: Any) -> Any: ...
    def add_dereferenced_record(
        self, service: Any, value: Any, resolved_rec: Optional[Any]
    ) -> None: ...
    def _get_resolver_type(self, service: Any) -> str: ...
