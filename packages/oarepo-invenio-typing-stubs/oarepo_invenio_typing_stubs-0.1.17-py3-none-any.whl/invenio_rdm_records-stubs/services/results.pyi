from typing import Any, Iterable, Iterator, Tuple

from flask_principal import Identity
from invenio_records_resources.services.base.results import ServiceListResult
from invenio_records_resources.services.records.results import (
    ExpandableField,
    RecordList,
)

class ParentCommunitiesExpandableField(ExpandableField):
    def ghost_record(self, value: Any) -> dict[str, Any]: ...
    def system_record(self) -> dict[str, Any]: ...
    def get_value_service(self, value: Any) -> Tuple[Any, Any]: ...
    def pick(self, identity: Identity, resolved_rec: Any) -> dict[str, Any]: ...

class GrantSubjectExpandableField(ExpandableField):
    _system_roles_service: Any
    def __init__(self, *args: Any, **kwargs: Any) -> None: ...
    def ghost_record(self, value: Any) -> dict[str, Any]: ...
    def system_record(self) -> dict[str, Any]: ...
    def get_value_service(self, value: dict[str, Any]) -> Tuple[Any, Any | None]: ...
    def pick(self, identity: Identity, resolved_rec: Any) -> dict[str, Any]: ...

class RDMRecordList(RecordList):
    @property
    def hits(self) -> Iterator[dict[str, Any]]: ...

class RDMRecordRevisionsList(ServiceListResult):
    _identity: Identity
    _revisions: Iterable[dict[str, Any]]
    def __init__(
        self, identity: Identity, revisions: Iterable[dict[str, Any]]
    ) -> None: ...
    def to_dict(self) -> list[dict[str, Any]]: ...
    def __iter__(self) -> Iterator[dict[str, Any]]: ...
