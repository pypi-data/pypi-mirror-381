import{y as it,ae as Xe,B as st,P as at,b0 as ot,A as lt,R as ut,H as ft,b1 as ct,b2 as dt,e as ht,b3 as _t,S as Ve,b4 as pt,C as gt,n as ce,b5 as vt,b6 as mt,w as $e,h as de,m as re,r as Y,i as Pe,v as me,a as fe,p as bt,b as Ce,s as xe,d as ne,g as w,l as Ne,f as yt,j as wt}from"./XfyNEFST.js";import{c as kt,s as Te,o as Et}from"./CfPWzxx9.js";import"./DsnmJJEf.js";import{p as be,i as Ge}from"./CyI3pj5p.js";import{c as Oe,g as Ue,u as Ot,e as Me,i as ze}from"./BvtU7qVU.js";import{s as ye}from"./CvUL_eGA.js";import{d as Rt}from"./B8ie1dNX.js";import{s as Ke}from"./-3L7ibXM.js";function et(r,n,a=!1){if(r.multiple){if(n==null)return;if(!at(n))return ot();for(var s of r.options)s.selected=n.includes(Ie(s));return}for(s of r.options){var o=Ie(s);if(lt(o,n)){s.selected=!0;return}}(!a||n!==void 0)&&(r.selectedIndex=-1)}function St(r){var n=new MutationObserver(()=>{et(r,r.__value)});n.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),st(()=>{n.disconnect()})}function qe(r,n,a=n){var s=!0;it(r,"change",o=>{var c=o?"[selected]":":checked",d;if(r.multiple)d=[].map.call(r.querySelectorAll(c),Ie);else{var g=r.querySelector(c)??r.querySelector("option:not([disabled])");d=g&&Ie(g)}a(d)}),Xe(()=>{var o=n();if(et(r,o,s),s&&o===void 0){var c=r.querySelector(":checked");c!==null&&(o=Ie(c),a(o))}r.__value=o,s=!1}),St(r)}function Ie(r){return"__value"in r?r.__value:r.value}const Ct=()=>performance.now(),pe={tick:r=>requestAnimationFrame(r),now:()=>Ct(),tasks:new Set};function tt(){const r=pe.now();pe.tasks.forEach(n=>{n.c(r)||(pe.tasks.delete(n),n.f())}),pe.tasks.size!==0&&pe.tick(tt)}function xt(r){let n;return pe.tasks.size===0&&pe.tick(tt),{promise:new Promise(a=>{pe.tasks.add(n={c:r,f:a})}),abort(){pe.tasks.delete(n)}}}function Ae(r,n){Ve(()=>{r.dispatchEvent(new CustomEvent(n))})}function Lt(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const n=r.split("-");return n.length===1?n[0]:n[0]+n.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Ze(r){const n={},a=r.split(";");for(const s of a){const[o,c]=s.split(":");if(!o||c===void 0)break;const d=Lt(o.trim());n[d]=c.trim()}return n}const jt=r=>r;function lr(r,n,a,s){var o=(r&vt)!==0,c=(r&mt)!==0,d=o&&c,g=(r&_t)!==0,x=d?"both":o?"in":"out",l,p=n.inert,y=n.style.overflow,O,I;function A(){return Ve(()=>l??=a()(n,s?.()??{},{direction:x}))}var M={is_global:g,in(){if(n.inert=p,!o){I?.abort(),I?.reset?.();return}c||O?.abort(),Ae(n,"introstart"),O=We(n,A(),I,1,()=>{Ae(n,"introend"),O?.abort(),O=l=void 0,n.style.overflow=y})},out(se){if(!c){se?.(),l=void 0;return}n.inert=!0,Ae(n,"outrostart"),I=We(n,A(),O,0,()=>{Ae(n,"outroend"),se?.()})},stop:()=>{O?.abort(),I?.abort()}},K=ut;if((K.transitions??=[]).push(M),o&&kt){var $=g;if(!$){for(var J=K.parent;J&&(J.f&ft)!==0;)for(;(J=J.parent)&&(J.f&ct)===0;);$=!J||(J.f&dt)!==0}$&&Xe(()=>{ht(()=>M.in())})}}function We(r,n,a,s,o){var c=s===1;if(pt(n)){var d,g=!1;return gt(()=>{if(!g){var K=n({direction:c?"in":"out"});d=We(r,K,a,s,o)}}),{abort:()=>{g=!0,d?.abort()},deactivate:()=>d.deactivate(),reset:()=>d.reset(),t:()=>d.t()}}if(a?.deactivate(),!n?.duration)return o(),{abort:ce,deactivate:ce,reset:ce,t:()=>s};const{delay:x=0,css:l,tick:p,easing:y=jt}=n;var O=[];if(c&&a===void 0&&(p&&p(0,1),l)){var I=Ze(l(0,1));O.push(I,I)}var A=()=>1-s,M=r.animate(O,{duration:x,fill:"forwards"});return M.onfinish=()=>{M.cancel();var K=a?.t()??1-s;a?.abort();var $=s-K,J=n.duration*Math.abs($),se=[];if(J>0){var ge=!1;if(l)for(var he=Math.ceil(J/16.666666666666668),ee=0;ee<=he;ee+=1){var L=K+$*y(ee/he),t=Ze(l(L,1-L));se.push(t),ge||=t.overflow==="hidden"}ge&&(r.style.overflow="hidden"),A=()=>{var e=M.currentTime;return K+$*y(e/J)},p&&xt(()=>{if(M.playState!=="running")return!1;var e=A();return p(e,1-e),!0})}M=r.animate(se,{duration:J,fill:"forwards"}),M.onfinish=()=>{A=()=>s,p?.(s,1-s),o()}},{abort:()=>{M&&(M.cancel(),M.effect=null,M.onfinish=ce)},deactivate:()=>{o=ce},reset:()=>{s===0&&p?.(1,0)},t:()=>A()}}function Tt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fe={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var It=Fe.exports,Ye;function At(){return Ye||(Ye=1,(function(r,n){((a,s)=>{r.exports=s()})(It,function a(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},o,c=!s.document&&!!s.postMessage,d=s.IS_PAPA_WORKER||!1,g={},x=0,l={};function p(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var i=he(e);i.chunkSize=parseInt(i.chunkSize),e.step||e.chunk||(i.chunkSize=null),this._handle=new M(i),(this._handle.streamer=this)._config=i}).call(this,t),this.parseChunk=function(e,i){var f=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<f){let h=this._config.newline;h||(u=this._config.quoteChar||'"',h=this._handle.guessLineEndings(e,u)),e=[...e.split(h).slice(f)].join(h)}this.isFirstChunk&&L(this._config.beforeFirstChunk)&&(u=this._config.beforeFirstChunk(e))!==void 0&&(e=u),this.isFirstChunk=!1,this._halted=!1;var f=this._partialLine+e,u=(this._partialLine="",this._handle.parse(f,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=u.meta.cursor,f=(this._finished||(this._partialLine=f.substring(e-this._baseIndex),this._baseIndex=e),u&&u.data&&(this._rowCount+=u.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),d)s.postMessage({results:u,workerId:l.WORKER_ID,finished:f});else if(L(this._config.chunk)&&!i){if(this._config.chunk(u,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=u=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(u.data),this._completeResults.errors=this._completeResults.errors.concat(u.errors),this._completeResults.meta=u.meta),this._completed||!f||!L(this._config.complete)||u&&u.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),f||u&&u.meta.paused||this._nextChunk(),u}this._halted=!0},this._sendError=function(e){L(this._config.error)?this._config.error(e):d&&this._config.error&&s.postMessage({workerId:l.WORKER_ID,error:e,finished:!1})}}function y(t){var e;(t=t||{}).chunkSize||(t.chunkSize=l.RemoteChunkSize),p.call(this,t),this._nextChunk=c?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(i){this._input=i,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),c||(e.onload=ee(this._chunkLoaded,this),e.onerror=ee(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!c),this._config.downloadRequestHeaders){var i,f=this._config.downloadRequestHeaders;for(i in f)e.setRequestHeader(i,f[i])}var u;this._config.chunkSize&&(u=this._start+this._config.chunkSize-1,e.setRequestHeader("Range","bytes="+this._start+"-"+u));try{e.send(this._config.downloadRequestBody)}catch(h){this._chunkError(h.message)}c&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize||e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(i=>(i=i.getResponseHeader("Content-Range"))!==null?parseInt(i.substring(i.lastIndexOf("/")+1)):-1)(e),this.parseChunk(e.responseText)))},this._chunkError=function(i){i=e.statusText||i,this._sendError(new Error(i))}}function O(t){(t=t||{}).chunkSize||(t.chunkSize=l.LocalChunkSize),p.call(this,t);var e,i,f=typeof FileReader<"u";this.stream=function(u){this._input=u,i=u.slice||u.webkitSlice||u.mozSlice,f?((e=new FileReader).onload=ee(this._chunkLoaded,this),e.onerror=ee(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var u=this._input,h=(this._config.chunkSize&&(h=Math.min(this._start+this._config.chunkSize,this._input.size),u=i.call(u,this._start,h)),e.readAsText(u,this._config.encoding));f||this._chunkLoaded({target:{result:h}})},this._chunkLoaded=function(u){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(u.target.result)},this._chunkError=function(){this._sendError(e.error)}}function I(t){var e;p.call(this,t=t||{}),this.stream=function(i){return e=i,this._nextChunk()},this._nextChunk=function(){var i,f;if(!this._finished)return i=this._config.chunkSize,e=i?(f=e.substring(0,i),e.substring(i)):(f=e,""),this._finished=!e,this.parseChunk(f)}}function A(t){p.call(this,t=t||{});var e=[],i=!0,f=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(u){this._input=u,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){f&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=ee(function(u){try{e.push(typeof u=="string"?u:u.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(h){this._streamError(h)}},this),this._streamError=ee(function(u){this._streamCleanUp(),this._sendError(u)},this),this._streamEnd=ee(function(){this._streamCleanUp(),f=!0,this._streamData("")},this),this._streamCleanUp=ee(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function M(t){var e,i,f,u,h=Math.pow(2,53),j=-h,D=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,N=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,b=this,F=0,v=0,X=!1,k=!1,R=[],_={data:[],errors:[],meta:{}};function H(S){return t.skipEmptyLines==="greedy"?S.join("").trim()==="":S.length===1&&S[0].length===0}function W(){if(_&&f&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),f=!1),t.skipEmptyLines&&(_.data=_.data.filter(function(m){return!H(m)})),Z()){let m=function(B,Q){L(t.transformHeader)&&(B=t.transformHeader(B,Q)),R.push(B)};if(_)if(Array.isArray(_.data[0])){for(var S=0;Z()&&S<_.data.length;S++)_.data[S].forEach(m);_.data.splice(0,1)}else _.data.forEach(m)}function T(m,B){for(var Q=t.header?{}:[],P=0;P<m.length;P++){var U=P,C=m[P],C=((ae,E)=>(z=>(t.dynamicTypingFunction&&t.dynamicTyping[z]===void 0&&(t.dynamicTyping[z]=t.dynamicTypingFunction(z)),(t.dynamicTyping[z]||t.dynamicTyping)===!0))(ae)?E==="true"||E==="TRUE"||E!=="false"&&E!=="FALSE"&&((z=>{if(D.test(z)&&(z=parseFloat(z),j<z&&z<h))return 1})(E)?parseFloat(E):N.test(E)?new Date(E):E===""?null:E):E)(U=t.header?P>=R.length?"__parsed_extra":R[P]:U,C=t.transform?t.transform(C,U):C);U==="__parsed_extra"?(Q[U]=Q[U]||[],Q[U].push(C)):Q[U]=C}return t.header&&(P>R.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+R.length+" fields but parsed "+P,v+B):P<R.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+R.length+" fields but parsed "+P,v+B)),Q}var q;_&&(t.header||t.dynamicTyping||t.transform)&&(q=1,!_.data.length||Array.isArray(_.data[0])?(_.data=_.data.map(T),q=_.data.length):_.data=T(_.data,0),t.header&&_.meta&&(_.meta.fields=R),v+=q)}function Z(){return t.header&&R.length===0}function ie(S,T,q,m){S={type:S,code:T,message:q},m!==void 0&&(S.row=m),_.errors.push(S)}L(t.step)&&(u=t.step,t.step=function(S){_=S,Z()?W():(W(),_.data.length!==0&&(F+=S.data.length,t.preview&&F>t.preview?i.abort():(_.data=_.data[0],u(_,b))))}),this.parse=function(S,T,q){var m=t.quoteChar||'"',m=(t.newline||(t.newline=this.guessLineEndings(S,m)),f=!1,t.delimiter?L(t.delimiter)&&(t.delimiter=t.delimiter(S),_.meta.delimiter=t.delimiter):((m=((B,Q,P,U,C)=>{var ae,E,z,ve;C=C||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var we=0;we<C.length;we++){for(var oe,Re=C[we],V=0,le=0,G=0,te=(z=void 0,new $({comments:U,delimiter:Re,newline:Q,preview:10}).parse(B)),_e=0;_e<te.data.length;_e++)P&&H(te.data[_e])?G++:(oe=te.data[_e].length,le+=oe,z===void 0?z=oe:0<oe&&(V+=Math.abs(oe-z),z=oe));0<te.data.length&&(le/=te.data.length-G),(E===void 0||V<=E)&&(ve===void 0||ve<le)&&1.99<le&&(E=V,ae=Re,ve=le)}return{successful:!!(t.delimiter=ae),bestDelimiter:ae}})(S,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=m.bestDelimiter:(f=!0,t.delimiter=l.DefaultDelimiter),_.meta.delimiter=t.delimiter),he(t));return t.preview&&t.header&&m.preview++,e=S,i=new $(m),_=i.parse(e,T,q),W(),X?{meta:{paused:!0}}:_||{meta:{paused:!1}}},this.paused=function(){return X},this.pause=function(){X=!0,i.abort(),e=L(t.chunk)?"":e.substring(i.getCharIndex())},this.resume=function(){b.streamer._halted?(X=!1,b.streamer.parseChunk(e,!0)):setTimeout(b.resume,3)},this.aborted=function(){return k},this.abort=function(){k=!0,i.abort(),_.meta.aborted=!0,L(t.complete)&&t.complete(_),e=""},this.guessLineEndings=function(B,m){B=B.substring(0,1048576);var m=new RegExp(K(m)+"([^]*?)"+K(m),"gm"),q=(B=B.replace(m,"")).split("\r"),m=B.split(`
`),B=1<m.length&&m[0].length<q[0].length;if(q.length===1||B)return`
`;for(var Q=0,P=0;P<q.length;P++)q[P][0]===`
`&&Q++;return Q>=q.length/2?`\r
`:"\r"}}function K(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $(t){var e=(t=t||{}).delimiter,i=t.newline,f=t.comments,u=t.step,h=t.preview,j=t.fastMode,D=null,N=!1,b=t.quoteChar==null?'"':t.quoteChar,F=b;if(t.escapeChar!==void 0&&(F=t.escapeChar),(typeof e!="string"||-1<l.BAD_DELIMITERS.indexOf(e))&&(e=","),f===e)throw new Error("Comment character same as delimiter");f===!0?f="#":(typeof f!="string"||-1<l.BAD_DELIMITERS.indexOf(f))&&(f=!1),i!==`
`&&i!=="\r"&&i!==`\r
`&&(i=`
`);var v=0,X=!1;this.parse=function(k,R,_){if(typeof k!="string")throw new Error("Input must be a string");var H=k.length,W=e.length,Z=i.length,ie=f.length,S=L(u),T=[],q=[],m=[],B=v=0;if(!k)return V();if(j||j!==!1&&k.indexOf(b)===-1){for(var Q=k.split(i),P=0;P<Q.length;P++){if(m=Q[P],v+=m.length,P!==Q.length-1)v+=i.length;else if(_)return V();if(!f||m.substring(0,ie)!==f){if(S){if(T=[],ve(m.split(e)),le(),X)return V()}else ve(m.split(e));if(h&&h<=P)return T=T.slice(0,h),V(!0)}}return V()}for(var U=k.indexOf(e,v),C=k.indexOf(i,v),ae=new RegExp(K(F)+K(b),"g"),E=k.indexOf(b,v);;)if(k[v]===b)for(E=v,v++;;){if((E=k.indexOf(b,E+1))===-1)return _||q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:T.length,index:v}),oe();if(E===H-1)return oe(k.substring(v,E).replace(ae,b));if(b===F&&k[E+1]===F)E++;else if(b===F||E===0||k[E-1]!==F){U!==-1&&U<E+1&&(U=k.indexOf(e,E+1));var z=we((C=C!==-1&&C<E+1?k.indexOf(i,E+1):C)===-1?U:Math.min(U,C));if(k.substr(E+1+z,W)===e){m.push(k.substring(v,E).replace(ae,b)),k[v=E+1+z+W]!==b&&(E=k.indexOf(b,v)),U=k.indexOf(e,v),C=k.indexOf(i,v);break}if(z=we(C),k.substring(E+1+z,E+1+z+Z)===i){if(m.push(k.substring(v,E).replace(ae,b)),Re(E+1+z+Z),U=k.indexOf(e,v),E=k.indexOf(b,v),S&&(le(),X))return V();if(h&&T.length>=h)return V(!0);break}q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:T.length,index:v}),E++}}else if(f&&m.length===0&&k.substring(v,v+ie)===f){if(C===-1)return V();v=C+Z,C=k.indexOf(i,v),U=k.indexOf(e,v)}else if(U!==-1&&(U<C||C===-1))m.push(k.substring(v,U)),v=U+W,U=k.indexOf(e,v);else{if(C===-1)break;if(m.push(k.substring(v,C)),Re(C+Z),S&&(le(),X))return V();if(h&&T.length>=h)return V(!0)}return oe();function ve(G){T.push(G),B=v}function we(G){var te=0;return te=G!==-1&&(G=k.substring(E+1,G))&&G.trim()===""?G.length:te}function oe(G){return _||(G===void 0&&(G=k.substring(v)),m.push(G),v=H,ve(m),S&&le()),V()}function Re(G){v=G,ve(m),m=[],C=k.indexOf(i,v)}function V(G){if(t.header&&!R&&T.length&&!N){var te=T[0],_e=Object.create(null),De=new Set(te);let Qe=!1;for(let ke=0;ke<te.length;ke++){let ue=te[ke];if(_e[ue=L(t.transformHeader)?t.transformHeader(ue,ke):ue]){let Se,Je=_e[ue];for(;Se=ue+"_"+Je,Je++,De.has(Se););De.add(Se),te[ke]=Se,_e[ue]++,Qe=!0,(D=D===null?{}:D)[Se]=ue}else _e[ue]=1,te[ke]=ue;De.add(ue)}Qe&&console.warn("Duplicate headers found and renamed."),N=!0}return{data:T,errors:q,meta:{delimiter:e,linebreak:i,aborted:X,truncated:!!G,cursor:B+(R||0),renamedHeaders:D}}}function le(){u(V()),T=[],q=[]}},this.abort=function(){X=!0},this.getCharIndex=function(){return v}}function J(t){var e=t.data,i=g[e.workerId],f=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var u={abort:function(){f=!0,se(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ge,resume:ge};if(L(i.userStep)){for(var h=0;h<e.results.data.length&&(i.userStep({data:e.results.data[h],errors:e.results.errors,meta:e.results.meta},u),!f);h++);delete e.results}else L(i.userChunk)&&(i.userChunk(e.results,u,e.file),delete e.results)}e.finished&&!f&&se(e.workerId,e.results)}function se(t,e){var i=g[t];L(i.userComplete)&&i.userComplete(e),i.terminate(),delete g[t]}function ge(){throw new Error("Not implemented.")}function he(t){if(typeof t!="object"||t===null)return t;var e,i=Array.isArray(t)?[]:{};for(e in t)i[e]=he(t[e]);return i}function ee(t,e){return function(){t.apply(e,arguments)}}function L(t){return typeof t=="function"}return l.parse=function(t,e){var i=(e=e||{}).dynamicTyping||!1;if(L(i)&&(e.dynamicTypingFunction=i,i={}),e.dynamicTyping=i,e.transform=!!L(e.transform)&&e.transform,!e.worker||!l.WORKERS_SUPPORTED)return i=null,l.NODE_STREAM_INPUT,typeof t=="string"?(t=(f=>f.charCodeAt(0)!==65279?f:f.slice(1))(t),i=new(e.download?y:I)(e)):t.readable===!0&&L(t.read)&&L(t.on)?i=new A(e):(s.File&&t instanceof File||t instanceof Object)&&(i=new O(e)),i.stream(t);(i=(()=>{var f;return!!l.WORKERS_SUPPORTED&&(f=(()=>{var u=s.URL||s.webkitURL||null,h=a.toString();return l.BLOB_URL||(l.BLOB_URL=u.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",h,")();"],{type:"text/javascript"})))})(),(f=new s.Worker(f)).onmessage=J,f.id=x++,g[f.id]=f)})()).userStep=e.step,i.userChunk=e.chunk,i.userComplete=e.complete,i.userError=e.error,e.step=L(e.step),e.chunk=L(e.chunk),e.complete=L(e.complete),e.error=L(e.error),delete e.worker,i.postMessage({input:t,config:e,workerId:i.id})},l.unparse=function(t,e){var i=!1,f=!0,u=",",h=`\r
`,j='"',D=j+j,N=!1,b=null,F=!1,v=((()=>{if(typeof e=="object"){if(typeof e.delimiter!="string"||l.BAD_DELIMITERS.filter(function(R){return e.delimiter.indexOf(R)!==-1}).length||(u=e.delimiter),typeof e.quotes!="boolean"&&typeof e.quotes!="function"&&!Array.isArray(e.quotes)||(i=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(N=e.skipEmptyLines),typeof e.newline=="string"&&(h=e.newline),typeof e.quoteChar=="string"&&(j=e.quoteChar),typeof e.header=="boolean"&&(f=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");b=e.columns}e.escapeChar!==void 0&&(D=e.escapeChar+j),e.escapeFormulae instanceof RegExp?F=e.escapeFormulae:typeof e.escapeFormulae=="boolean"&&e.escapeFormulae&&(F=/^[=+\-@\t\r].*$/)}})(),new RegExp(K(j),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return X(null,t,N);if(typeof t[0]=="object")return X(b||Object.keys(t[0]),t,N)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||b),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),X(t.fields||[],t.data||[],N);throw new Error("Unable to serialize unrecognized input");function X(R,_,H){var W="",Z=(typeof R=="string"&&(R=JSON.parse(R)),typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(R)&&0<R.length),ie=!Array.isArray(_[0]);if(Z&&f){for(var S=0;S<R.length;S++)0<S&&(W+=u),W+=k(R[S],S);0<_.length&&(W+=h)}for(var T=0;T<_.length;T++){var q=(Z?R:_[T]).length,m=!1,B=Z?Object.keys(_[T]).length===0:_[T].length===0;if(H&&!Z&&(m=H==="greedy"?_[T].join("").trim()==="":_[T].length===1&&_[T][0].length===0),H==="greedy"&&Z){for(var Q=[],P=0;P<q;P++){var U=ie?R[P]:P;Q.push(_[T][U])}m=Q.join("").trim()===""}if(!m){for(var C=0;C<q;C++){0<C&&!B&&(W+=u);var ae=Z&&ie?R[C]:C;W+=k(_[T][ae],C)}T<_.length-1&&(!H||0<q&&!B)&&(W+=h)}}return W}function k(R,_){var H,W;return R==null?"":R.constructor===Date?JSON.stringify(R).slice(1,25):(W=!1,F&&typeof R=="string"&&F.test(R)&&(R="'"+R,W=!0),H=R.toString().replace(v,D),(W=W||i===!0||typeof i=="function"&&i(R,_)||Array.isArray(i)&&i[_]||((Z,ie)=>{for(var S=0;S<ie.length;S++)if(-1<Z.indexOf(ie[S]))return!0;return!1})(H,l.BAD_DELIMITERS)||-1<H.indexOf(u)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?j+H+j:H)}},l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!c&&!!s.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=$,l.ParserHandle=M,l.NetworkStreamer=y,l.FileStreamer=O,l.StringStreamer=I,l.ReadableStreamStreamer=A,s.jQuery&&((o=s.jQuery).fn.parse=function(t){var e=t.config||{},i=[];return this.each(function(h){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var j=0;j<this.files.length;j++)i.push({file:this.files[j],inputElem:this,instanceConfig:o.extend({},e)})}),f(),this;function f(){if(i.length===0)L(t.complete)&&t.complete();else{var h,j,D,N,b=i[0];if(L(t.before)){var F=t.before(b.file,b.inputElem);if(typeof F=="object"){if(F.action==="abort")return h="AbortError",j=b.file,D=b.inputElem,N=F.reason,void(L(t.error)&&t.error({name:h},j,D,N));if(F.action==="skip")return void u();typeof F.config=="object"&&(b.instanceConfig=o.extend(b.instanceConfig,F.config))}else if(F==="skip")return void u()}var v=b.instanceConfig.complete;b.instanceConfig.complete=function(X){L(v)&&v(X,b.file,b.inputElem),u()},l.parse(b.file,b.instanceConfig)}}function u(){i.splice(0,1),f()}}),d&&(s.onmessage=function(t){t=t.data,l.WORKER_ID===void 0&&t&&(l.WORKER_ID=t.workerId),typeof t.input=="string"?s.postMessage({workerId:l.WORKER_ID,results:l.parse(t.input,t.config),finished:!0}):(s.File&&t.input instanceof File||t.input instanceof Object)&&(t=l.parse(t.input,t.config))&&s.postMessage({workerId:l.WORKER_ID,results:t,finished:!0})}),(y.prototype=Object.create(p.prototype)).constructor=y,(O.prototype=Object.create(p.prototype)).constructor=O,(I.prototype=Object.create(I.prototype)).constructor=I,(A.prototype=Object.create(p.prototype)).constructor=A,l})})(Fe)),Fe.exports}var Ft=At();const rt=Tt(Ft);async function Pt(){let r=Oe.PUBLIC_TEMPLE_URL+"solutions/list",n=await fetch(r,{cache:"no-store"});if(!n.ok)return alert("could not fetch "+r),[];let a=await n.json();return a.sort((s,o)=>s.name<o.name?-1:s.name>o.name?1:0),a}async function Dt(r){const n=Oe.PUBLIC_TEMPLE_URL+`solutions/get_detail/${r}`;let a=await fetch(n,{cache:"no-store"});if(!a.ok)throw alert("Could not fetch "+n),new Error("Could not fetch "+n);return await a.json()}async function ur(r,n,a,s="",o=0,c=1){const d=new URL(Oe.PUBLIC_TEMPLE_URL+"solutions/get_full_ts");d.searchParams.set("solution_name",r),d.searchParams.set("components",n.join(",")),d.searchParams.set("unit_component",s),d.searchParams.set("scenario",a),d.searchParams.set("year",o.toString()),d.searchParams.set("rolling_average_size",c.toString());const g=d.toString();let x=await fetch(g,{cache:"no-store"});if(!x.ok)throw alert("Error when fetching "+g),new Error("Error when fetching "+g);let l=await x.json();const p=Object.fromEntries(Object.entries(l).map(([y,O])=>y=="unit"||O===void 0?null:[y,nt(O)]).filter(y=>y!==null));return{unit:He(l.unit||""),components:p}}async function fr(r,n,a,s=""){let o=new URL(Oe.PUBLIC_TEMPLE_URL+"solutions/get_total");o.searchParams.set("solution_name",r),o.searchParams.set("components",n.join(",")),o.searchParams.set("scenario",a),o.searchParams.set("unit_component",s);const c=o.toString();let d=await fetch(c,{cache:"no-store"});if(!d.ok)throw alert("Error when fetching "+c),new Error("Error when fetching "+c);let g=await d.json();for(const x in g)x=="unit"||g[x]===void 0||(g[x]=Ut(Nt(g[x])));return g.unit=He(g.unit||""),g}async function cr(r,n,a){let s=await(await fetch(Oe.PUBLIC_TEMPLE_URL+`solutions/get_unit/${r}/${n}?scenario=${a}`,{cache:"no-store"})).json();return He(s)}async function dr(r,n,a,s,o,c){const d=Oe.PUBLIC_TEMPLE_URL+`solutions/get_energy_balance/${r}/${n}/${a}?scenario=${s}&year=${o}&rolling_average_size=${c}`;let g=await fetch(d,{cache:"no-store"});if(!g.ok)throw alert("Could not fetch "+d),new Error("Could not fetch "+d);let x=await g.json(),l=["shed_demand","demand","flow_conversion_input","flow_export","flow_import","flow_storage_charge","flow_storage_discharge","flow_transport_in","flow_transport_out","cost_shed_demand","flow_conversion_output","constraint_nodal_energy_balance"],p={};for(const y of l)x[y]!==void 0&&(p[y]=nt(x[y]));return p}function Nt(r){if(r.slice(0,r.indexOf(`
`)).split(",").length==2){let o=r.split(`
`),c="",d="";for(const g of o.slice(1,o.length)){if(g=="")continue;let x=g.split(",");c+=x[0]+",",d+=x[1]+","}r=c.substring(0,c.length-1)+`
`+d.substring(0,d.length-1)}return r.slice(-1)==`
`&&(r=r.slice(0,-1)),rt.parse(r,{delimiter:",",header:!0,newline:`
`})}function nt(r){return r.map(n=>{let{d:a,t:s,...o}=n;const[c,d]=s;let g=0;return a=a.map(x=>g+=x),a=a.map(x=>x*d+c),{index:o,data:a}})}function He(r){return r.slice(-1)==`
`&&(r=r.slice(0,r.length-1)),rt.parse(r,{delimiter:",",header:!0,newline:`
`})}function Ut(r){return r.data=r.data.filter(n=>Object.keys(n).some(a=>!Number.isNaN(Number(a))&&!Number.isNaN(n[a])&&Math.abs(n[a])>0)),r}const Ee=[["rgb(122, 157, 207)","rgb(8, 64, 126)","rgb(166, 190, 223)","rgb(33, 92, 175)","rgb(211, 222, 239)","rgb(77, 125, 191)"],["rgb(212, 134, 129)","rgb(150, 39, 45)","rgb(226, 174, 171)","rgb(183, 53, 45)","rgb(241, 215, 213)","rgb(197, 93, 87)"],["rgb(102, 175, 192)","rgb(0, 89, 109)","rgb(153, 202, 213)","rgb(0, 120, 148)","rgb(204, 228, 234)","rgb(51, 149, 171)"],["rgb(202, 108, 174)","rgb(140, 10, 89)","rgb(220, 158, 201)","rgb(167, 17, 122)","rgb(239, 208, 227)","rgb(183, 59, 146)"],["rgb(161, 171, 113)","rgb(54, 82, 19)","rgb(192, 199, 161)","rgb(98, 115, 19)","rgb(224, 227, 208)","rgb(129, 143, 66)"],["rgb(187, 164, 113)","rgb(112, 79, 18)","rgb(210, 194, 161)","rgb(142, 103, 19)","rgb(232, 225, 208)","rgb(165, 133, 66)"]];let Le=0,je=0;function hr(){Le=0,je=0}function Mt(){Le>=Ee.length&&(Le=0,je++,je>=Ee[0].length&&(je=0));const r=Ee[Le][je];return Le++,r}function zt(r,n=.8){return r.replace("rgb","rgba").replace(")",`, ${n})`)}function _r(){let r=[];for(let n=0;n<Ee.length;n++)for(let a=0;a<Ee[0].length;a++)r.push(Ee[a][n]);return r}function pr(r,n,a,s=[],o=!1,c="bar",d=""){if(r.length==0)return[];let g=Object.keys(r[0]).filter(p=>!isNaN(Number(p))&&!s.includes(Number(p))),x=Object.keys(n),l={};for(const p of r){let y=!1;for(let A in n)if(!n[A].includes(p[A])){y=!0;break}if(y)continue;for(let A of Object.keys(a))if(!a[A].includes(p[A])){y=!0;break}if(y)continue;let O=[];for(let A of x)O.push(p[A]);let I=O.join("_")+d;I in l||(l[I]=Object.fromEntries(g.map(A=>[A,0])));for(let A of g){let M=Number(p[A]);p[A]=="inf"&&(M=1/0),l[I][A]+=M}}if(o){let p=Object.fromEntries(g.map(y=>[y,0]));for(let y of g)for(let O in l)p[y]+=l[O][y];for(let y of g)for(let O in l)p[y]==0?l[O][y]=0:l[O][y]*=1/p[y]}return Object.entries(l).filter(([,p])=>!Object.values(p).includes(NaN)).map(([p,y])=>{let O=Mt();return{label:p,data:Object.values(y),type:c,borderColor:O,backgroundColor:zt(O)}})}function qt(r){return Array.from(new Set(r))}function gr(r){return r.map(n=>({value:n,label:n}))}function vr(r){let n={};r.forEach(s=>{Object.entries(s.data).forEach(([o,c])=>{!c||c<=0||(n[o]=(n[o]||0)+c)})});let a={};return r.forEach(s=>{Object.entries(s.data).forEach(([o,c])=>{!c||c>=0||(a[o]=(a[o]||0)-c)})}),r.map(s=>({...s,data:Object.values(Object.entries(s.data).reduce((o,[c,d])=>(d&&n[c]>0?o[c]=d/n[c]:d&&a[c]>0?o[c]=d/a[c]:o[c]=0,o),{}))}))}var Bt=de('<div class="row mb-2"><div class="col-sm-3"><label class="fw-medium fs-4"> </label></div> <div class="col-sm-9"><!></div></div>');function Be(r,n){const a=$e();var s=Bt(),o=re(s),c=re(o),d=re(c,!0);Y(c),Y(o);var g=Pe(o,2),x=re(g);Ke(x,()=>n.content,()=>a),Y(g),Y(s),me(()=>{ye(c,"for",a),Te(d,n.label)}),fe(r,s)}function Wt(r,n,a,s,o){ne(n,""),ne(a,""),ne(s,null),o()}function Kt(r,n,a){ne(n,""),a()}var Ht=de("<option> </option>"),Qt=de('<select class="form-select"></select>'),Jt=de("<option> </option>"),Gt=de('<select class="form-select"></select>'),Zt=de("<option> </option>"),Yt=de('<select class="form-select"></select>'),Xt=de("<!> <!> <!>",1);function mr(r,n){bt(n,!0);let a=be(n,"carriers",31,()=>Ce([])),s=be(n,"nodes",31,()=>Ce([])),o=be(n,"edges",31,()=>Ce([])),c=be(n,"years",31,()=>Ce([])),d=be(n,"selected_solution",15),g=be(n,"loading",15,!1),x=be(n,"disabled",3,!0),l=xe(Ce([])),p=xe(null),y=xe(""),O=xe(""),I=xe(""),A=Ne(()=>qt(w(l).map(e=>e.name.split(".")[0]))),M=Ne(()=>w(l).filter(e=>e.name.startsWith(w(y))).map(e=>e.name.split(".")[1]||null).filter(e=>e!=null)),K=Ne(()=>w(M).length==0?w(y)||null:w(O)?w(y)+"."+w(O):null);Et(async function(){ne(l,await Pt(),!0),ne(y,Ue("solution")?.split(".")[0]||"",!0),ne(O,Ue("solution")?.split(".")[1]||"",!0),ne(I,Ue("scenario")||"",!0),$()});async function $(){if(w(K)==null){d(null);return}g(!0),ne(p,await Dt(w(K)),!0),Object.keys(w(p).scenarios).length==1?(ne(I,Object.keys(w(p).scenarios)[0],!0),J()):w(I)!=""&&w(I)in w(p).scenarios?J():d(null),g(!1)}function J(){w(p)==null||w(K)==null||(d({solution_name:w(K),scenario_name:w(I),detail:w(p).scenarios[w(I)],version:w(p).version}),Ot({solution:d().solution_name,scenario:Object.keys(w(p).scenarios).length>1?d().scenario_name:null}),a(d().detail.system.set_carriers.slice()),s(d().detail.system.set_nodes),o(Object.keys(d().detail.edges)),c([...Array(d().detail.system.optimized_years).keys()].map(e=>e*d().detail.system.interval_between_years+d().detail.system.reference_year)),n.solution_selected?.(d()))}var se=Xt(),ge=yt(se);Be(ge,{label:"Solution",content:(i,f=ce)=>{var u=Qt();u.__change=[Wt,O,I,p,$],Me(u,21,()=>w(A),ze,(h,j)=>{var D=Ht(),N=re(D,!0);Y(D);var b={};me(()=>{Te(N,w(j)),b!==(b=w(j))&&(D.value=(D.__value=w(j))??"")}),fe(h,D)}),Y(u),me(()=>{ye(u,"id",f()),u.disabled=x()}),qe(u,()=>w(y),h=>ne(y,h)),fe(i,u)}});var he=Pe(ge,2);{var ee=e=>{Be(e,{label:"Subsolution",content:(f,u=ce)=>{var h=Gt();h.__change=[Kt,I,$],Me(h,21,()=>w(M),ze,(j,D)=>{var N=Jt(),b=re(N,!0);Y(N);var F={};me(()=>{Te(b,w(D)),F!==(F=w(D))&&(N.value=(N.__value=w(D))??"")}),fe(j,N)}),Y(h),me(()=>{ye(h,"id",u()),h.disabled=x()}),qe(h,()=>w(O),j=>ne(O,j)),fe(f,h)}})};Ge(he,e=>{w(M).length>0&&e(ee)})}var L=Pe(he,2);{var t=e=>{Be(e,{label:"Scenario",content:(f,u=ce)=>{var h=Yt();h.__change=J,Me(h,21,()=>Object.keys(w(p)?.scenarios||[]),ze,(j,D)=>{var N=Zt(),b=re(N,!0);Y(N);var F={};me(()=>{Te(b,w(D)),F!==(F=w(D))&&(N.value=(N.__value=w(D))??"")}),fe(j,N)}),Y(h),me(()=>{ye(h,"id",u()),h.disabled=x()}),qe(h,()=>w(I),j=>ne(I,j)),fe(f,h)}})};Ge(L,e=>{w(p)&&Object.keys(w(p).scenarios).length>1&&e(t)})}fe(r,se),wt()}Rt(["change"]);var Vt=de('<div class="z-1 position-relative"><div class="accordion" id="accordionFilters"><!></div></div>');function br(r,n){var a=Vt(),s=re(a),o=re(s);Ke(o,()=>n.children??ce),Y(s),Y(a),fe(r,a)}var $t=de('<div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" aria-expanded="true"> </button></h2> <div class="accordion-collapse collapse show"><div class="accordion-body"><!></div></div></div>');function yr(r,n){const a=$e();var s=$t(),o=re(s),c=re(o),d=re(c,!0);Y(c),Y(o);var g=Pe(o,2),x=re(g),l=re(x);Ke(l,()=>n.children??ce),Y(x),Y(g),Y(s),me(()=>{ye(c,"data-bs-target","#collapse"+a),ye(c,"aria-controls","collapse"+a),Te(d,n.title),ye(g,"id","collapse"+a)}),fe(r,s)}export{br as F,mr as S,cr as a,yr as b,Be as c,ur as d,qt as e,fr as f,dr as g,pr as h,vr as i,qe as j,Tt as k,lr as l,_r as m,Mt as n,hr as r,gr as t};
