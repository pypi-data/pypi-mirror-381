[tool.poetry]
name = "secop-cli"
version = "0.2.0"
description = "Скриптовый интерфейс Secop"
authors = ["Valeria Zaborovskaia, valeria.zaborovskaya@vkteam.ru"]
readme = "README.md"
packages = [{ include = "secop_cli" }]

[tool.poetry.dependencies]
python = "~3.11"
typer = "^0.12.3"
rich = "^13.0"
click = "^8.1.7"
shellingham = "^1.5"
pymongo = "^4.11.3"
pydantic = ">=2.9.0, <3"
requests = "^2.22.0"
pyyaml = ">=6, <7"
pytest = "^8.3.2"
responses = "^0.25.3"

[tool.poetry.group.dev.dependencies]
mypy = "*"
pytest = "*"
pytest-cov = "*"
pytest-asyncio = "*"
isort = "*"
flake8 = "*"
flake8-print = "*"
flake8-isort = "*"
flake8-pyproject = "*"
black = "*"
types-python-dateutil = "*"
types-protobuf = "*"
types-PyYAML = "*"
types-emoji = "*"
types-pytz = "*"
types-redis = "*"
types-cachetools = "*"
types-requests = "*"
python-lsp-server = "^1.11.0"
python-lsp-black = "^2.0.0"
deepdiff = "*"
twine = "^5.0.0"

[tool.poetry.scripts]
secop-cli = "secop_cli.__main__:cli"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[[tool.poetry.source]]
name = "voice"
url = "https://pypi.g.smailru.net/voice/packages/+simple"
priority = "primary"

[tool.pytest.ini_options]
addopts = "-v --cov --cov-report=term"
filterwarnings = [
    "ignore::DeprecationWarning",
]
asyncio_mode = "auto"
asyncio_default_fixture_loop_scope = "function"

[tool.black]
line-length = 100
target-version = ["py311"]

[tool.isort]
profile = "black"
known_first_party = [
    "secop_deployer",
]
known_third_party = [
    "openapify",
]
skip = ["__main__.py"]

[tool.mypy]
ignore_missing_imports = true
check_untyped_defs = true
no_implicit_optional = true

[tool.flake8]
max-line-length = 100
extend_ignore = ["W606", "E203"]

[tool.coverage.run]
branch = true
source = ["secop_cli"]
omit = [
    "secop_cli/__main__.py",
]

[tool.coverage.report]
exclude_lines = [
    "@abc.abstractmethod",
    "@abc.abstractproperty",
    "CancelledError",
    "NotImplementedError",
    "pragma: no cover",
    "__repr__",
    "__str__",
]
fail_under = 0
precision = 2
show_missing = true
