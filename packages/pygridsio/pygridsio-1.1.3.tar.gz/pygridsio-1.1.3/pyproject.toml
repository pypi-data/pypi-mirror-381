[build-system]
requires = ["setuptools", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "pygridsio"
version = "1.1.3"
description = "This is a utility package to enable IO and plotting for .nc, .tif, .zmap, .asc grid files or xarray objects"
authors = [
    { name = "Hen Brett", email = "hen.brett@tno.nl" }
]
readme = "README.md"
license = { file = "LICENSE" }
requires-python = ">=3.6"
dependencies = [
    "numpy",
    "pandas",
    "pykrige",
    "xarray",
    "rioxarray",
    "netCDF4",
    "plotly",
    "geopandas",
    "matplotlib",
    "contextily"
]


[tool.pytest.ini_options]
minversion = "7.0"
addopts = "--strict-markers -ra"
testpaths = ["."]
markers = [
    "integration: Marks integration tests (deselect with '-m \"not integration\"')"
]

[tool.setuptools]
package-dir = {"" = "src"}

[tool.setuptools.package-data]
"pygridsio" = ["resources/netherlands_shapefile/*"]  # Ensure all files inside 'lib/' are included

[tool.pixi.project]
channels = ["conda-forge"]
platforms = ["win-64", "linux-64"]

[tool.pixi.tasks]
build = "pixi run python -m build"
publish = "pixi run twine upload -r pypi-pygridsio dist/*"

[tool.pixi.pypi-dependencies]
pygridsio = { path = ".", editable = true }
build = ">=1.2.2.post1, <2"

[tool.pixi.dependencies]
python = ">=3.8,<3.11"
numpy = ">=1.13"
pykrige = ">=1.7.2"
matplotlib = ">=3.9.2"
netcdf4 = ">=1.7.2"
geopandas = ">=1.0.1"
plotly = "==6.0.0"
rioxarray = ">=0.17.2"
openpyxl = ">=3.1.5,<4"
gdal = ">=3.10.2,<4"
twine = ">=6.1.0,<7"
ruff = ">=0.13.0,<0.14"
pytest = ">=8.4.2,<9"
contextily = ">=1.6.2,<2"

[tool.ruff]
line-length = 88
target-version = "py313"

[tool.ruff.lint]
select = [
    # pycodestyle (style guide violations)
    "E",
    # Pyflakes (bug detection)
    "F",
    # pyupgrade (modern Python syntax)
    "UP",
    # flake8-bugbear (common bugs and design issues)
    "B",
    # flake8-simplify (simplifiable constructs)
    "SIM",
    # isort (import sorting)
    "I",
]
