{
    "title": "MIBI assay template",
    "description": "Multiplexed Ion Beam Imaging (MIBI) submission.",
    "prism_template_root_object_schema": "assays/mibi_assay.json",
    "prism_template_root_object_pointer": "/assays/mibi/0",
    "properties": {
        "worksheets": {
            "MIBI": {
                "prism_data_object_pointer": "/records/-",
                "preamble_rows": {
                    "protocol identifier": {
                        "merge_pointer": "3/protocol_identifier",
                        "type_ref": "clinical_trial.json#properties/protocol_identifier"
                    },
                    "batch id": {
                        "merge_pointer": "0/batch_id",
                        "type_ref": "assays/mibi_assay.json#properties/batch_id"
                    },
                    "assay creator": {
                        "merge_pointer": "0/assay_creator",
                        "type_ref": "assays/components/assay_core.json#properties/assay_creator"
                    },
                    "metadata tsv": {
                        "merge_pointer": "0/metadata_tsv",
                        "gcs_uri_format": "{protocol identifier}/mibi/{batch id}/metadata.tsv",
                        "is_artifact": 1,
                        "type_ref": "assays/components/local_file.json#properties/file_path",
                        "allow_empty": true
                    }
                },
                "data_columns": {
                    "Samples": {
                        "cimac id": {
                            "merge_pointer": "0/cimac_id",
                            "type_ref": "sample.json#properties/cimac_id"
                        },
                        "roi id": {
                            "merge_pointer": "0/files/roi_id",
                            "type_ref": "assays/components/mibi_imaging/mibi_input.json#properties/roi_id"
                        },
                        "Dataset": {
                            "merge_pointer": "0/files/dataset",
                            "type_ref": "assays/components/mibi_imaging/mibi_input.json#properties/dataset",
                            "allow_empty": true
                        },
                        "HE file type": {
                            "do_not_merge": true,
                            "type": "string",
                            "enum": ["svs", "jpg"]
                        },
                        "HE file name": {
                            "merge_pointer": "0/files/he_file",
                            "is_artifact": 1,
                            "gcs_uri_format": "{protocol identifier}/mibi/{batch id}/{cimac id}/{roi id}/he_file.{he file type}",
                            "type_ref": "assays/components/local_file.json#properties/file_path"
                        },
                        "Roi description": {
                            "merge_pointer": "0/files/roi_description",
                            "type_ref": "assays/components/mibi_imaging/mibi_input.json#properties/roi_description",
                            "allow_empty": true
                        },
                        "MIBI OME Tiff File": {
                            "merge_pointer": "0/files/mibi_ome_tiff_file",
                            "type_ref": "assays/components/local_file.json#properties/file_path",
                            "is_artifact": 1,
                            "gcs_uri_format": "{protocol identifier}/mibi/{batch id}/{cimac id}/{roi id}/{mibi ome tiff file name}.ome.tiff"
                        },
                        "MIBI OME Tiff File Name": {
                            "merge_pointer": "0/files/mibi_ome_tiff_file_name",
                            "type_ref": "assays/components/mibi_imaging/mibi_input.json#properties/mibi_ome_tiff_file_name"
                        },

                        "Comment": {
                            "merge_pointer": "0/files/comment",
                            "type_ref": "assays/components/mibi_imaging/mibi_input.json#properties/comment",
                            "allow_empty": true
                        }
                    }
                }
            },
            "Antibodies": {
                "prism_data_object_pointer": "/antibodies/-",
                "data_columns":
                {
                    "Antibodies":
                    {
                        "Channel id": {
                            "merge_pointer": "0/channel_id",
                            "type_ref": "assays/components/mibi_antibody.json#properties/channel_id"
                        },
                        "Antibody name": {
                            "merge_pointer": "0/antibody",
                            "type_ref": "assays/components/antibody.json#properties/antibody"
                        },
                        "Clone": {
                            "merge_pointer": "0/clone",
                            "type_ref": "assays/components/antibody.json#properties/clone",
                            "allow_empty": true
                        },
                        "Company": {
                            "merge_pointer": "0/company",
                            "type_ref": "assays/components/antibody.json#properties/clone",
                            "allow_empty": true
                        },
                        "Scicrunch rrid": {
                            "merge_pointer": "0/scicrunch_rrid",
                            "type_ref": "assays/components/mibi_antibody.json#properties/scicrunch_rrid",
                            "allow_empty": true
                        },
                        "Uniprot accession number": {
                            "merge_pointer": "0/uniprot_accession_number",
                            "type_ref": "assays/components/mibi_antibody.json#properties/uniprot_accession_number",
                            "allow_empty": true
                        },
                        "Lot number": {
                            "merge_pointer": "0/lot_num",
                            "type_ref": "assays/components/antibody.json#properties/lot_num",
                            "allow_empty": true
                        },
                        "Dilution": {
                            "merge_pointer": "0/dilution",
                            "type_ref": "assays/components/mibi_antibody.json#properties/dilution",
                            "allow_empty": true
                        },
                        "Concentration value": {
                            "merge_pointer": "0/concentration_value",
                            "type_ref": "assays/components/mibi_antibody.json#properties/concentration_value",
                            "allow_empty": true
                        },
                        "Concentration units": {
                            "merge_pointer": "0/concentration_units",
                            "type_ref": "assays/components/mibi_antibody.json#properties/concentration_units",
                            "allow_empty": true
                        },
                        "Conjugated catalog number": {
                            "merge_pointer": "0/cat_num",
                            "type_ref": "assays/components/antibody.json#properties/cat_num",
                            "allow_empty": true
                        },
                        "Conjugated tag": {
                            "merge_pointer": "0/conjugated_tag",
                            "type_ref": "assays/components/mibi_antibody.json#properties/conjugated_tag",
                            "allow_empty": true
                        }
                    }
                }
            }
        }
    }
}
